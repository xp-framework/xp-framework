Index: ../../../skeleton/unittest/PrerequisitesNotMetError.class.php
===================================================================
--- ../../../skeleton/unittest/PrerequisitesNotMetError.class.php	(revision 8952)
+++ ../../../skeleton/unittest/PrerequisitesNotMetError.class.php	(working copy)
@@ -26,8 +26,8 @@
      * @param   array prerequisites default array()
      * @param   string code
      */
-    public function __construct($message, &$cause, $prerequisites= array()) {
-      $this->cause= &$cause;
+    public function __construct($message, $cause, $prerequisites= array()) {
+      $this->cause= $cause;
       $this->prerequisites= $prerequisites;
       parent::__construct($message);
     }
Index: ../../../skeleton/unittest/TestFailure.class.php
===================================================================
--- ../../../skeleton/unittest/TestFailure.class.php	(revision 8952)
+++ ../../../skeleton/unittest/TestFailure.class.php	(working copy)
@@ -24,9 +24,9 @@
      * @param   &mixed reason
      * @param   float elapsed
      */
-    public function __construct(&$test, &$reason, $elapsed) {
-      $this->test= &$test;
-      $this->reason= &$reason;
+    public function __construct($test, $reason, $elapsed) {
+      $this->test= $test;
+      $this->reason= $reason;
       $this->elapsed= $elapsed;
     }
 
Index: ../../../skeleton/unittest/TestSuccess.class.php
===================================================================
--- ../../../skeleton/unittest/TestSuccess.class.php	(revision 8952)
+++ ../../../skeleton/unittest/TestSuccess.class.php	(working copy)
@@ -23,8 +23,8 @@
      * @param   &mixed result
      * @param   float elapsed
      */
-    public function __construct(&$test, $elapsed) {
-      $this->test= &$test;
+    public function __construct($test, $elapsed) {
+      $this->test= $test;
       $this->elapsed= $elapsed;
     }
     
Index: ../../../skeleton/unittest/TestSuite.class.php
===================================================================
--- ../../../skeleton/unittest/TestSuite.class.php	(revision 8952)
+++ ../../../skeleton/unittest/TestSuite.class.php	(working copy)
@@ -43,11 +43,11 @@
      * @return  &unittest.TestCase
      * @throws  lang.IllegalArgumentException in case given argument is not a testcase
      */
-    public function &addTest(&$test) {
+    public function addTest($test) {
       if (!is('unittest.TestCase', $test)) {
         throw(new IllegalArgumentException('Given argument is not a TestCase ('.xp::typeOf($test).')'));
       }
-      $this->tests[]= &$test;
+      $this->tests[]= $test;
       return $test;
     }
 
@@ -60,7 +60,7 @@
      * @throws  lang.IllegalArgumentException in case given argument is not a testcase class
      * @throws  util.NoSuchElementException in case given testcase class does not contain any tests
      */
-    public function addTestClass(&$class, $arguments= array()) {
+    public function addTestClass($class, $arguments= array()) {
       if (!$class->isSubclassOf('unittest.TestCase')) {
         throw(new IllegalArgumentException('Given argument is not a TestCase class ('.xp::stringOf($class).')'));
       }
@@ -70,12 +70,12 @@
         if (!$methods[$i]->hasAnnotation('test')) continue;
 
         if ($methods[$i]->hasAnnotation('ignore')) {
-          $ignored[]= &$methods[$i];
+          $ignored[]= $methods[$i];
           continue;
         }
 
         // Add test method
-        $this->addTest(call_user_func_array(array(&$class, 'newInstance'), array_merge(
+        $this->addTest(call_user_func_array(array($class, 'newInstance'), array_merge(
           (array)$methods[$i]->getName(TRUE),
           $arguments
         )));
@@ -114,7 +114,7 @@
      * @param   int pos
      * @return  &unittest.TestCase or NULL if none was found
      */
-    public function &testAt($pos) {
+    public function testAt($pos) {
       if (isset($this->tests[$pos])) return $this->tests[$pos]; else return NULL;
     }
     
@@ -125,7 +125,7 @@
      * @param   &unittest.TestCase test
      * @return  &unittest.TestResult
      */
-    public function &runTest(&$test) {
+    public function runTest($test) {
       $result= new TestResult();
       $test->run($result);
       return $result;
@@ -137,7 +137,7 @@
      * @access  public
      * @return  &unittest.TestResult
      */
-    public function &run() {
+    public function run() {
       $result= new TestResult();
       for ($i= 0, $s= sizeof($this->tests); $i < $s; $i++) {
         $this->tests[$i]->run($result);
Index: ../../../skeleton/unittest/gui/GtkUnitTestUI.class.php
===================================================================
--- ../../../skeleton/unittest/gui/GtkUnitTestUI.class.php	(revision 8952)
+++ ../../../skeleton/unittest/gui/GtkUnitTestUI.class.php	(working copy)
@@ -37,7 +37,7 @@
      * @access  public
      * @param   &util.cmd.ParamString p
      */
-    public function __construct(&$p) {
+    public function __construct($p) {
       parent::__construct($p, dirname(__FILE__).'/gtkui.glade', 'mainwindow');
     }
     
@@ -55,7 +55,7 @@
       $this->dialog->setModal(TRUE);
       
       // Hierarchy tree
-      $this->hierarchy= &$this->widget('hierarchy');
+      $this->hierarchy= $this->widget('hierarchy');
       $this->hierarchy->set_row_height(20);
       $this->hierarchy->set_line_style(GTK_CTREE_LINES_DOTTED);
       $this->connect($this->hierarchy, 'tree_select_row', 'onSelectTest');
@@ -63,19 +63,19 @@
       // Labels
       $this->labels= array();
       foreach (array('total', 'succeeded', 'failed', 'skipped') as $name) {
-        $this->labels[$name]= &$this->widget('label_'.$name);
+        $this->labels[$name]= $this->widget('label_'.$name);
       }
 
       // Trace
-      $this->trace= &$this->widget('trace');
+      $this->trace= $this->widget('trace');
       $this->trace->set_row_height(20);
       $this->trace->set_line_style(GTK_CTREE_LINES_DOTTED);
       
       // Progress bar
-      $this->progress= &$this->widget('progressbar');
+      $this->progress= $this->widget('progressbar');
       
       // Status bar
-      $this->statusbar= &$this->widget('statusbar');
+      $this->statusbar= $this->widget('statusbar');
       $this->setStatusText('Select test suite configuration');
       
       // Pixmaps
@@ -129,7 +129,7 @@
      * @param   string result
      * @param   &mixed data
      */
-    public function updateTest($id, $result, &$data) {
+    public function updateTest($id, $result, $data) {
       $content= $this->hierarchy->node_get_pixtext($this->node[$id], 0);
       $this->hierarchy->node_set_pixtext(
         $this->node[$id], 
@@ -149,13 +149,13 @@
      * @param   &php.GtkWidget widget the ctree
      * @param   &php.GtkNode node the selected node
      */
-    public function onSelectTest(&$widget, &$node) {
+    public function onSelectTest($widget, $node) {
     
       // Only make test nodes selectable
       if (!$node->is_leaf) return;
       
       // Get data
-      $data= &$widget->node_get_row_data($node);
+      $data= $widget->node_get_row_data($node);
       $this->cat->debug('onSelectTest', $data);
       if (empty($data)) return;
       
@@ -170,7 +170,7 @@
       }
       
       if (isset($type)) {
-        $node= &$this->trace->insert_node(
+        $node= $this->trace->insert_node(
           NULL,
           NULL,
           array($caption),
@@ -208,7 +208,7 @@
      * @access  protected
      * @param   &php.GtkWidget widget
      */
-    public function onClearClicked(&$widget) {
+    public function onClearClicked($widget) {
       $this->hierarchy->clear();
       $this->trace->clear();
       $this->trace->columns_autosize();
@@ -224,7 +224,7 @@
      * @access  protected
      * @param   &php.GtkWidget widget
      */
-    public function onRunClicked(&$widget) {
+    public function onRunClicked($widget) {
       $numtests= $this->suite->numTests();
       $this->progress->configure(0.0, 0.0, $numtests);
       $result= new TestResult();
@@ -263,16 +263,16 @@
      * @param   &util.Properties config
      * @param   string section
      */
-    public function addTestsFromSection(&$config, $section) {
+    public function addTestsFromSection($config, $section) {
       try {
-        $class= &XPClass::forName($config->readString($section, 'class'));
+        $class= XPClass::forName($config->readString($section, 'class'));
       } catch (ClassNotFoundException $e) {
         MessageBox::display('Section '.$section.': "'.$e->getMessage(), 'Error', MB_OK | MB_ICONERROR);
         exit(-2);
       }
 
       $this->cat->debug('Processing section', $section);
-      $sectionNode= &$this->hierarchy->insert_node(
+      $sectionNode= $this->hierarchy->insert_node(
         NULL,
         NULL,
         array($config->getFilename().'::'.$section, ''),
@@ -300,14 +300,14 @@
 
         // Add test method
         $this->cat->debugf('     >> Adding test %s::%s', $class->getName(), $methods[$i]->getName());
-        $test= &call_user_func_array(array(&$class, 'newInstance'), array_merge(
+        $test= call_user_func_array(array($class, 'newInstance'), array_merge(
           (array)$methods[$i]->getName(),
           $config->readArray($section, 'args')
         ));
         
         // Insert into hierarchy tree
         if (!isset($this->node[$section.$test->getClassName()])) {
-          $this->node[$section.$test->getClassName()]= &$this->hierarchy->insert_node(
+          $this->node[$section.$test->getClassName()]= $this->hierarchy->insert_node(
             $sectionNode,
             NULL,
             array($test->getClassName(), ''),
@@ -320,7 +320,7 @@
             TRUE
           );
         }
-        $this->node[$test->hashCode()]= &$this->hierarchy->insert_node(
+        $this->node[$test->hashCode()]= $this->hierarchy->insert_node(
           $this->node[$section.$test->getClassName()],
           NULL,
           array($test->getName(), ''),
@@ -374,7 +374,7 @@
      * @access  protected
      * @param   &php.GtkWidget widget
      */
-    public function onSelectClicked(&$widget) {
+    public function onSelectClicked($widget) {
       do {
       
         // If anything else than "OK" is pressed in the dialog, break
Index: ../../../skeleton/unittest/TestCase.class.php
===================================================================
--- ../../../skeleton/unittest/TestCase.class.php	(revision 8952)
+++ ../../../skeleton/unittest/TestCase.class.php	(working copy)
@@ -157,7 +157,7 @@
      * @param   string error default 'notobject'
      * @return  bool
      */
-    public function assertObject(&$var, $error= 'notobject') {
+    public function assertObject($var, $error= 'notobject') {
       if (!is_object($var)) {
         return $this->fail($error, 'object', xp::typeOf($var));
       }
@@ -204,7 +204,7 @@
      * @param   &mixed b
      * @return  bool
      */
-    public function _compare(&$a, &$b) {
+    public function _compare($a, $b) {
       if (is_array($a)) {
         if (!is_array($b) || sizeof($a) != sizeof($b)) return FALSE;
 
@@ -321,7 +321,7 @@
      * @param   string error default 'notequal'
      * @return  bool
      */
-    public function assertClass(&$var, $name, $error= 'notequal') {
+    public function assertClass($var, $name, $error= 'notequal') {
       if (!is('Generic', $var)) {
         return $this->fail($error, $pattern, $var);
       }
@@ -340,7 +340,7 @@
      * @param   string error default 'notsubclass'
      * @return  bool
      */
-    public function assertSubclass(&$var, $name, $error= 'notsubclass') {
+    public function assertSubclass($var, $name, $error= 'notsubclass') {
       if (!is('Generic', $var)) {
         return $this->fail($error, $pattern, $var);
       }
@@ -361,7 +361,7 @@
      */
     public function assertIn($list, $var, $error= 'notinlist') {
       if (is('Generic', $var)) {
-        $result= array_filter($list, array(&$var, 'equals'));
+        $result= array_filter($list, array($var, 'equals'));
         $contained= !empty($result);
       } else {
         $contained= in_array($var, $list, TRUE);
@@ -398,9 +398,9 @@
      * @return  bool success
      * @throws  lang.MethodNotImplementedException
      */
-    public function run(&$result) {
-      $class= &$this->getClass();
-      $method= &$class->getMethod($this->name);
+    public function run($result) {
+      $class= $this->getClass();
+      $method= $class->getMethod($this->name);
 
       if (!$method) {
         throw(new MethodNotImplementedException(
@@ -412,7 +412,7 @@
       $expected= NULL;
       if ($method->hasAnnotation('expect')) {
         try {
-          $expected= &XPClass::forName($method->getAnnotation('expect'));
+          $expected= XPClass::forName($method->getAnnotation('expect'));
         } catch (Exception $e) {
           throw($e);
         }
Index: ../../../skeleton/unittest/TestResult.class.php
===================================================================
--- ../../../skeleton/unittest/TestResult.class.php	(revision 8952)
+++ ../../../skeleton/unittest/TestResult.class.php	(working copy)
@@ -29,7 +29,7 @@
      * @param   &unittest.TestCase test
      * @param   float elapsed
      */
-    public function setSucceeded(&$test, $elapsed) {
+    public function setSucceeded($test, $elapsed) {
       $this->succeeded[$test->hashCode()]= new TestSuccess($test, $elapsed);
     }
     
@@ -41,7 +41,7 @@
      * @param   mixed reason
      * @param   float elapsed
      */
-    public function setFailed(&$test, $reason, $elapsed) {
+    public function setFailed($test, $reason, $elapsed) {
       $this->failed[$test->hashCode()]= new TestFailure($test, $reason, $elapsed);
     }
 
@@ -53,7 +53,7 @@
      * @param   mixed reason
      * @param   float elapsed
      */
-    public function setSkipped(&$test, $reason, $elapsed) {
+    public function setSkipped($test, $reason, $elapsed) {
       $this->skipped[$test->hashCode()]= new TestSkipped($test, $reason, $elapsed);
     }
 
Index: ../../../skeleton/unittest/TestSkipped.class.php
===================================================================
--- ../../../skeleton/unittest/TestSkipped.class.php	(revision 8952)
+++ ../../../skeleton/unittest/TestSkipped.class.php	(working copy)
@@ -24,9 +24,9 @@
      * @param   &mixed reason
      * @param   float elapsed
      */
-    public function __construct(&$test, &$reason, $elapsed) {
-      $this->test= &$test;
-      $this->reason= &$reason;
+    public function __construct($test, $reason, $elapsed) {
+      $this->test= $test;
+      $this->reason= $reason;
       $this->elapsed= $elapsed;
     }
 
Index: ../../../skeleton/unittest/coverage/Block.class.php
===================================================================
--- ../../../skeleton/unittest/coverage/Block.class.php	(revision 8952)
+++ ../../../skeleton/unittest/coverage/Block.class.php	(working copy)
@@ -30,7 +30,7 @@
       $this->code= $code;
       $this->start= $start;
       $this->end= $end;
-      $this->expressions= &Collection::forClass('Fragment');
+      $this->expressions= Collection::forClass('Fragment');
       $this->expressions->addAll($expressions);
     }
     
@@ -41,7 +41,7 @@
      * @param   &lang.Object block
      * @return  bool
      */
-    public function equals(&$block) {
+    public function equals($block) {
       return (
         is('Block', $block) && 
         $this->start == $block->start &&
Index: ../../../skeleton/unittest/coverage/Expression.class.php
===================================================================
--- ../../../skeleton/unittest/coverage/Expression.class.php	(revision 8952)
+++ ../../../skeleton/unittest/coverage/Expression.class.php	(working copy)
@@ -38,7 +38,7 @@
      * @param   &lang.Object expr
      * @return  bool
      */
-    public function equals(&$expr) {
+    public function equals($expr) {
       return (
         is('Expression', $expr) && 
         $this->code == $expr->code &&
Index: ../../../skeleton/unittest/coverage/PHPCodeFragmentizer.class.php
===================================================================
--- ../../../skeleton/unittest/coverage/PHPCodeFragmentizer.class.php	(revision 8952)
+++ ../../../skeleton/unittest/coverage/PHPCodeFragmentizer.class.php	(working copy)
@@ -31,12 +31,12 @@
       static $delim= array(')', ';', ',', '=', '+', '-', '*', '/', '%');
       
       $tokens= token_get_all(trim($code));
-      $expressions= &Collection::forClass('Fragment');
+      $expressions= Collection::forClass('Fragment');
       $expression= '';
       $line= 1 + substr_count($tokens[0][1], "\n");
       $last= 1;
       $level= 0;
-      $collections= array(&$expressions);
+      $collections= array($expressions);
       $blocks= array();
       
       // Iterate over tokens, starting from the T_OPEN_TAG and ending 
@@ -79,8 +79,8 @@
             break;
           
           case '{':           // SOB
-            $blocks[$level]= &$collections[$level]->add(new Block(trim($expression), array(), $line, -1));
-            $collections[++$level]= &$blocks[$level- 1]->expressions;
+            $blocks[$level]= $collections[$level]->add(new Block(trim($expression), array(), $line, -1));
+            $collections[++$level]= $blocks[$level- 1]->expressions;
             $expression= '';
             $last= -1;
             break;
Index: ../../../skeleton/unittest/coverage/Comment.class.php
===================================================================
--- ../../../skeleton/unittest/coverage/Comment.class.php	(revision 8952)
+++ ../../../skeleton/unittest/coverage/Comment.class.php	(working copy)
@@ -38,7 +38,7 @@
      * @param   &lang.Object expr
      * @return  bool
      */
-    public function equals(&$expr) {
+    public function equals($expr) {
       return (
         is('Comment', $expr) && 
         $this->text == $expr->text &&
Index: ../../../skeleton/lang/archive/ArchiveClassLoader.class.php
===================================================================
--- ../../../skeleton/lang/archive/ArchiveClassLoader.class.php	(revision 8954)
+++ ../../../skeleton/lang/archive/ArchiveClassLoader.class.php	(working copy)
@@ -38,9 +38,9 @@
      * @access  public
      * @param   &lang.archive.Archive archive
      */
-    public function __construct(&$archive) {
+    public function __construct($archive) {
       parent::__construct();
-      $this->archive= &$archive;
+      $this->archive= $archive;
       $this->archive->isOpen() || $this->archive->open(ARCHIVE_READ);
     }
 
@@ -77,7 +77,7 @@
      * @return  &lang.XPClass
      * @throws  lang.ClassNotFoundException in case the class can not be found
      */
-    public function &loadClass($class) {
+    public function loadClass($class) {
       $name= xp::reflect($class);
 
       if (!class_exists($name)) {
@@ -128,8 +128,8 @@
      * @return  &io.Stream
      * @throws  lang.ElementNotFoundException in case the resource cannot be found
      */
-    public function &getResourceAsStream($string) {
-      if (FALSE !== ($s= &$this->archive->getStream($string))) {
+    public function getResourceAsStream($string) {
+      if (FALSE !== ($s= $this->archive->getStream($string))) {
         return $s;
       }
     
@@ -155,7 +155,7 @@
      * @param   string path
      * @return  &lang.archive.ArchiveClassLoader
      */
-    public static function &instanceFor($path) {
+    public static function instanceFor($path) {
       static $pool= array();
       
       if (isset($pool[$path])) {
Index: ../../../skeleton/lang/archive/Archive.class.php
===================================================================
--- ../../../skeleton/lang/archive/Archive.class.php	(revision 8954)
+++ ../../../skeleton/lang/archive/Archive.class.php	(working copy)
@@ -60,8 +60,8 @@
      * @access  public
      * @param   &io.File file
      */
-    public function __construct(&$file) {
-      $this->file= &$file;
+    public function __construct($file) {
+      $this->file= $file;
       
     }
     
@@ -73,7 +73,7 @@
      * @param   string id the id under which this entry will be located
      * @return  bool success
      */
-    public function add(&$file, $id) {
+    public function add($file, $id) {
       try {
         $file->open(FILE_MODE_READ);
         $data= $file->read($file->size());
@@ -203,7 +203,7 @@
      * @return  &string content
      * @throws  lang.ElementNotFoundException in case the specified id does not exist
      */
-    public function &extract($id) {
+    public function extract($id) {
       if (!$this->contains($id)) {
         throw(new ElementNotFoundException('Element "'.$id.'" not contained in this archive'));
       }
@@ -234,7 +234,7 @@
      * @return  &io.Stream
      * @throws  lang.ElementNotFoundException in case the specified id does not exist
      */
-    public function &getStream($id) {
+    public function getStream($id) {
       if (!$this->contains($id)) {
         throw(new ElementNotFoundException('Element "'.$id.'" not contained in this archive'));
       }
@@ -246,8 +246,8 @@
         $this->_index[$id][3]
       );
       
-      $class= &XPClass::forName('io.EnclosedStream');
-      $s= &$class->newInstance($this->file, $pos, $this->_index[$id][2]);
+      $class= XPClass::forName('io.EnclosedStream');
+      $s= $class->newInstance($this->file, $pos, $this->_index[$id][2]);
       return $s;
     }
     
Index: ../../../skeleton/lang/archive/ArchiveReader.class.php
===================================================================
--- ../../../skeleton/lang/archive/ArchiveReader.class.php	(revision 8954)
+++ ../../../skeleton/lang/archive/ArchiveReader.class.php	(working copy)
@@ -83,7 +83,7 @@
      * @param   string id
      * @return  &string content
      */
-    public function &extract($id) {
+    public function extract($id) {
       if (!$this->contains($id)) {
         return FALSE;
       }
@@ -107,7 +107,7 @@
      * @param   string id
      * @return  &io.Stream
      */
-    public function &getStream($id) {
+    public function getStream($id) {
       if (!$this->contains($id)) {
         return FALSE;
       }
@@ -122,8 +122,8 @@
       // Load the class only at runtime to keep hardcoded dependencies to
       // external (ie. != "lang.") classes at a minimum to not affect
       // core startup time.
-      $class= &XPClass::forName('io.EnclosedStream');
-      $s= &$class->newInstance($this->file, $pos, $this->_index[$id][2]);
+      $class= XPClass::forName('io.EnclosedStream');
+      $s= $class->newInstance($this->file, $pos, $this->_index[$id][2]);
       return $s;
     }
     
Index: ../../../skeleton/lang/Throwable.class.php
===================================================================
--- ../../../skeleton/lang/Throwable.class.php	(revision 8954)
+++ ../../../skeleton/lang/Throwable.class.php	(working copy)
@@ -186,7 +186,7 @@
      * @param   &lang.Object cmp
      * @return  bool TRUE if the compared object is equal to this object
      */
-    function equals(&$cmp) {
+    function equals($cmp) {
       return $this === $cmp;
     }
     
@@ -208,7 +208,7 @@
      * @return  &lang.XPClass runtime class
      * @see     xp://lang.XPClass
      */
-    function &getClass() {
+    function getClass() {
       $c= new XPClass($this);
       return $c;
     }
Index: ../../../skeleton/lang/reflect/Routine.class.php
===================================================================
--- ../../../skeleton/lang/reflect/Routine.class.php	(revision 8954)
+++ ../../../skeleton/lang/reflect/Routine.class.php	(working copy)
@@ -33,7 +33,7 @@
      * @param   &mixed ref
      * @param   string name
      */    
-    public function __construct(&$ref, $name) {
+    public function __construct($ref, $name) {
       parent::__construct();
       $this->_ref= is_object($ref) ? get_class($ref) : $ref;
       $this->name= $name;
@@ -105,7 +105,7 @@
      * @param   int pos
      * @return  &lang.reflect.Argument
      */
-    public function &getArgument($pos) {
+    public function getArgument($pos) {
       if (!($details= XPClass::detailsForMethod($this->_ref, $this->name))) return NULL;
       if (!isset($details[DETAIL_ARGUMENTS][$pos])) return NULL;
       return $details[DETAIL_ARGUMENTS][$pos];
@@ -139,6 +139,7 @@
      * @access  public
      * @return  string
      */
+    #[@deprecated]
     public function returnsReference() {
       return $this->_reflect->returnsReference();
     }
@@ -175,7 +176,7 @@
      * @access  public
      * @return  &lang.XPClass
      */
-    public function &getDeclaringClass() {
+    public function getDeclaringClass() {
       $class= $this->_ref;
       while ($details= XPClass::detailsForClass(xp::nameOf($class))) {
         if (isset($details[1][$this->name])) return new XPClass($class);
Index: ../../../skeleton/lang/reflect/Constructor.class.php
===================================================================
--- ../../../skeleton/lang/reflect/Constructor.class.php	(revision 8954)
+++ ../../../skeleton/lang/reflect/Constructor.class.php	(working copy)
@@ -21,7 +21,7 @@
      * @access  public
      * @param   &mixed ref
      */    
-    public function __construct(&$ref) {
+    public function __construct($ref) {
       parent::__construct($ref, '__construct');
     }
     
@@ -42,7 +42,7 @@
      * @param   mixed* args
      * @return  &lang.Object
      */
-    public function &newInstance() {
+    public function newInstance() {
       $paramstr= '';
       $args= func_get_args();
       for ($i= 0, $m= func_num_args(); $i < $m; $i++) {
Index: ../../../skeleton/lang/reflect/InvocationHandler.class.php
===================================================================
--- ../../../skeleton/lang/reflect/InvocationHandler.class.php	(revision 8954)
+++ ../../../skeleton/lang/reflect/InvocationHandler.class.php	(working copy)
@@ -28,7 +28,7 @@
      * @param   mixed* args an array of arguments
      * @return  mixed
      */
-    public function invoke(&$proxy, $method, $args);
+    public function invoke($proxy, $method, $args);
   
   }
 ?>
Index: ../../../skeleton/lang/reflect/Method.class.php
===================================================================
--- ../../../skeleton/lang/reflect/Method.class.php	(revision 8954)
+++ ../../../skeleton/lang/reflect/Method.class.php	(working copy)
@@ -49,7 +49,7 @@
      * @return  &mixed
      * @throws  lang.IllegalArgumentException in case the passed object is not an instance of the declaring class
      */
-    public function &invoke(&$obj, $args= array()) {
+    public function invoke($obj, $args= array()) {
       if (NULL !== $obj) {
         if (!is(xp::nameOf($this->_ref), $obj)) {
           throw(new IllegalArgumentException(sprintf(
Index: ../../../skeleton/lang/reflect/Proxy.class.php
===================================================================
--- ../../../skeleton/lang/reflect/Proxy.class.php	(revision 8954)
+++ ../../../skeleton/lang/reflect/Proxy.class.php	(working copy)
@@ -25,9 +25,9 @@
      * @access  protected
      * @param   &lang.reflect.InvocationHandler handler
      */
-    public function __construct(&$handler) {
+    public function __construct($handler) {
       parent::__construct();
-      $this->_h= &$handler;
+      $this->_h= $handler;
     }
     
     /**
@@ -43,7 +43,7 @@
      * @return  &lang.XPClass
      * @throws  lang.IllegalArgumentException
      */
-    public static function &getProxyClass(&$classloader, $interfaces) {
+    public static function getProxyClass($classloader, $interfaces) {
       static $num= 0;
       static $cache= array();
       
@@ -65,7 +65,7 @@
       $bytes= substr($bytes, 0, -2)." {\n";
 
       for ($j= 0, $t= sizeof($interfaces); $j < $t; $j++) {
-        $if= &$interfaces[$j];
+        $if= $interfaces[$j];
         
         // Verify that the Class object actually represents an interface
         if (!$if->isInterface()) {
@@ -98,7 +98,7 @@
 
             // Create method
             $bytes.= (
-              'function '.($methods[$i]->returnsReference() ? '&' : '').$methods[$i]->getName().'($_'.implode('= NULL, $_', range(0, $max)).'= NULL) { '.
+              'function '.$methods[$i]->getName().'($_'.implode('= NULL, $_', range(0, $max)).'= NULL) { '.
               'switch (func_num_args()) {'.implode("\n", $cases).
               ' default: throw new IllegalArgumentException(\'Illegal number of arguments\'); }'.
               '}'."\n"
@@ -106,7 +106,7 @@
           } else {
             $signature= $args= '';
             foreach ($methods[$i]->getArguments() as $argument) {
-              $signature.= ', '.($argument->isPassedByReference() ? '&' : '').'$'.$argument->getName();
+              $signature.= ', $'.$argument->getName();
               $args.= ', $'.$argument->getName();
               $argument->isOptional() && $signature.= '= '.$argument->getDefault();
             }
@@ -115,7 +115,7 @@
 
             // Create method
             $bytes.= (
-              'function '.($methods[$i]->returnsReference() ? '&' : '').$methods[$i]->getName().'('.$signature.') { '.
+              'function '.$methods[$i]->getName().'('.$signature.') { '.
               'return $this->_h->invoke($this, \''.$methods[$i]->getName(TRUE).'\', array('.$args.')); '.
               '}'."\n"
             );
@@ -126,13 +126,13 @@
 
       // Define the generated class
       try {
-        $class= &$classloader->defineClass($name, $bytes);
+        $class= $classloader->defineClass($name, $bytes);
       } catch (FormatException $e) {
         throw(new IllegalArgumentException($e->getMessage()));
       }
 
       // Update cache and return XPClass object
-      $cache[$key]= &$class;
+      $cache[$key]= $class;
       return $class;
     }
   
@@ -149,10 +149,10 @@
      * @return  &lang.XPClass
      * @throws  lang.IllegalArgumentException
      */
-    public static function &newProxyInstance(&$classloader, $interfaces, &$handler) {
-      if (!($class= &Proxy::getProxyClass($classloader, $interfaces))) return $class;
-      $instance= &$class->newInstance($dummy= NULL);
-      $instance->_h= &$handler;
+    public static function newProxyInstance($classloader, $interfaces, $handler) {
+      if (!($class= Proxy::getProxyClass($classloader, $interfaces))) return $class;
+      $instance= $class->newInstance($dummy= NULL);
+      $instance->_h= $handler;
       return $instance;
     }
   }
Index: ../../../skeleton/lang/reflect/Argument.class.php
===================================================================
--- ../../../skeleton/lang/reflect/Argument.class.php	(revision 8954)
+++ ../../../skeleton/lang/reflect/Argument.class.php	(working copy)
@@ -59,6 +59,7 @@
      * @access  public
      * @return  string
      */
+    #[@deprecated]
     public function isPassedByReference() {
       return '&' == $this->type{0};
     }
Index: ../../../skeleton/lang/reflect/Field.class.php
===================================================================
--- ../../../skeleton/lang/reflect/Field.class.php	(revision 8954)
+++ ../../../skeleton/lang/reflect/Field.class.php	(working copy)
@@ -24,7 +24,7 @@
      * @param   string name
      * @param   string type default NULL
      */    
-    public function __construct(&$ref, $name, $type= NULL) {
+    public function __construct($ref, $name, $type= NULL) {
       $this->_ref= is_object($ref) ? get_class($ref) : $ref;
       $this->name= $name;
       $this->type= $type;
@@ -61,7 +61,7 @@
      * @access  public
      * @return  &lang.XPClass
      */
-    public function &getDeclaringClass() {
+    public function getDeclaringClass() {
       $class= $this->_ref;
       while ($details= XPClass::detailsForClass(xp::nameOf($class))) {
         if (isset($details[0][$this->name])) return new XPClass($class);
@@ -79,7 +79,7 @@
      * @return  &mixed  
      * @throws  lang.IllegalArgumentException in case the passed object is not an instance of the declaring class
      */
-    public function &get(&$instance) {
+    public function get($instance) {
       if (!is(xp::nameOf($this->_ref), $instance)) {
         throw(new IllegalArgumentException(sprintf(
           'Passed argument is not a %s class (%s)',
Index: ../../../skeleton/lang/Collection.class.php
===================================================================
--- ../../../skeleton/lang/Collection.class.php	(revision 8954)
+++ ../../../skeleton/lang/Collection.class.php	(working copy)
@@ -49,7 +49,7 @@
      * @return  &lang.Collection
      * @throws  lang.ClassNotFoundException
      */
-    public static function &forClass($class) {
+    public static function forClass($class) {
       if (!class_exists(xp::reflect($class))) {
         throw(new ClassNotFoundException('Class "'.$class.'" does not exist'));
       }
@@ -83,7 +83,7 @@
      * @access  public
      * @return  &lang.XPClass
      */
-    public function &getElementClass() {
+    public function getElementClass() {
       return XPClass::forName($this->class);
     }
     
@@ -105,7 +105,7 @@
      * @return  &lang.Object the added element
      * @throws  lang.IllegalArgumentException
      */
-    public function &add(&$element) {
+    public function add($element) {
       if (!is($this->_name, $element)) {
         throw(new IllegalArgumentException(sprintf(
           'Element is not a %s (but %s)',
@@ -113,7 +113,7 @@
           xp::typeOf($element)
         )));
       }
-      $this->list[]= &$element;
+      $this->list[]= $element;
       return $element;
     }
 
@@ -125,7 +125,7 @@
      * @return  &lang.Object the prepended element
      * @throws  lang.IllegalArgumentException
      */
-    public function &prepend(&$element) {
+    public function prepend($element) {
       if (!is($this->_name, $element)) {
         throw(new IllegalArgumentException(sprintf(
           'Element is not a %s (but %s)',
@@ -156,7 +156,7 @@
             xp::typeOf($array[$i])
           )));
         }
-        $this->list[]= &$array[$i];
+        $this->list[]= $array[$i];
       }
     }
 
@@ -192,9 +192,9 @@
      * @param   &lang.Object element
      * @return  &lang.Object the element previously at the specified position.
      */
-    public function &set($index, &$element) {
-      $orig= &$this->list[$index];
-      $this->list[$index]= &$element;
+    public function set($index, $element) {
+      $orig= $this->list[$index];
+      $this->list[$index]= $element;
       return $orig;
     }
         
@@ -205,7 +205,7 @@
      * @param   int index
      * @return  &lang.Object
      */
-    public function &get($index) {
+    public function get($index) {
       return $this->list[$index];
     }
     
@@ -218,8 +218,8 @@
      * @param   int index
      * @return  &lang.Object the element that was removed from the list
      */
-    public function &remove($index) {
-      $element= &$this->list[$index];
+    public function remove($index) {
+      $element= $this->list[$index];
       unset($this->list[$index]);
       $this->list= array_values($this->list);
       return $element;
@@ -252,7 +252,7 @@
      * @param   &lang.Object element
      * @return  bool
      */
-    public function contains(&$element) {
+    public function contains($element) {
       for ($i= 0, $s= sizeof($this->list); $i < $s; $i++) {
         if ($this->list[$i]->equals($element)) return TRUE;
       }
@@ -266,7 +266,7 @@
      * @param   &lang.Object element
      * @return  int offset where the element was found or FALSE
      */
-    public function indexOf(&$element) {
+    public function indexOf($element) {
     
       // Note: array_search() does NOT work for objects:
       //
@@ -289,7 +289,7 @@
      * @param   &lang.Object element
      * @return  int offset where the element was found or FALSE
      */
-    public function lastIndexOf(&$element) {
+    public function lastIndexOf($element) {
       for ($i= sizeof($this->list)- 1; $i > -1; $i--) {
         if ($this->list[$i]->equals($element)) return $i;
       }
@@ -317,7 +317,7 @@
      * @param   &lang.Object collection
      * @return  bool
      */
-    public function equals(&$collection) {
+    public function equals($collection) {
       if (
         !is('Collection', $collection) || 
         $this->size != $collection->size
Index: ../../../skeleton/lang/ClassLoader.class.php
===================================================================
--- ../../../skeleton/lang/ClassLoader.class.php	(revision 8954)
+++ ../../../skeleton/lang/ClassLoader.class.php	(working copy)
@@ -62,7 +62,7 @@
      * @access  public
      * @return  &lang.ClassLoader
      */
-    public static function &getDefault() {
+    public static function getDefault() {
       static $instance= NULL;
       
       if (!$instance) $instance= new ClassLoader();
@@ -95,7 +95,7 @@
      * @return  &lang.XPClass
      * @throws  lang.ClassNotFoundException in case the class can not be found
      */
-    public function &loadClass($class) {
+    public function loadClass($class) {
       $name= xp::reflect($class);
 
       if (!class_exists($name) && !interface_exists($name)) {
@@ -120,7 +120,7 @@
      * @return  &lang.XPClass
      * @throws  lang.FormatException in case the class cannot be defined
      */
-    public function &_defineClassFromBytes($class, $bytes) {
+    public function _defineClassFromBytes($class, $bytes) {
       $name= xp::reflect($class);
 
       if (!class_exists($name) && !interface_exists($name)) {
@@ -151,7 +151,7 @@
      * @throws  lang.FormatException in case the class cannot be defined
      * @throws  lang.ClassNotFoundException if given parent class does not exist
      */
-    public function &defineClass($class, $parent, $interfaces= NULL, $bytes= NULL) {
+    public function defineClass($class, $parent, $interfaces= NULL, $bytes= NULL) {
       
       // If invoked with less than four arguments, old behaviour will be executed
       if (NULL === $bytes) {
@@ -220,7 +220,7 @@
      * @return  &io.File
      * @throws  lang.ElementNotFoundException in case the resource cannot be found
      */
-    public function &getResourceAsStream($filename) {
+    public function getResourceAsStream($filename) {
       foreach (array_unique(explode(PATH_SEPARATOR, ini_get('include_path'))) as $dir) {
         if (!file_exists($dir.DIRECTORY_SEPARATOR.$filename)) continue;
         return new File($filename);
Index: ../../../skeleton/lang/StackTraceElement.class.php
===================================================================
--- ../../../skeleton/lang/StackTraceElement.class.php	(revision 8954)
+++ ../../../skeleton/lang/StackTraceElement.class.php	(working copy)
@@ -94,7 +94,7 @@
      * @param   &lang.Object cmp
      * @return  bool
      */
-    public function equals(&$cmp) {
+    public function equals($cmp) {
       return is('lang.StackTraceElement', $cmp) && $this->toString() == $cmp->toString();
     }
   }
Index: ../../../skeleton/lang/Object.class.php
===================================================================
--- ../../../skeleton/lang/Object.class.php	(revision 8954)
+++ ../../../skeleton/lang/Object.class.php	(working copy)
@@ -51,7 +51,7 @@
      * @param   &lang.Object cmp
      * @return  bool TRUE if the compared object is equal to this object
      */
-    public function equals(&$cmp) {
+    public function equals($cmp) {
       return $this === $cmp;
     }
     
@@ -73,7 +73,7 @@
      * @return  &lang.XPClass runtime class
      * @see     xp://lang.XPClass
      */
-    public function &getClass() {
+    public function getClass() {
       $c= new XPClass($this);
       return $c;
     }
Index: ../../../skeleton/lang/types/Number.class.php
===================================================================
--- ../../../skeleton/lang/types/Number.class.php	(revision 8954)
+++ ../../../skeleton/lang/types/Number.class.php	(working copy)
@@ -63,7 +63,7 @@
      * @param   &lang.Object cmp
      * @return  bool TRUE if the compared object is equal to this object
      */
-    public function equals(&$cmp) {
+    public function equals($cmp) {
       return is(get_class($this), $cmp) && $this->value === $cmp->value;
     }
   }
Index: ../../../skeleton/lang/types/ArrayList.class.php
===================================================================
--- ../../../skeleton/lang/types/ArrayList.class.php	(revision 8954)
+++ ../../../skeleton/lang/types/ArrayList.class.php	(working copy)
@@ -61,7 +61,7 @@
      * @param   &lang.Object cmp
      * @return  bool
      */
-    public function equals(&$cmp) {
+    public function equals($cmp) {
       return is('ArrayList', $cmp) && $this->arrayequals($this->values, $cmp->values);
     }
     
Index: ../../../skeleton/lang/Generic.class.php
===================================================================
--- ../../../skeleton/lang/Generic.class.php	(revision 8954)
+++ ../../../skeleton/lang/Generic.class.php	(working copy)
@@ -27,7 +27,7 @@
      * @param   &lang.Object cmp
      * @return  bool TRUE if the compared object is equal to this object
      */
-    public function equals(&$cmp);
+    public function equals($cmp);
     
     /** 
      * Returns the fully qualified class name for this class 
@@ -45,7 +45,7 @@
      * @return  &lang.XPClass runtime class
      * @see     xp://lang.XPClass
      */
-    public function &getClass();
+    public function getClass();
 
     /**
      * Creates a string representation of this object. In general, the toString 
Index: ../../../skeleton/lang/XPClass.class.php
===================================================================
--- ../../../skeleton/lang/XPClass.class.php	(revision 8954)
+++ ../../../skeleton/lang/XPClass.class.php	(working copy)
@@ -59,9 +59,9 @@
      * @access  public
      * @param   &mixed ref either a class name or an object
      */
-    public function __construct(&$ref) {
+    public function __construct($ref) {
       parent::__construct();
-      $this->_objref= &$ref;
+      $this->_objref= $ref;
       $this->name= xp::nameOf(is_object($ref) ? get_class($ref) : $ref);
       $this->_reflect= new ReflectionClass($ref);
     }
@@ -83,7 +83,7 @@
      * @param   &lang.Object cmp
      * @return  bool
      */
-    public function equals(&$cmp) {
+    public function equals($cmp) {
       return (is('XPClass', $cmp) 
         ? 0 == strcmp($this->getName(), $cmp->getName())
         : FALSE
@@ -138,7 +138,7 @@
      * @param   mixed* args
      * @return  &lang.Object 
      */
-    public function &newInstance() {
+    public function newInstance() {
       $args= func_get_args();
       return $this->_reflect->newInstanceArgs($args);
     }
@@ -189,7 +189,7 @@
      * @return  &lang.Method
      * @see     xp://lang.reflect.Method
      */
-    public function &getMethod($name) {
+    public function getMethod($name) {
       if (!$this->hasMethod($name)) return NULL;
 
       $m= new Method($this->_objref, $name); 
@@ -229,7 +229,7 @@
      * @return  &lang.reflect.Constructor
      * @see     xp://lang.reflect.Constructor
      */
-    public function &getConstructor() {
+    public function getConstructor() {
       if ($this->hasConstructor()) {
         return new Constructor($this->_objref); 
       }
@@ -262,7 +262,7 @@
      * @param   string name
      * @return  &lang.reflect.Field
      */
-    public function &getField($name) {
+    public function getField($name) {
       if (!$this->hasField($name)) return NULL;
 
       $v= (is_object($this->_objref) 
@@ -293,7 +293,7 @@
      * @access  public
      * @return  &lang.XPClass class object
      */
-    public function &getParentclass() {
+    public function getParentclass() {
       $parent= $this->_reflect->getParentClass();
       if (!$parent) return NULL;
       return new XPClass($parent->getName());
@@ -329,7 +329,7 @@
      * @param   &lang.Object obj
      * @return  bool
      */
-    public function isInstance(&$obj) {
+    public function isInstance($obj) {
       return is($this->name, $obj);
     }
     
@@ -428,7 +428,7 @@
      * @access  public
      * @return  &lang.ClassLoader
      */
-    public function &getClassLoader() {
+    public function getClassLoader() {
       return XPClass::_classLoaderFor($this->name);
     }
     
@@ -440,8 +440,8 @@
      * @param   string name fqcn of class
      * @return  &lang.ClassLoader
      */
-    public static function &_classLoaderFor($name) {
-      if (!($cl= &xp::registry('classloader.'.$name))) {
+    public static function _classLoaderFor($name) {
+      if (!($cl= xp::registry('classloader.'.$name))) {
         return ClassLoader::getDefault();
       }
 
@@ -450,11 +450,11 @@
       // instance through the instanceFor() method.
       if (is_string($cl)) {
         list($className, $argument)= sscanf($cl, '%[^:]://%s');
-        $class= &XPClass::forName($className);
-        $method= &$class->getMethod('instanceFor');
+        $class= XPClass::forName($className);
+        $method= $class->getMethod('instanceFor');
 
         $dummy= NULL;
-        $cl= &$method->invoke($dummy, array($argument));
+        $cl= $method->invoke($dummy, array($argument));
         
         // Replace the "symbolic" representation of the classloader with a reference
         // to an instance.
@@ -480,7 +480,7 @@
       if (isset($details[$class])) return $details[$class];
 
       // Retrieve class' sourcecode
-      $cl= &XPClass::_classLoaderFor($class);
+      $cl= XPClass::_classLoaderFor($class);
       if (!($bytes= $cl->loadClassBytes($class))) return NULL;
 
       $details[$class]= array(array(), array());
@@ -644,7 +644,7 @@
      * @return  &lang.XPClass class object
      * @throws  lang.ClassNotFoundException when there is no such class
      */
-    public static function &forName($name, $classloader= NULL) {
+    public static function forName($name, $classloader= NULL) {
       if (NULL === $classloader) {
         $fname= strtr('.', '/', $name).'.class.php';
 
@@ -654,9 +654,9 @@
           }
           
           if (is_file($path)) {
-            $cl= &ArchiveClassLoader::instanceFor($path);
+            $cl= ArchiveClassLoader::instanceFor($path);
             if ($cl->providesClass($name)) {
-              $classloader= &$cl;
+              $classloader= $cl;
               break;
             }
           }
@@ -664,7 +664,7 @@
       }
     
       // Last-chance fallback
-      if (NULL === $classloader) $classloader= &ClassLoader::getDefault();
+      if (NULL === $classloader) $classloader= ClassLoader::getDefault();
 
       return $classloader->loadClass($name);
     }
@@ -677,7 +677,7 @@
      * @access  public
      * @return  &lang.XPClass[] class objects
      */
-    public static function &getClasses() {
+    public static function getClasses() {
       $ret= array();
       foreach (get_declared_classes() as $name) {
         if (xp::registry('class.'.$name)) $ret[]= new XPClass($name);
Index: ../../../skeleton/lang/Process.class.php
===================================================================
--- ../../../skeleton/lang/Process.class.php	(revision 8954)
+++ ../../../skeleton/lang/Process.class.php	(working copy)
@@ -68,7 +68,7 @@
      * @access  public
      * @return  &io.File STDERR
      */
-    public function &getErrorStream() {
+    public function getErrorStream() {
       return $this->err;
     }
 
@@ -78,7 +78,7 @@
      * @access  public
      * @return  &io.File STDIN
      */
-    public function &getInputStream() {
+    public function getInputStream() {
       return $this->in;
     }
     
@@ -88,7 +88,7 @@
      * @access  public
      * @return  &io.File STDOUT
      */
-    public function &getOutputStream() {
+    public function getOutputStream() {
       return $this->out;
     }
     
Index: ../../../skeleton/webservices/soap/SOAPHeaderElement.class.php
===================================================================
--- ../../../skeleton/webservices/soap/SOAPHeaderElement.class.php	(revision 8952)
+++ ../../../skeleton/webservices/soap/SOAPHeaderElement.class.php	(working copy)
@@ -31,7 +31,7 @@
      * @param   &array ns current namespaces from SOAP message
      * @return  &webservices.soap.SOAPHeaderElement
      */
-    public static function &fromNode(&$node, $ns, $encoding) {
+    public static function fromNode($node, $ns, $encoding) {
       $header= new SOAPHeaderElement();
       $header->name= $node->getName();
       $header->mustUnderstand= (bool)$node->getAttribute($ns[XMLNS_SOAPENV].':mustUnderstand');
@@ -50,7 +50,7 @@
      * @param   &array ns list of namespaces
      * @return  &xml.Node
      */
-    public function &getNode($ns) {
+    public function getNode($ns) {
       $attr= array();
       if ($this->mustUnderstand) $attr[$ns[XMLNS_SOAPENV].':mustUnderstand']= 1;
       if ($this->actor) $attr[$ns[XMLNS_SOAPENV].':actor']= $this->actor;
@@ -145,8 +145,8 @@
      * @access  public
      * @param   &lang.Object value
      */
-    public function setValue(&$value) {
-      $this->value= &$value;
+    public function setValue($value) {
+      $this->value= $value;
     }
 
     /**
@@ -155,7 +155,7 @@
      * @access  public
      * @return  &lang.Object
      */
-    public function &getValue() {
+    public function getValue() {
       return $this->value;
     }
 
Index: ../../../skeleton/webservices/soap/interop/Round2BaseClient.class.php
===================================================================
--- ../../../skeleton/webservices/soap/interop/Round2BaseClient.class.php	(revision 8952)
+++ ../../../skeleton/webservices/soap/interop/Round2BaseClient.class.php	(working copy)
@@ -25,8 +25,8 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setInputOutputTrace(&$cat) {
-      $this->_iotrace= &$cat;
+    public function setInputOutputTrace($cat) {
+      $this->_iotrace= $cat;
     }
 
     /**
@@ -39,17 +39,17 @@
      * @return  boolean
      * @throws  webservices.soap.SOAPFaultException
      */
-    public function identity($method, &$argument) {
+    public function identity($method, $argument) {
       try {
-        $result= &$this->invoke($method, $argument);
+        $result= $this->invoke($method, $argument);
       } catch (SOAPFaultException $e) {
         throw($e);
       }
       
       if (is('webservices.soap.Parameter', $argument)) 
-        $cmp= &$argument->value;
+        $cmp= $argument->value;
       else 
-        $cmp= &$argument;
+        $cmp= $argument;
       
       if ($this->_iotrace) {
         $this->_iotrace->info('Method', $method, 'called with:', xp::typeOf($cmp), $cmp, var_export($cmp, 1));
Index: ../../../skeleton/webservices/soap/SOAPMessage.class.php
===================================================================
--- ../../../skeleton/webservices/soap/SOAPMessage.class.php	(revision 8952)
+++ ../../../skeleton/webservices/soap/SOAPMessage.class.php	(working copy)
@@ -92,13 +92,13 @@
       ));
       
       if (!empty($headers)) {
-        $header= &$this->root->addChild(new Node('SOAP-ENV:Header'));
+        $header= $this->root->addChild(new Node('SOAP-ENV:Header'));
         for ($i= 0, $s= sizeof($headers); $i < $s; $i++) {
           $header->addChild($headers[$i]->getNode($this->namespaces));
         }
       }
       
-      $this->body= &$this->root->addChild(new Node('SOAP-ENV:Body'));
+      $this->body= $this->root->addChild(new Node('SOAP-ENV:Body'));
       $this->body->addChild(new Node($this->namespace.':'.$this->method));
     }
     
@@ -127,13 +127,13 @@
       $this->root= new Node('SOAP-ENV:Envelope', NULL, $ns);
       
       if (!empty($headers)) {
-        $header= &$this->root->addChild(new Node('SOAP-ENV:Header'));
+        $header= $this->root->addChild(new Node('SOAP-ENV:Header'));
         for ($i= 0, $s= sizeof($headers); $i < $s; $i++) {
           $header->addChild($headers[$i]->getNode($this->namespaces));
         }
       }
       
-      $this->body= &$this->root->addChild(new Node('SOAP-ENV:Body'));
+      $this->body= $this->root->addChild(new Node('SOAP-ENV:Body'));
       $this->body->addChild(new Node($this->namespace.':'.$this->method));
       $this->mapping= new SOAPMapping();
     }
@@ -144,8 +144,8 @@
      * @access  public
      * @param   &webservices.soap.SOAPMapping mapping
      */
-    public function setMapping(&$mapping) {
-      $this->mapping= &$mapping;
+    public function setMapping($mapping) {
+      $this->mapping= $mapping;
     }
     
     /**
@@ -155,7 +155,7 @@
      * @param   array arr
      */
     public function setData($arr) {
-      $node= &SOAPNode::fromArray($arr, 'item', $this->mapping);
+      $node= SOAPNode::fromArray($arr, 'item', $this->mapping);
       $node->namespace= $this->namespace;
       if (empty($node->children)) return;
       
@@ -182,7 +182,7 @@
      * @param   &webservices.soap.SOAPMapping mapping
      * @return  &mixed result
      */
-    public function &unmarshall(&$child, $context= NULL) {
+    public function unmarshall($child, $context= NULL) {
       // DEBUG Console::writeLine('Unmarshalling ', $child->name, ' (', var_export($child->attribute, 1), ') >>> ', $child->content, '<<<', "\n"); // DEBUG
       if (
         isset($child->attribute[$this->namespaces[XMLNS_XSI].':null']) or       // Java
@@ -193,7 +193,7 @@
 
       // References
       if (isset($child->attribute['href'])) {
-        $body= &$this->_bodyElement();
+        $body= $this->_bodyElement();
         foreach (array_keys($body->children) as $idx) {
           if (0 != strcasecmp(
             @$body->children[$idx]->attribute['id'],
@@ -251,10 +251,10 @@
             // <item SOAP-ENC:arrayType="xsd:int[4]"/>
             if ('xp' == $ns) {
               try {
-                $c= &XPClass::forName($childType);
-                $c && $result= &Collection::forClass($c->getName());
+                $c= XPClass::forName($childType);
+                $c && $result= Collection::forClass($c->getName());
               } catch (ClassNotFoundException $e) {
-                $result= &Collection::forClass('lang.Object');
+                $result= Collection::forClass('lang.Object');
                 $result->__qname= $childType;
               }
               
@@ -315,7 +315,7 @@
             // For other objects, check SOAPMapping registry
             if ('xp' == $regs[1]) {
               try {
-                $xpclass= &XPClass::forName($regs[2]);
+                $xpclass= XPClass::forName($regs[2]);
               } catch (ClassNotFoundException $e) {
                 $xpclass= NULL;
               }
@@ -325,14 +325,14 @@
               // SOAPTransport::retrieve() function which currently doesn't
               // care about mapping and $mapping is just an empty array.
               if ($this->mapping) {
-                $xpclass= &$this->mapping->classFor(new QName(array_search($regs[1], $this->namespaces), $regs[2]));
+                $xpclass= $this->mapping->classFor(new QName(array_search($regs[1], $this->namespaces), $regs[2]));
               } else {
                 $xpclass= NULL;
               }
             }
             
             if ($xpclass) {
-              $result= &$xpclass->newInstance();
+              $result= $xpclass->newInstance();
             } else {
               $result= new Object();
               $result->__qname= $regs[2];
@@ -359,7 +359,7 @@
      * @param   array mapping
      * @return  &mixed data
      */    
-    public function &_recurseData(&$node, $names= FALSE, $context= NULL) {
+    public function _recurseData($node, $names= FALSE, $context= NULL) {
       if (empty($node->children)) {
         $a= array();
         return $a;
@@ -390,7 +390,7 @@
      * @param   mixed detail default NULL
      */    
     public function setFault($faultcode, $faultstring, $faultactor= NULL, $detail= NULL) {
-      $this->root->children[0]->children[0]= &SOAPNode::fromObject(new SOAPFault(
+      $this->root->children[0]->children[0]= SOAPNode::fromObject(new SOAPFault(
         $faultcode,
         $faultstring,
         $faultactor,
@@ -411,7 +411,7 @@
      * @param   string string
      * @return  &xml.Tree
      */
-    public static function &fromString($string) {
+    public static function fromString($string) {
       return parent::fromString($string, 'SOAPMessage');
     }
 
@@ -427,7 +427,7 @@
      * @param   &io.File file
      * @return  &xml.Tree
      */ 
-    public static function &fromFile(&$file) {
+    public static function fromFile($file) {
       return parent::fromFile($file, 'SOAPMessage');
     }
     
@@ -440,7 +440,7 @@
      * @access  protected
      * @param   &xml.SOAPNode node
      */
-    public function _retrieveNamespaces(&$node) {
+    public function _retrieveNamespaces($node) {
       foreach ($node->attribute as $key => $val) {
         if (0 != strncmp('xmlns:', $key, 6)) continue;
         $this->namespaces[$val]= substr($key, 6);
@@ -454,7 +454,7 @@
      * @access  protected
      * @return  &xml.SOAPNode
      */
-    public function &_headerElement() {
+    public function _headerElement() {
       
       // The header element must - if it exists - be the first child
       // of the SOAP envelope.
@@ -475,7 +475,7 @@
      * @return  &xml.SOAPNode
      * @throws  lang.FormatException in case the body element could not be found
      */    
-    public function &_bodyElement() {
+    public function _bodyElement() {
 
       // Look for namespaces in the root node
       $this->_retrieveNamespaces($this->root);
@@ -499,8 +499,8 @@
      * @access  public
      * @return  &webservices.soap.SOAPFault or NULL if none exists
      */
-    public function &getFault() {
-      if ($body= &$this->_bodyElement()) {
+    public function getFault() {
+      if ($body= $this->_bodyElement()) {
         if (0 != strcasecmp(
           $body->children[0]->getName(), 
           $this->namespaces[XMLNS_SOAPENV].':Fault'
@@ -526,8 +526,8 @@
      * @return  &mixed data
      * @throws  lang.FormatException in case no XMLNS_SOAPENV:Body was found
      */
-    public function &getData($context= 'ENUM') {
-      if ($body= &$this->_bodyElement()) {
+    public function getData($context= 'ENUM') {
+      if ($body= $this->_bodyElement()) {
         if ($body->children[0]->getName() == $this->namespaces[XMLNS_SOAPENV].':Fault') {
           $n= NULL; return $n;
         }
@@ -553,12 +553,12 @@
      * @return  webservices.soap.SOAPHeaderElement[]
      */
     public function getHeaders() {
-      if (!($h= &$this->_headerElement())) return NULL;
+      if (!($h= $this->_headerElement())) return NULL;
       
       // Go through all children
       $headers= array();
       foreach (array_keys($h->children) as $idx) {
-        $headers[]= &SOAPHeaderElement::fromNode(
+        $headers[]= SOAPHeaderElement::fromNode(
           $h->children[$idx], 
           $this->namespaces,
           $this->encoding
Index: ../../../skeleton/webservices/soap/SOAPNode.class.php
===================================================================
--- ../../../skeleton/webservices/soap/SOAPNode.class.php	(revision 8952)
+++ ../../../skeleton/webservices/soap/SOAPNode.class.php	(working copy)
@@ -28,7 +28,7 @@
      * @param   &mixed content
      * @return  string typename, e.g. "xsd:string"
      */
-    public function _typeName(&$content) {
+    public function _typeName($content) {
       static $tmap= array(      // Mapping PHP-typename => SOAP-typename
         'double'        => 'float',
         'integer'       => 'int'
@@ -46,7 +46,7 @@
      * @param   &mixed content
      * @return  &mixed content, formatted, if necessary
      */
-    public function &_contentFormat(&$content) {
+    public function _contentFormat($content) {
       if (is_bool($content)) {
         return $content ? 'true' : 'false';
       }
@@ -61,7 +61,7 @@
      * @param   &mixed namespaces
      * @return  &mixed data
      */
-    public function &getContent($encoding, &$namespaces) {
+    public function getContent($encoding, $namespaces) {
       $ret= $this->content;
       @list($ns, $t)= explode(':', @$this->attribute[$namespaces[XMLNS_XSI].':type']);
       
@@ -122,7 +122,7 @@
      * @param   mixed value
      * @param   &webservices.soap.SOAPMapping mapping
      */
-    public function _marshall(&$child, $value, &$mapping) {
+    public function _marshall($child, $value, $mapping) {
       static $ns= 0;
       
       if (is_scalar($value)) {          // Scalar
@@ -174,7 +174,7 @@
         // A node
         if (isset($value->item)) {
           $child->attribute= $value->item->attribute;
-          $child->children= &array_merge($child->children, $value->item->children);
+          $child->children= array_merge($child->children, $value->item->children);
         }
         return;
       }
@@ -222,7 +222,7 @@
      * @param   array a
      * @param   &webservices.soap.SOAPMapping mapping
      */
-    public function _recurse(&$e, $a, &$mapping) {
+    public function _recurse($e, $a, $mapping) {
       foreach (array_keys($a) as $field) {
         if ('_' == $field{0}) continue;
         $this->_marshall(
@@ -248,7 +248,7 @@
      * @param   &webservices.soap.SOAPMapping mapping
      * @return  &xml.Node
      */
-    public static function &fromArray($arr, $name= 'array', $mapping) {
+    public static function fromArray($arr, $name= 'array', $mapping) {
       $n= new SOAPNode($name);
       $n->_recurse($n, $arr, $mapping);
       return $n;  
@@ -270,7 +270,7 @@
      * @param   &webservices.soap.SOAPMapping mapping
      * @return  &xml.Node
      */
-    public static function &fromObject($obj, $name= NULL, $mapping) {
+    public static function fromObject($obj, $name= NULL, $mapping) {
       return SOAPNode::fromArray(
         get_object_vars($obj), 
         (NULL === $name) ? get_class($obj) : $name,
Index: ../../../skeleton/webservices/soap/rpc/SoapRpcRouter.class.php
===================================================================
--- ../../../skeleton/webservices/soap/rpc/SoapRpcRouter.class.php	(revision 8952)
+++ ../../../skeleton/webservices/soap/rpc/SoapRpcRouter.class.php	(working copy)
@@ -65,7 +65,7 @@
      * @access  protected
      * @return  &webservices.soap.rpc.SoapRpcRequest
      */
-    public function &_request() {
+    public function _request() {
       return new SoapRpcRequest();
     }
 
@@ -75,7 +75,7 @@
      * @access  protected
      * @return  &webservices.soap.rpc.SoapRpcResponse
      */
-    public function &_response() {
+    public function _response() {
       return new SoapRpcResponse();
     }
     
@@ -85,7 +85,7 @@
      * @access  protected
      * @return  &webservices.soap.SOAPMessage
      */
-    public function &_message() {
+    public function _message() {
       return new SOAPMessage();
     }    
 
@@ -98,13 +98,13 @@
      * @throws  lang.IllegalArgumentException if there is no such method
      * @throws  lang.IllegalAccessException for non-public methods
      */
-    public function &callReflectHandler(&$msg) {
+    public function callReflectHandler($msg) {
       try {
-        $r= &parent::callReflectHandler($msg);
+        $r= parent::callReflectHandler($msg);
       } catch (Throwable $e) {
         throw($e);   // catch/rethrow because of PHP4 limitations
       }
-      return array(&$r);
+      return array($r);
     }   
   }
 ?>
Index: ../../../skeleton/webservices/soap/rpc/SoapRpcRequest.class.php
===================================================================
--- ../../../skeleton/webservices/soap/rpc/SoapRpcRequest.class.php	(revision 8952)
+++ ../../../skeleton/webservices/soap/rpc/SoapRpcRequest.class.php	(working copy)
@@ -23,8 +23,8 @@
      * @access  public
      * @return  &webservices.soap.SOAPMessage message object
      */
-    public function &getMessage() {
-      $m= &SOAPMessage::fromString($this->getData());
+    public function getMessage() {
+      $m= SOAPMessage::fromString($this->getData());
       list(
         $class, 
         $method
Index: ../../../skeleton/webservices/soap/types/SOAPVector.class.php
===================================================================
--- ../../../skeleton/webservices/soap/types/SOAPVector.class.php	(revision 8952)
+++ ../../../skeleton/webservices/soap/types/SOAPVector.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @param   array params
      */
     public function __construct($params) {
-      $this->_vector= &$params;
+      $this->_vector= $params;
       $this->item= new SOAPNode('vec', NULL, array(
         'xmlns:vec'   => 'http://xml.apache.org/xml-soap',
         'xsi:type'    => 'vec:Vector'
Index: ../../../skeleton/webservices/soap/types/SOAPBase64Binary.class.php
===================================================================
--- ../../../skeleton/webservices/soap/types/SOAPBase64Binary.class.php	(revision 8952)
+++ ../../../skeleton/webservices/soap/types/SOAPBase64Binary.class.php	(working copy)
@@ -61,7 +61,7 @@
      * @param   &webservices.soap.types.SOAPBase64Binary cmp
      * @return  bool TRUE if both binaries are equal
      */
-    public function equals(&$cmp) {
+    public function equals($cmp) {
       return is('webservices.soap.types.SOAPBase64Binary', $cmp) && (0 === strcmp($this->string, $cmp->string));
     }    
   }
Index: ../../../skeleton/webservices/soap/types/SOAPHexBinary.class.php
===================================================================
--- ../../../skeleton/webservices/soap/types/SOAPHexBinary.class.php	(revision 8952)
+++ ../../../skeleton/webservices/soap/types/SOAPHexBinary.class.php	(working copy)
@@ -61,7 +61,7 @@
      * @param   &webservices.soap.types.SOAPHexBinary cmp
      * @return  bool TRUE if both binaries are equal
      */
-    public function equals(&$cmp) {
+    public function equals($cmp) {
       return is('webservices.soap.types.SOAPHexBinary', $cmp) && (0 === strcmp($this->string, $cmp->string));
     }    
   }
Index: ../../../skeleton/webservices/soap/types/SOAPHashMap.class.php
===================================================================
--- ../../../skeleton/webservices/soap/types/SOAPHashMap.class.php	(revision 8952)
+++ ../../../skeleton/webservices/soap/types/SOAPHashMap.class.php	(working copy)
@@ -26,7 +26,7 @@
         'xsi:type'    => 'hash:Map'
       ));
       foreach ($params as $key => $value) {
-        $item= &$this->item->addChild(new SOAPNode('item'));
+        $item= $this->item->addChild(new SOAPNode('item'));
         $this->item->_recurse($item, array('key' => $key));
         $this->item->_recurse($item, array('value' => $value));
       }
Index: ../../../skeleton/webservices/soap/SOAPHeader.class.php
===================================================================
--- ../../../skeleton/webservices/soap/SOAPHeader.class.php	(revision 8952)
+++ ../../../skeleton/webservices/soap/SOAPHeader.class.php	(working copy)
@@ -20,6 +20,6 @@
      * @param   array<string, string> ns list of namespaces
      * @return  &xml.Node
      */
-    public function &getNode($ns);
+    public function getNode($ns);
   }
 ?>
Index: ../../../skeleton/webservices/soap/SOAPFaultException.class.php
===================================================================
--- ../../../skeleton/webservices/soap/SOAPFaultException.class.php	(revision 8952)
+++ ../../../skeleton/webservices/soap/SOAPFaultException.class.php	(working copy)
@@ -19,9 +19,9 @@
      * @access  public
      * @param   &webservices.soap.SOAPFault fault
      */
-    public function __construct(&$fault) {
+    public function __construct($fault) {
       parent::__construct($fault->faultstring);
-      $this->fault= &$fault;
+      $this->fault= $fault;
     }
 
     /**
@@ -30,7 +30,7 @@
      * @access  public
      * @return  &webservices.soap.SOAPFault
      */
-    public function &getFault() {
+    public function getFault() {
       return $this->fault;
     }
 
Index: ../../../skeleton/webservices/soap/SOAPMapping.class.php
===================================================================
--- ../../../skeleton/webservices/soap/SOAPMapping.class.php	(revision 8952)
+++ ../../../skeleton/webservices/soap/SOAPMapping.class.php	(working copy)
@@ -28,7 +28,7 @@
      * @param   &lang.XPClass class
      * @throws  lang.IllegalArgumentException
      */
-    public function registerMapping(&$qname, &$class) {
+    public function registerMapping($qname, $class) {
       if (!is('xml.QName', $qname)) {
         throw(new IllegalArgumentException(
           'Argument class is not an xml.QName (given: '.xp::typeOf($qname).')'
@@ -41,8 +41,8 @@
         ));
       }
       
-      $this->_classes[$class->getName()]= &$class;
-      $this->_qnames[$qname->toString()]= &$qname;
+      $this->_classes[$class->getName()]= $class;
+      $this->_qnames[$qname->toString()]= $qname;
       $this->_q2c[$qname->toString()]= $class->getName();
       $this->_c2q[$class->getName()]= $qname->toString();
     }
@@ -54,7 +54,7 @@
      * @param   &lang.XPClass class
      * @return  &mixed xml.QName or NULL if no mapping exists
      */
-    public function &qnameFor(&$class) {
+    public function qnameFor($class) {
       if (!is('lang.XPClass', $class) || !isset($this->_c2q[$class->getName()])) return NULL;
       return $this->_qnames[$this->_c2q[$class->getName()]];
     }
@@ -66,7 +66,7 @@
      * @param   &xml.QName qname
      * @return  &mixed lang.XPClass or NULL if no mapping exists
      */
-    public function &classFor(&$qname) {
+    public function classFor($qname) {
       if (!is('xml.QName', $qname) || !isset($this->_q2c[$qname->toString()])) return NULL;
       return $this->_classes[$this->_q2c[$qname->toString()]];
     }
Index: ../../../skeleton/webservices/soap/Parameter.class.php
===================================================================
--- ../../../skeleton/webservices/soap/Parameter.class.php	(revision 8952)
+++ ../../../skeleton/webservices/soap/Parameter.class.php	(working copy)
@@ -23,7 +23,7 @@
      */
     public function __construct($name, $value= NULL) {
       $this->name= $name;
-      $this->value= &$value;
+      $this->value= $value;
     }
 
     /**
Index: ../../../skeleton/webservices/soap/SOAPClient.class.php
===================================================================
--- ../../../skeleton/webservices/soap/SOAPClient.class.php	(revision 8952)
+++ ../../../skeleton/webservices/soap/SOAPClient.class.php	(working copy)
@@ -47,8 +47,8 @@
      * @param   string action Action
      * @param   string targetNamespace default NULL
      */
-    public function __construct(&$transport, $action, $targetNamespace= NULL) {
-      $this->transport= &$transport;
+    public function __construct($transport, $action, $targetNamespace= NULL) {
+      $this->transport= $transport;
       $this->action= $action;
       $this->targetNamespace= $targetNamespace;
       $this->mapping= new SOAPMapping();
@@ -80,7 +80,7 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setTrace(&$cat) {
+    public function setTrace($cat) {
       $this->transport->setTrace($cat);
     }
     
@@ -91,7 +91,7 @@
      * @param   &xml.QName qname
      * @param   &lang.XPClass class
      */
-    public function registerMapping(&$qname, &$class) {
+    public function registerMapping($qname, $class) {
       $this->mapping->registerMapping($qname, $class);
     }
     
@@ -102,8 +102,8 @@
      * @param   &webservices.soap.SOAPHeader header
      * @return  &webservices.soap.SOAPHeader the header added
      */
-    public function &addHeader(&$header) {
-      $this->headers[]= &$header;
+    public function addHeader($header) {
+      $this->headers[]= $header;
       return $header;
     }
     
@@ -131,10 +131,10 @@
       $message->setData($args);
 
       // Send
-      if (FALSE == ($response= &$this->transport->send($message))) return FALSE;
+      if (FALSE == ($response= $this->transport->send($message))) return FALSE;
       
       // Response
-      if (FALSE == ($answer= &$this->transport->retrieve($response))) return FALSE;
+      if (FALSE == ($answer= $this->transport->retrieve($response))) return FALSE;
       
       $answer->setMapping($this->mapping);
       $data= $answer->getData();
Index: ../../../skeleton/webservices/soap/transport/SOAPHTTPTransport.class.php
===================================================================
--- ../../../skeleton/webservices/soap/transport/SOAPHTTPTransport.class.php	(revision 8952)
+++ ../../../skeleton/webservices/soap/transport/SOAPHTTPTransport.class.php	(working copy)
@@ -113,7 +113,7 @@
      * @return  &peer.http.HttpResponse
      * @throws  lang.IllegalArgumentException in case the given parameter is not a webservices.soap.SOAPMessage
      */
-    public function &send(&$message) {
+    public function send($message) {
     
       // Sanity checks
       if (!is('SOAPMessage', $message)) throw(new IllegalArgumentException(
@@ -159,7 +159,7 @@
       $this->_conn->request->addHeaders($this->_headers);
       try {
         $this->cat && $this->cat->debug('>>>', $this->_conn->request->getRequestString());
-        $res= &$this->_conn->request->send($this->_conn->getTimeout());
+        $res= $this->_conn->request->send($this->_conn->getTimeout());
       } catch (IOException $e) {
         throw ($e);
       }
@@ -178,7 +178,7 @@
      * @throws  lang.IllegalAccessException in case authorization is required
      * @throws  lang.IllegalStateException in case an unexpected HTTP status code is returned
      */
-    public function &retrieve(&$response) {
+    public function retrieve($response) {
       $this->cat && $this->cat->debug('<<<', $response->toString());
       
       try {
@@ -195,7 +195,7 @@
             while ($buf= $response->readData()) $xml.= $buf;
 
             $this->cat && $this->cat->debug('<<<', $xml);
-            if ($answer= &SOAPMessage::fromString($xml)) {
+            if ($answer= SOAPMessage::fromString($xml)) {
 
               // Check encoding
               if (NULL !== ($content_type= $response->getHeader('Content-Type'))) {
Index: ../../../skeleton/webservices/soap/transport/SOAPTransport.class.php
===================================================================
--- ../../../skeleton/webservices/soap/transport/SOAPTransport.class.php	(revision 8952)
+++ ../../../skeleton/webservices/soap/transport/SOAPTransport.class.php	(working copy)
@@ -20,8 +20,8 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setTrace(&$cat) {
-      $this->cat= &$cat;
+    public function setTrace($cat) {
+      $this->cat= $cat;
     }
  
     /**
@@ -30,7 +30,7 @@
      * @access  public
      * @param   &webservices.soap.SOAPMessage message
      */
-    public function send(&$message) { }
+    public function send($message) { }
    
     /**
      * Retrieve the answer
@@ -38,6 +38,6 @@
      * @access  public
      * @return  &webservices.soap.SOAPMessage
      */
-    public function &retrieve(&$response) { }
+    public function retrieve($response) { }
   }
 ?>
Index: ../../../skeleton/webservices/uddi/BusinessList.class.php
===================================================================
--- ../../../skeleton/webservices/uddi/BusinessList.class.php	(revision 8952)
+++ ../../../skeleton/webservices/uddi/BusinessList.class.php	(working copy)
@@ -75,7 +75,7 @@
      * @param   int pos the position, starting from 0 to numItems() - 1
      * @return  &webservices.uddi.Business or NULL if there is no such item
      */
-    public function &itemAt($pos) {
+    public function itemAt($pos) {
       if (isset($this->items[$pos])) return $this->items[$pos]; else return NULL;
     }
 
Index: ../../../skeleton/webservices/uddi/UDDIServer.class.php
===================================================================
--- ../../../skeleton/webservices/uddi/UDDIServer.class.php	(revision 8952)
+++ ../../../skeleton/webservices/uddi/UDDIServer.class.php	(working copy)
@@ -91,11 +91,11 @@
      * @throws  webservices.soap.SOAPFaultException in case a SOAP fault was returned
      * @throws  xml.XMLFormatException in case the XML returned was not well-formed
      */
-    public function invoke(&$command) {
+    public function invoke($command) {
       if (is('webservices.uddi.InquiryCommand', $command)) {
-        $c= &$this->conn['inquiry'];
+        $c= $this->conn['inquiry'];
       } else if (is('webservices.uddi.PublishCommand', $command)) {
-        $c= &$this->conn['publish'];
+        $c= $this->conn['publish'];
       } else {
         throw(new IllegalArgumentException(
           'Unknown command type "'.xp::typeOf($command).'"'
@@ -108,7 +108,7 @@
         $m->root= new Node('soap:Envelope', NULL, array(
           'xmlns:soap' => 'http://schemas.xmlsoap.org/soap/envelope/'
         ));
-        $body= &$m->root->addChild(new Node('soap:Body'));
+        $body= $m->root->addChild(new Node('soap:Body'));
         $command->marshalTo($body->addChild(new Node('command', NULL, array(
           'xmlns'      => UDDIConstants::namespaceFor($this->version),
           'generic'    => UDDIConstants::versionIdFor($this->version)
@@ -127,7 +127,7 @@
       // Send it
       try {
         $this->cat && $this->cat->debug('>>>', $c->request->getRequestString());
-        $response= &$c->request->send();
+        $response= $c->request->send();
       } catch (IOException $e) {
         throw ($e);
       }
@@ -140,7 +140,7 @@
         while ($buf= $response->readData()) $xml.= $buf;
         $this->cat && $this->cat->debug('<<<', $xml);
 
-        if ($answer= &SOAPMessage::fromString($xml)) {
+        if ($answer= SOAPMessage::fromString($xml)) {
           if (NULL !== ($content_type= $response->getHeader('Content-Type'))) {
             @list($type, $charset)= explode('; charset=', $content_type);
             if (!empty($charset)) $answer->setEncoding($charset);
@@ -165,8 +165,8 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setTrace(&$cat) {
-      $this->cat= &$cat;
+    public function setTrace($cat) {
+      $this->cat= $cat;
     }
 
   } 
Index: ../../../skeleton/webservices/uddi/FindBusinessesCommand.class.php
===================================================================
--- ../../../skeleton/webservices/uddi/FindBusinessesCommand.class.php	(revision 8952)
+++ ../../../skeleton/webservices/uddi/FindBusinessesCommand.class.php	(working copy)
@@ -47,7 +47,7 @@
      * @param   &xml.Node node
      * @see     xp://webservices.uddi.UDDICommand#marshalTo
      */
-    public function marshalTo(&$node) {
+    public function marshalTo($node) {
       $node->setName('find_business');
       
       // Add maxRows if non-zero
@@ -55,7 +55,7 @@
 
       // Add find qualifiers if existant
       if (!empty($this->findQualifiers)) {
-        $q= &$node->addChild(new Node('findQualifiers'));
+        $q= $node->addChild(new Node('findQualifiers'));
         foreach ($this->findQualifiers as $findQualifier) {
           $q->addChild(new Node('findQualifier', $findQualifier));
         }
@@ -76,13 +76,13 @@
      * @see     xp://webservices.uddi.UDDICommand#unmarshalFrom
      * @throws  lang.FormatException in case of an unexpected response
      */
-    public function &unmarshalFrom(&$node) {
+    public function unmarshalFrom($node) {
       if (0 != strcasecmp($node->name, 'businessList')) {
         throw(new FormatException('Expected "businessList", got "'.$node->name.'"'));
       }
       
       // Create business list object from XML representation
-      with ($list= new BusinessList(), $children= &$node->children[0]->children); {
+      with ($list= new BusinessList(), $children= $node->children[0]->children); {
         $list->setOperator($node->getAttribute('operator'));
         $list->setTruncated(0 == strcasecmp('true', $node->getAttribute('truncated')));
         
@@ -100,7 +100,7 @@
                 break;
             }
           }
-          $list->items[]= &$b;
+          $list->items[]= $b;
         }
       }
       
Index: ../../../skeleton/webservices/uddi/UDDICommand.class.php
===================================================================
--- ../../../skeleton/webservices/uddi/UDDICommand.class.php	(revision 8952)
+++ ../../../skeleton/webservices/uddi/UDDICommand.class.php	(working copy)
@@ -19,7 +19,7 @@
      * @access  public
      * @param   &xml.Node node
      */
-    public function marshalTo(&$node);
+    public function marshalTo($node);
 
     /**
      * Unmarshal return value from a specified node
@@ -28,6 +28,6 @@
      * @param   &xml.Node node
      * @return  &lang.Object
      */
-    public function &unmarshalFrom(&$node);
+    public function unmarshalFrom($node);
   }
 ?>
Index: ../../../skeleton/webservices/xmlrpc/XmlRpcEncoder.class.php
===================================================================
--- ../../../skeleton/webservices/xmlrpc/XmlRpcEncoder.class.php	(revision 8952)
+++ ../../../skeleton/webservices/xmlrpc/XmlRpcEncoder.class.php	(working copy)
@@ -22,7 +22,7 @@
      * @param   mixed data
      * @return  &xml.Node
      */
-    public function &encode($data) {
+    public function encode($data) {
       return $this->_marshall($data);
     }
 
@@ -42,7 +42,7 @@
      * @param   mixed data
      * @throws  lang.IllegalArgumentException in case the data could not be serialized.
      */
-    public function &_marshall($data) {
+    public function _marshall($data) {
       $value= new Node('value');
       
       if (is('Generic', $data)) {
@@ -71,9 +71,9 @@
           break;
         
         case 'array':
-          $struct= &$value->addChild(new Node('struct'));
+          $struct= $value->addChild(new Node('struct'));
           if (sizeof($data)) foreach (array_keys($data) as $idx) {
-            $member= &$struct->addChild(new Node('member'));
+            $member= $struct->addChild(new Node('member'));
             $member->addChild(new Node('name', $idx));
             $member->addChild($this->_marshall($data[$idx]));
           }
Index: ../../../skeleton/webservices/xmlrpc/XmlRpcResponseMessage.class.php
===================================================================
--- ../../../skeleton/webservices/xmlrpc/XmlRpcResponseMessage.class.php	(revision 8952)
+++ ../../../skeleton/webservices/xmlrpc/XmlRpcResponseMessage.class.php	(working copy)
@@ -37,9 +37,9 @@
      * @param   string string
      * @return  &webservices.xmlrpc.XmlRpcResponse Message
      */
-    public static function &fromString($string) {
+    public static function fromString($string) {
       $msg= new XmlRpcResponseMessage();
-      $msg->tree= &Tree::fromString($string);
+      $msg->tree= Tree::fromString($string);
 
       // Set class and method members from XML structure
       $target= $msg->tree->root->children[0]->getContent();
@@ -57,8 +57,8 @@
     public function setData($value) {
       $encoder= new XmlRpcEncoder();
 
-      $params= &$this->tree->root->addChild(new Node('params'));
-      $param= &$params->addChild(new Node('param'));
+      $params= $this->tree->root->addChild(new Node('params'));
+      $param= $params->addChild(new Node('param'));
       $param->addChild($encoder->encode($value));
     }
     
@@ -68,7 +68,7 @@
      * @access  public
      * @return  &mixed
      */
-    public function &getData() {
+    public function getData() {
       $ret= array();
       
       if (
Index: ../../../skeleton/webservices/xmlrpc/rpc/XmlRpcRouter.class.php
===================================================================
--- ../../../skeleton/webservices/xmlrpc/rpc/XmlRpcRouter.class.php	(revision 8952)
+++ ../../../skeleton/webservices/xmlrpc/rpc/XmlRpcRouter.class.php	(working copy)
@@ -55,7 +55,7 @@
      * @access  protected
      * @return  &webservices.xmlrpc.rpc.XmlRpcRequest
      */
-    public function &_request() {
+    public function _request() {
       return new XmlRpcRequest();
     }
 
@@ -65,7 +65,7 @@
      * @access  protected
      * @return  &webservices.xmlrpc.rpc.XmlRpcResponse
      */
-    public function &_response() {
+    public function _response() {
       return new XmlRpcResponse();
     }
     
@@ -75,7 +75,7 @@
      * @access  protected
      * @return  &webservices.xmlrpc.XmlRpcResponseMessage
      */
-    public function &_message() {
+    public function _message() {
       return new XmlRpcResponseMessage();
     }
   }
Index: ../../../skeleton/webservices/xmlrpc/rpc/XmlRpcRequest.class.php
===================================================================
--- ../../../skeleton/webservices/xmlrpc/rpc/XmlRpcRequest.class.php	(revision 8952)
+++ ../../../skeleton/webservices/xmlrpc/rpc/XmlRpcRequest.class.php	(working copy)
@@ -23,9 +23,9 @@
      * @access  public
      * @return  &webservices.xmlrpc.XmlRpcMessage message object
      */
-    public function &getMessage() {
+    public function getMessage() {
       $this->cat && $this->cat->debug('<<< ', $this->getData());
-      $m= &XmlRpcRequestMessage::fromString($this->getData());
+      $m= XmlRpcRequestMessage::fromString($this->getData());
       return $m;
     }
   }
Index: ../../../skeleton/webservices/xmlrpc/XmlRpcMessage.class.php
===================================================================
--- ../../../skeleton/webservices/xmlrpc/XmlRpcMessage.class.php	(revision 8952)
+++ ../../../skeleton/webservices/xmlrpc/XmlRpcMessage.class.php	(working copy)
@@ -59,7 +59,7 @@
      * @param   string string
      * @return  &webservices.xmlrpc.XmlRpcMessage
      */
-    public static function &fromString($string) { }
+    public static function fromString($string) { }
     
     /**
      * Set encoding
@@ -96,9 +96,9 @@
     public function setData($arr) {
       $encoder= new XmlRpcEncoder();
 
-      $params= &$this->tree->root->addChild(new Node('params'));
+      $params= $this->tree->root->addChild(new Node('params'));
       if (sizeof($arr)) foreach (array_keys($arr) as $idx) {
-        $n= &$params->addChild(new Node('param'));
+        $n= $params->addChild(new Node('param'));
         $n->addChild($encoder->encode($arr[$idx]));
       }
     }
@@ -120,7 +120,7 @@
      * @access  public
      * @return  &mixed
      */
-    public function &getData() {
+    public function getData() {
       $ret= array();
       foreach (array_keys($this->tree->root->children) as $idx) {
         if ('params' != $this->tree->root->children[$idx]->getName())
@@ -129,7 +129,7 @@
         // Process params node
         $decoder= new XmlRpcDecoder();
         foreach (array_keys($this->tree->root->children[$idx]->children) as $params) {
-          $ret[]= &$decoder->decode($this->tree->root->children[$idx]->children[$params]->children[0]);
+          $ret[]= $decoder->decode($this->tree->root->children[$idx]->children[$params]->children[0]);
         }
         
         return $ret;
@@ -162,7 +162,7 @@
      * @access  public
      * @return  &webservices.xmlrpc.XmlRpcFault or NULL if no fault exists
      */
-    public function &getFault() {
+    public function getFault() {
 
       // First check whether the fault-node exists
       if (
@@ -173,7 +173,7 @@
       }
       
       $decoder= new XmlRpcDecoder();
-      $data= &$decoder->decode($this->tree->root->children[0]->children[0]);
+      $data= $decoder->decode($this->tree->root->children[0]->children[0]);
       $f= new XmlRpcFault($data['faultCode'], $data['faultString']);
       return $f;
     }
Index: ../../../skeleton/webservices/xmlrpc/XmlRpcDecoder.class.php
===================================================================
--- ../../../skeleton/webservices/xmlrpc/XmlRpcDecoder.class.php	(revision 8952)
+++ ../../../skeleton/webservices/xmlrpc/XmlRpcDecoder.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @param   &xml.Node node
      * @return  &mixed
      */
-    public function &decode(&$node) {
+    public function decode($node) {
       return $this->_unmarshall($node);
     }
   
@@ -38,7 +38,7 @@
      * @throws  lang.ClassNotFoundException in case a XP object's class could not be loaded
      * @throws  xml.XMLFormatException
      */
-    public function &_unmarshall(&$node) {
+    public function _unmarshall($node) {
       if (!is('xml.Node', $node->children[0]))
         throw(new XMLFormatException('Tried to access nonexistant node.'));
         
@@ -47,9 +47,9 @@
           $ret= array();
           foreach (array_keys($node->children[0]->children) as $idx) {
             $data= array();
-            $data[$node->children[0]->children[$idx]->children[0]->getName()]= &$node->children[0]->children[$idx]->children[0];
-            $data[$node->children[0]->children[$idx]->children[1]->getName()]= &$node->children[0]->children[$idx]->children[1];
-            $ret[$data['name']->getContent()]= &$this->_unmarshall($data['value']);
+            $data[$node->children[0]->children[$idx]->children[0]->getName()]= $node->children[0]->children[$idx]->children[0];
+            $data[$node->children[0]->children[$idx]->children[1]->getName()]= $node->children[0]->children[$idx]->children[1];
+            $ret[$data['name']->getContent()]= $this->_unmarshall($data['value']);
             unset($data);
           }
           
@@ -66,7 +66,7 @@
             
             // Cast the object to the class
             unset($ret['__xp_class']);
-            $ret= &cast($ret, xp::reflect($cname));
+            $ret= cast($ret, xp::reflect($cname));
           }
           
           return $ret;
@@ -75,7 +75,7 @@
         case 'array':
           $ret= array();
           foreach (array_keys($node->children[0]->children[0]->children) as $idx) {
-            $ret[]= &$this->_unmarshall($node->children[0]->children[0]->children[$idx]);
+            $ret[]= $this->_unmarshall($node->children[0]->children[0]->children[$idx]);
           }
           return $ret;
           break;
@@ -98,7 +98,7 @@
           return $s;
         
         case 'dateTime.iso8601':
-          $d= &Date::fromString($node->children[0]->getContent());
+          $d= Date::fromString($node->children[0]->getContent());
           return $d;
           
         default:
Index: ../../../skeleton/webservices/xmlrpc/XmlRpcFaultException.class.php
===================================================================
--- ../../../skeleton/webservices/xmlrpc/XmlRpcFaultException.class.php	(revision 8952)
+++ ../../../skeleton/webservices/xmlrpc/XmlRpcFaultException.class.php	(working copy)
@@ -21,9 +21,9 @@
      * @access  public
      * @param   &webservices.xmlrpc.XmlRpcFault fault
      */
-    public function __construct(&$fault) {
+    public function __construct($fault) {
       parent::__construct($fault->faultString);
-      $this->fault= &$fault;
+      $this->fault= $fault;
     }
 
     /**
@@ -32,7 +32,7 @@
      * @access  public
      * @return  &webservices.xmlrpc.XmlRpcFault
      */
-    public function &getFault() {
+    public function getFault() {
       return $this->fault;
     }
     
Index: ../../../skeleton/webservices/xmlrpc/transport/XmlRpcHttpTransport.class.php
===================================================================
--- ../../../skeleton/webservices/xmlrpc/transport/XmlRpcHttpTransport.class.php	(revision 8952)
+++ ../../../skeleton/webservices/xmlrpc/transport/XmlRpcHttpTransport.class.php	(working copy)
@@ -49,7 +49,7 @@
      * @param   &webservices.xmlrpc.XmlRpcMessage message
      * @return  &scriptlet.HttpScriptletResponse
      */
-    public function &send(&$message) {
+    public function send($message) {
       
       if (!is('webservices.xmlrpc.XmlRpcMessage', $message)) throw(new IllegalArgumentException(
         'parameter "message" must be a webservices.xmlrpc.XmlRpcMessage'
@@ -66,7 +66,7 @@
       
       try {
         $this->cat && $this->cat->debug('>>>', $this->_conn->request->getRequestString());
-        $res= &$this->_conn->request->send($this->_conn->getTimeout());
+        $res= $this->_conn->request->send($this->_conn->getTimeout());
       } catch (IOException $e) {
         throw ($e);
       }
@@ -81,7 +81,7 @@
      * @param   &scriptlet.HttpScriptletResponse response
      * @return  &webservices.xmlrpc.XmlRpcMessage
      */
-    public function &retrieve(&$response) {
+    public function retrieve($response) {
       $this->cat && $this->cat->debug('<<<', $response->toString());
 
       try {
@@ -98,7 +98,7 @@
             while ($buf= $response->readData()) $xml.= $buf;
 
             $this->cat && $this->cat->debug('<<<', $xml);
-            if ($answer= &XmlRpcResponseMessage::fromString($xml)) {
+            if ($answer= XmlRpcResponseMessage::fromString($xml)) {
 
               // Check encoding
               if (NULL !== ($content_type= $response->getHeader('Content-Type'))) {
Index: ../../../skeleton/webservices/xmlrpc/transport/XmlRpcTransport.class.php
===================================================================
--- ../../../skeleton/webservices/xmlrpc/transport/XmlRpcTransport.class.php	(revision 8952)
+++ ../../../skeleton/webservices/xmlrpc/transport/XmlRpcTransport.class.php	(working copy)
@@ -25,8 +25,8 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setTrace(&$cat) {
-      $this->cat= &$cat;
+    public function setTrace($cat) {
+      $this->cat= $cat;
     }
  
     /**
@@ -36,7 +36,7 @@
      * @param   &webservices.xmlrpc.XmlRpcMessage message
      * @return  &scriptlet.HttpScriptletResponse
      */
-    public function &send(&$message) { }
+    public function send($message) { }
     
     /**
      * Retrieve a XML-RPC message.
@@ -45,7 +45,7 @@
      * @param   &webservices.xmlrpc.XmlRpcResponse response
      * @return  &webservices.xmlrpc.XmlRpcMessage
      */
-    public function &retrieve(&$response) { }    
+    public function retrieve($response) { }    
 
   } 
 ?>
Index: ../../../skeleton/webservices/xmlrpc/XmlRpcRequestMessage.class.php
===================================================================
--- ../../../skeleton/webservices/xmlrpc/XmlRpcRequestMessage.class.php	(revision 8952)
+++ ../../../skeleton/webservices/xmlrpc/XmlRpcRequestMessage.class.php	(working copy)
@@ -38,9 +38,9 @@
      * @param   string string
      * @return  &webservices.xmlrpc.XmlRpcMessage
      */
-    public static function &fromString($string) {
+    public static function fromString($string) {
       $msg= new XmlRpcRequestMessage();
-      $msg->tree= &Tree::fromString($string);
+      $msg->tree= Tree::fromString($string);
 
       // Set class and method members from XML structure
       $target= $msg->tree->root->children[0]->getContent();
@@ -58,9 +58,9 @@
     public function setData($arr) {
       $encoder= new XmlRpcEncoder();
 
-      $params= &$this->tree->root->addChild(new Node('params'));
+      $params= $this->tree->root->addChild(new Node('params'));
       if (sizeof($arr)) foreach (array_keys($arr) as $idx) {
-        $n= &$params->addChild(new Node('param'));
+        $n= $params->addChild(new Node('param'));
         $n->addChild($encoder->encode($arr[$idx]));
       }
     }
@@ -71,7 +71,7 @@
      * @access  public
      * @return  &mixed
      */
-    public function &getData() {
+    public function getData() {
       $ret= array();
       foreach (array_keys($this->tree->root->children) as $idx) {
         if ('params' != $this->tree->root->children[$idx]->getName())
@@ -80,7 +80,7 @@
         // Process params node
         $decoder= new XmlRpcDecoder();
         foreach (array_keys($this->tree->root->children[$idx]->children) as $params) {
-          $ret[]= &$decoder->decode($this->tree->root->children[$idx]->children[$params]->children[0]);
+          $ret[]= $decoder->decode($this->tree->root->children[$idx]->children[$params]->children[0]);
         }
         
         return $ret;
Index: ../../../skeleton/webservices/xmlrpc/XmlRpcClient.class.php
===================================================================
--- ../../../skeleton/webservices/xmlrpc/XmlRpcClient.class.php	(revision 8952)
+++ ../../../skeleton/webservices/xmlrpc/XmlRpcClient.class.php	(working copy)
@@ -46,8 +46,8 @@
      * @access  public
      * @param   &webservices.xmlrpc.transport.XmlRpcTransport transport
      */
-    public function __construct(&$transport) {
-      $this->transport= &$transport;
+    public function __construct($transport) {
+      $this->transport= $transport;
     }
     
     /**
@@ -56,7 +56,7 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setTrace(&$cat) {
+    public function setTrace($cat) {
       $this->transport->setTrace($cat);
     }
     
@@ -81,10 +81,10 @@
       $this->message->setData($args);
       
       // Send
-      if (FALSE == ($response= &$this->transport->send($this->message))) return FALSE;
+      if (FALSE == ($response= $this->transport->send($this->message))) return FALSE;
       
       // Retrieve response
-      if (FALSE == ($this->answer= &$this->transport->retrieve($response))) return FALSE;
+      if (FALSE == ($this->answer= $this->transport->retrieve($response))) return FALSE;
       
       $data= $this->answer->getData();
       return $data;
Index: ../../../skeleton/webservices/wddx/WddxClient.class.php
===================================================================
--- ../../../skeleton/webservices/wddx/WddxClient.class.php	(revision 8952)
+++ ../../../skeleton/webservices/wddx/WddxClient.class.php	(working copy)
@@ -40,8 +40,8 @@
      * @access  public
      * @param   &webservices.wddx.transport.WddxTransport transport
      */
-    public function __construct(&$transport) {
-      $this->transport= &$transport;
+    public function __construct($transport) {
+      $this->transport= $transport;
     }
     
     /**
@@ -50,7 +50,7 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setTrace(&$cat) {
+    public function setTrace($cat) {
       $this->transport->setTrace($cat);
     }
     
@@ -74,10 +74,10 @@
       $this->message->setData($args);
       
       // Send
-      if (FALSE == ($response= &$this->transport->send($this->message))) return FALSE;
+      if (FALSE == ($response= $this->transport->send($this->message))) return FALSE;
       
       // Retrieve response
-      if (FALSE == ($this->answer= &$this->transport->retrieve($response))) return FALSE;
+      if (FALSE == ($this->answer= $this->transport->retrieve($response))) return FALSE;
       
       $data= $this->answer->getData();
       return $data;
Index: ../../../skeleton/webservices/wddx/WddxMessage.class.php
===================================================================
--- ../../../skeleton/webservices/wddx/WddxMessage.class.php	(revision 8952)
+++ ../../../skeleton/webservices/wddx/WddxMessage.class.php	(working copy)
@@ -34,7 +34,7 @@
      * @param   string string
      * @return  &webservices.wddx.WddxMessage
      */
-    public static function &fromString($string) {
+    public static function fromString($string) {
       return parent::fromString($string, 'WddxMessage');
     }    
     
@@ -45,7 +45,7 @@
      * @param   string comment
      */
     public function create($comment= NULL) {
-      $h= &$this->root->addChild(new Node('header'));
+      $h= $this->root->addChild(new Node('header'));
       if ($comment) $h->addChild(new Node('comment', $comment));
     }
     
@@ -55,8 +55,8 @@
      * @access  public
      * @param   &mixed[] arr
      */
-    public function setData(&$arr) {
-      $d= &$this->root->addChild(new Node('data'));
+    public function setData($arr) {
+      $d= $this->root->addChild(new Node('data'));
       if (sizeof($arr)) foreach (array_keys($arr) as $idx) {
         $this->_marshall($d, $arr[$idx]);
       }
@@ -70,7 +70,7 @@
      * @param   &mixed data
      * @throws  lang.IllegalArgumentException if passed data could not be serialized
      */
-    public function _marshall(&$node, &$data) {
+    public function _marshall($node, $data) {
     
       switch (xp::typeOf($data)) {
         case 'NULL':
@@ -93,7 +93,7 @@
           break;
         
         case 'array':
-          $s= &$node->addChild(new Node('struct'));
+          $s= $node->addChild(new Node('struct'));
           foreach (array_keys($data) as $idx) {
             $this->_marshall($s->addChild(new Node('var', NULL, array(
               'name'  => $idx
@@ -108,7 +108,7 @@
           break;
         
         case 'lang.Collection':
-          $a= &$node->addChild(new Node('array', NULL, array(
+          $a= $node->addChild(new Node('array', NULL, array(
             'length'  => sizeof($data)
           )));
           foreach (array_keys($data) as $idx) {
@@ -128,7 +128,7 @@
      * @return  &mixed[]
      * @throws  lang.IllegalStateException if no payload data could be found in the message
      */
-    public function &getData() {
+    public function getData() {
       $ret= array();
       foreach (array_keys($this->root->children) as $idx) {
         if ('header' == $this->root->children[$idx]->getName())
@@ -137,7 +137,7 @@
         // Process params node
         foreach (array_keys($this->root->children[$idx]->children) as $params) {
           try {
-            $ret[]= &$this->_unmarshall($this->root->children[$idx]->children[$params]);
+            $ret[]= $this->_unmarshall($this->root->children[$idx]->children[$params]);
           } catch (Exception $e) {
             throw($e);
           }
@@ -157,7 +157,7 @@
      * @return  &mixed[]
      * @throws  lang.IllegalArgumentException if document is not well-formed
      */
-    public function &_unmarshall(&$node) {
+    public function _unmarshall($node) {
       switch ($node->getName()) {
         case 'null': return NULL;
         case 'boolean': return ($node->getContent() == 'true' ? TRUE : FALSE);
@@ -180,14 +180,14 @@
         case 'array':
           $arr= array();
           foreach (array_keys($node->children) as $idx) {
-            $arr[]= &$this->_unmarshall($node->children[$idx]);
+            $arr[]= $this->_unmarshall($node->children[$idx]);
           }
           return $arr;
         
         case 'struct':
           $struct= array();
           foreach (array_keys($node->children) as $idx) {
-            $struct[$node->children[$idx]->getAttribute('name')]= &$this->_unmarshall($node->children[$idx]);
+            $struct[$node->children[$idx]->getAttribute('name')]= $this->_unmarshall($node->children[$idx]);
           }
           return $struct;
       }
Index: ../../../skeleton/webservices/wddx/transport/WddxHttpTransport.class.php
===================================================================
--- ../../../skeleton/webservices/wddx/transport/WddxHttpTransport.class.php	(revision 8952)
+++ ../../../skeleton/webservices/wddx/transport/WddxHttpTransport.class.php	(working copy)
@@ -50,7 +50,7 @@
      * @param   &webservices.wddx.WddxMessage message
      * @return  &scriptlet.HttpScriptletResponse
      */
-    public function &send(&$message) {
+    public function send($message) {
       
       if (!is('webservices.wddx.WddxMessage', $message)) throw(new IllegalArgumentException(
         'parameter "message" must be a webservices.wddx.WddxMessage'
@@ -71,7 +71,7 @@
       
       try {
         $this->cat && $this->cat->debug('>>>', $this->_conn->request->getRequestString());
-        $res= &$this->_conn->request->send($this->_conn->getTimeout());
+        $res= $this->_conn->request->send($this->_conn->getTimeout());
       } catch (IOException $e) {
         throw ($e);
       }
@@ -86,7 +86,7 @@
      * @param   &scriptlet.HttpScriptletResponse response
      * @return  &webservices.wddx.WddxMessage
      */
-    public function &retrieve(&$response) {
+    public function retrieve($response) {
       $this->cat && $this->cat->debug('<<<', $response->toString());
       
       try {
@@ -103,7 +103,7 @@
             while ($buf= $response->readData()) $xml.= $buf;
 
             $this->cat && $this->cat->debug('<<<', $xml);
-            if ($answer= &WddxMessage::fromString($xml)) {
+            if ($answer= WddxMessage::fromString($xml)) {
 
               // Check encoding
               if (NULL !== ($content_type= $response->getHeader('Content-Type'))) {
Index: ../../../skeleton/webservices/wddx/transport/WddxTransport.class.php
===================================================================
--- ../../../skeleton/webservices/wddx/transport/WddxTransport.class.php	(revision 8952)
+++ ../../../skeleton/webservices/wddx/transport/WddxTransport.class.php	(working copy)
@@ -21,8 +21,8 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setTrace(&$cat) {
-      $this->cat= &$cat;
+    public function setTrace($cat) {
+      $this->cat= $cat;
     }
  
     /**
@@ -32,7 +32,7 @@
      * @param   &webservices.wddx.WddxMessage message
      * @return  &scriptlet.HttpScriptletResponse
      */
-    public function &send(&$message) { }
+    public function send($message) { }
     
     /**
      * Retrieve a WDDX message.
@@ -41,6 +41,6 @@
      * @param   &scriptlet.HttpScriptletResponse response
      * @return  &webservices.wddx.WddxMessage
      */
-    public function &retrieve(&$response) { }
+    public function retrieve($response) { }
   } 
 ?>
Index: ../../../skeleton/webservices/json/rpc/JsonRequestMessage.class.php
===================================================================
--- ../../../skeleton/webservices/json/rpc/JsonRequestMessage.class.php	(revision 8952)
+++ ../../../skeleton/webservices/json/rpc/JsonRequestMessage.class.php	(working copy)
@@ -22,8 +22,8 @@
      * @param   string string
      * @return  &webservices.json.rpc.JsonRequestMessage
      */
-    public static function &fromString($string) {
-      $decoder= &JsonFactory::create();
+    public static function fromString($string) {
+      $decoder= JsonFactory::create();
 
       $msg= new JsonRequestMessage();
       $data= $decoder->decode($string);
@@ -70,7 +70,7 @@
      * @access  public 
      * @return  mixed
      */
-    public function &getData() {
+    public function getData() {
       return $this->data['params'];
     }    
   }
Index: ../../../skeleton/webservices/json/rpc/JsonRpcRequest.class.php
===================================================================
--- ../../../skeleton/webservices/json/rpc/JsonRpcRequest.class.php	(revision 8952)
+++ ../../../skeleton/webservices/json/rpc/JsonRpcRequest.class.php	(working copy)
@@ -22,9 +22,9 @@
      * @access  public
      * @return  &webservices.xmlrpc.XmlRpcMessage message object
      */
-    public function &getMessage() {
+    public function getMessage() {
       $this->cat && $this->cat->debug('<<< ', $this->getData());
-      $m= &JsonRequestMessage::fromString($this->getData());
+      $m= JsonRequestMessage::fromString($this->getData());
       return $m;
     }
   }
Index: ../../../skeleton/webservices/json/rpc/JsonClient.class.php
===================================================================
--- ../../../skeleton/webservices/json/rpc/JsonClient.class.php	(revision 8952)
+++ ../../../skeleton/webservices/json/rpc/JsonClient.class.php	(working copy)
@@ -25,8 +25,8 @@
      * @access  public
      * @param   &scriptlet.rpc.transport.GenericHttpTransport transport
      */
-    public function __construct(&$transport) {
-      $this->transport= &$transport;
+    public function __construct($transport) {
+      $this->transport= $transport;
     }
     
     /**
@@ -35,7 +35,7 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setTrace(&$cat) {
+    public function setTrace($cat) {
       $this->transport->setTrace($cat);
     }
     
@@ -62,10 +62,10 @@
       $this->message->setData($args);
       
       // Send
-      if (FALSE == ($response= &$this->transport->send($this->message))) return FALSE;
+      if (FALSE == ($response= $this->transport->send($this->message))) return FALSE;
       
       // Retrieve response
-      if (FALSE == ($this->answer= &$this->transport->retrieve($response))) return FALSE;
+      if (FALSE == ($this->answer= $this->transport->retrieve($response))) return FALSE;
       
       $data= $this->answer->getData();
       return $data;
Index: ../../../skeleton/webservices/json/rpc/JsonResponseMessage.class.php
===================================================================
--- ../../../skeleton/webservices/json/rpc/JsonResponseMessage.class.php	(revision 8952)
+++ ../../../skeleton/webservices/json/rpc/JsonResponseMessage.class.php	(working copy)
@@ -22,8 +22,8 @@
      * @param   string string
      * @return  &webservices.json.rpc.JsonResponseMessage
      */
-    public static function &fromString($string) {
-      $decoder= &JsonFactory::create();
+    public static function fromString($string) {
+      $decoder= JsonFactory::create();
 
       $msg= new JsonResponseMessage();
       $data= $decoder->decode($string);
@@ -64,7 +64,7 @@
      * @access  public
      * @return  mixed
      */
-    public function &getData() {
+    public function getData() {
       return $this->data['result'];
     }    
     
Index: ../../../skeleton/webservices/json/rpc/JsonRpcResponse.class.php
===================================================================
--- ../../../skeleton/webservices/json/rpc/JsonRpcResponse.class.php	(revision 8952)
+++ ../../../skeleton/webservices/json/rpc/JsonRpcResponse.class.php	(working copy)
@@ -19,8 +19,8 @@
      * @access  public
      * @param   &webservices.json.rpc.JsonRpcMessage msg
      */
-    public function setMessage(&$msg) {
-      $this->message= &$msg;
+    public function setMessage($msg) {
+      $this->message= $msg;
     }
     
     /**
Index: ../../../skeleton/webservices/json/rpc/JsonMessage.class.php
===================================================================
--- ../../../skeleton/webservices/json/rpc/JsonMessage.class.php	(revision 8952)
+++ ../../../skeleton/webservices/json/rpc/JsonMessage.class.php	(working copy)
@@ -31,7 +31,7 @@
      * @param   string string
      * @return  &webservices.json.rpc.JsonMessage
      */
-    public static function &fromString($string) { }
+    public static function fromString($string) { }
     
     /**
      * Create message 
@@ -106,7 +106,7 @@
      * @access  public
      * @return  &lang.Object
      */
-    public function &getData() {
+    public function getData() {
       return $this->data;
     }
     
@@ -117,7 +117,7 @@
      * @return  string
      */
     public function serializeData() {
-      $decoder= &JsonFactory::create();
+      $decoder= JsonFactory::create();
       return $decoder->encode($this->data);
     }
     
@@ -165,7 +165,7 @@
      * @access  public
      * @return  &scriptlet.rpc.RpcFault
      */
-    public function &getFault() {
+    public function getFault() {
       if (empty($this->data['error'])) return NULL;
       return new RpcFault(
         $this->data['error']['faultCode'],
Index: ../../../skeleton/webservices/json/rpc/JsonRpcRouter.class.php
===================================================================
--- ../../../skeleton/webservices/json/rpc/JsonRpcRouter.class.php	(revision 8952)
+++ ../../../skeleton/webservices/json/rpc/JsonRpcRouter.class.php	(working copy)
@@ -26,7 +26,7 @@
      * @access  protected
      * @return  &scriptlet.rpc.AbstractRpcRequest
      */
-    public function &_request() {
+    public function _request() {
       return new JsonRpcRequest();
     }
 
@@ -36,7 +36,7 @@
      * @access  protected
      * @return  &scriptlet.rpc.AbstractRpcResponse
      */
-    public function &_response() {
+    public function _response() {
       return new JsonRpcResponse();
     }
     
@@ -46,7 +46,7 @@
      * @access  protected
      * @return  &scriptlet.rpc.AbstractRpcMessage
      */
-    public function &_message() {
+    public function _message() {
       return new JsonResponseMessage();
     }
   }
Index: ../../../skeleton/webservices/json/JsonDecoder.class.php
===================================================================
--- ../../../skeleton/webservices/json/JsonDecoder.class.php	(revision 8952)
+++ ../../../skeleton/webservices/json/JsonDecoder.class.php	(working copy)
@@ -80,7 +80,7 @@
               $vars= array(
                 'constructor' => '__construct()'
               );
-              foreach ($data->__sleep() as $var) $vars[$var]= &$data->{$var};
+              foreach ($data->__sleep() as $var) $vars[$var]= $data->{$var};
             }
             
             // __xpclass__ is an addition to the spec, I added to be able to pass the FQCN
@@ -220,8 +220,8 @@
 
       // Introspect array to check if this is actually an object
       if (!empty($array['__jsonclass__']) && !empty($array['__xpclass__'])) {
-        $class= &XPClass::forName($array['__xpclass__']);
-        $inst= &$class->newInstance();
+        $class= XPClass::forName($array['__xpclass__']);
+        $inst= $class->newInstance();
         
         foreach ($array as $key => $value) {
           if (in_array($key, array('__jsonclass__', '__xpclass__'))) continue;
Index: ../../../skeleton/webservices/json/JsonFactory.class.php
===================================================================
--- ../../../skeleton/webservices/json/JsonFactory.class.php	(revision 8952)
+++ ../../../skeleton/webservices/json/JsonFactory.class.php	(working copy)
@@ -25,7 +25,7 @@
      * @access  public
      * @return  &webservices.json.IJsonDecoder
      */
-    public static function &create() {
+    public static function create() {
       $n= new JsonDecoder();
       return $n;
     }
Index: ../../../skeleton/text/String.class.php
===================================================================
--- ../../../skeleton/text/String.class.php	(revision 8952)
+++ ../../../skeleton/text/String.class.php	(working copy)
@@ -99,7 +99,7 @@
      * @see     php://strcmp for case-sensitive comparison
      * @see     php://strcasecmp for case-insensitive comparison
      */
-    public function compareTo(&$string, $cs= TRUE) {
+    public function compareTo($string, $cs= TRUE) {
       return ($cs 
         ? strcmp($string->buffer, $this->buffer) 
         : strcasecmp($string->buffer, $this->buffer)
@@ -123,7 +123,7 @@
      * @param   &lang.Object value
      * @return  bool
      */
-    public function equals(&$cmp) {
+    public function equals($cmp) {
       return (
         is('String', $cmp) && 
         ($this->buffer === $cmp->buffer)
@@ -155,7 +155,7 @@
      * @see     php://strnatcmp for case-sensitive comparison
      * @see     php://strnatcasecmp for case-insensitive comparison
      */
-    public function compareToNat(&$string, $cs= TRUE) {
+    public function compareToNat($string, $cs= TRUE) {
       return ($cs 
         ? strnatcmp($string->buffer, $this->buffer) 
         : strnatcasecmp($string->buffer, $this->buffer)
@@ -263,7 +263,7 @@
      * @return  &text.String or NULL if substr is not found
      * @see     php://strstr
      */
-    public function &substringAfter($substr, $cs= TRUE) {
+    public function substringAfter($substr, $cs= TRUE) {
       if (FALSE === ($s= ($cs 
         ? strstr($this->buffer, $substr)
         : stristr($this->buffer, $substr)
@@ -281,7 +281,7 @@
      * @return  &text.String
      * @see     php://substr
      */
-    public function &substring($begin, $end= -1) {
+    public function substring($begin, $end= -1) {
       return new String(substr($this->buffer, $begin, $end));
     }
 
@@ -306,7 +306,7 @@
      * @param   &text.String string
      * @return  &text.String a new string
      */
-    public function &concat(&$string) {
+    public function concat($string) {
       return new String($this->buffer.$string->buffer);
     }
     
@@ -317,7 +317,7 @@
      * @access  public
      * @param   &text.String string
      */
-    public function append(&$string) {
+    public function append($string) {
       $this->buffer.= $string->buffer;
     }
     
@@ -388,7 +388,7 @@
      * @return  &text.String[]
      * @see     php://explode
      */
-    public function &explode($separator, $limit= 0) {
+    public function explode($separator, $limit= 0) {
       for (
         $a= ($limit 
           ? explode($separator, $this->buffer) 
@@ -411,7 +411,7 @@
      * @return  &text.String[]
      * @see     php://preg_split
      */
-    public function &split($separator, $limit= 0) {
+    public function split($separator, $limit= 0) {
       for (
         $a= ($limit 
           ? preg_split($separator, $this->buffer) 
@@ -504,7 +504,7 @@
      * @see     php://strtoupper
      * @return  &text.String this string
      */
-    public function &toUpperCase() {
+    public function toUpperCase() {
       $this->buffer= strtoupper($this->buffer);
       return $this;
     }
@@ -517,7 +517,7 @@
      * @see     php://strtolower
      * @return  &text.String this string
      */
-    public function &toLowerCase() {
+    public function toLowerCase() {
       $this->buffer= strtolower($this->buffer);
       return $this;
     }
@@ -575,7 +575,7 @@
      * @param   string delim default ''
      * @return  &text.String string
      */
-    public static function &fromArray($arr, $delim= '') {
+    public static function fromArray($arr, $delim= '') {
       return new String(implode($delim, $arr));
     }
     
@@ -588,7 +588,7 @@
      * @param   mixed arg
      * @return  &text.String string
      */
-    public static function &valueOf($arg) {
+    public static function valueOf($arg) {
       if (is('Generic', $arg)) {
         return new String($arg->toString());
       } else if (is_array($arg)) {
Index: ../../../skeleton/text/PHPSyntaxHighlighter.class.php
===================================================================
--- ../../../skeleton/text/PHPSyntaxHighlighter.class.php	(revision 8952)
+++ ../../../skeleton/text/PHPSyntaxHighlighter.class.php	(working copy)
@@ -126,7 +126,7 @@
      * @param   io.File file
      * @throws  io.IOException
      */    
-    public function setFile(&$file) {
+    public function setFile($file) {
       $file->open(FILE_MODE_READ);
       $this->source= $file->read($file->size());
       $file->close();
Index: ../../../skeleton/text/format/DateFormat.class.php
===================================================================
--- ../../../skeleton/text/format/DateFormat.class.php	(revision 8952)
+++ ../../../skeleton/text/format/DateFormat.class.php	(working copy)
@@ -21,7 +21,7 @@
      * @access  public
      * @return  &text.format.DateFormat
      */
-    public function &getInstance() {
+    public function getInstance() {
       return parent::getInstance('DateFormat');
     }  
 
@@ -34,7 +34,7 @@
      * @return  string
      * @throws  lang.FormatException
      */
-    public function apply($fmt, &$argument) {
+    public function apply($fmt, $argument) {
       switch (gettype($argument)) {
         case 'string':
           if (-1 == ($u= strtotime($argument))) {
Index: ../../../skeleton/text/format/ArrayFormat.class.php
===================================================================
--- ../../../skeleton/text/format/ArrayFormat.class.php	(revision 8952)
+++ ../../../skeleton/text/format/ArrayFormat.class.php	(working copy)
@@ -20,7 +20,7 @@
      * @access  public
      * @return  &text.format.ArrayFormat
      */
-    public function &getInstance() {
+    public function getInstance() {
       return parent::getInstance('ArrayFormat');
     }  
   
@@ -32,7 +32,7 @@
      * @param   &mixed argument
      * @return  string
      */
-    public function apply($fmt, &$argument) {
+    public function apply($fmt, $argument) {
       if (!is_array($argument)) {
         throw(new FormatException('Argument with type '.gettype($argument).' is not an array'));
       }
Index: ../../../skeleton/text/format/PrintfFormat.class.php
===================================================================
--- ../../../skeleton/text/format/PrintfFormat.class.php	(revision 8952)
+++ ../../../skeleton/text/format/PrintfFormat.class.php	(working copy)
@@ -21,7 +21,7 @@
      * @access  public
      * @return  &text.format.PrintfFormat
      */
-    public function &getInstance() {
+    public function getInstance() {
       return parent::getInstance('PrintfFormat');
     }  
   
@@ -33,7 +33,7 @@
      * @param   &mixed argument
      * @return  string
      */
-    public function apply($fmt, &$argument) {
+    public function apply($fmt, $argument) {
       switch (gettype($argument)) {
         case 'array':
           return vsprintf($fmt, array_values($argument));
Index: ../../../skeleton/text/format/HashFormat.class.php
===================================================================
--- ../../../skeleton/text/format/HashFormat.class.php	(revision 8952)
+++ ../../../skeleton/text/format/HashFormat.class.php	(working copy)
@@ -20,7 +20,7 @@
      * @access  public
      * @return  &text.format.HashFormat
      */
-    public function &getInstance() {
+    public function getInstance() {
       return parent::getInstance('HashFormat');
     }  
   
@@ -32,7 +32,7 @@
      * @param   &mixed argument
      * @return  string
      */
-    public function apply($fmt, &$argument) {
+    public function apply($fmt, $argument) {
       if (is_scalar($argument)) {
         throw(new FormatException('Argument with type '.gettype($argument).' is not an array or object'));
       }
Index: ../../../skeleton/text/format/BinaryFormat.class.php
===================================================================
--- ../../../skeleton/text/format/BinaryFormat.class.php	(revision 8952)
+++ ../../../skeleton/text/format/BinaryFormat.class.php	(working copy)
@@ -21,7 +21,7 @@
      * @access  public
      * @return  &text.format.BinaryFormat
      */
-    public function &getInstance() {
+    public function getInstance() {
       return parent::getInstance('BinaryFormat');
     }  
   
@@ -33,7 +33,7 @@
      * @param   &mixed argument
      * @return  string
      */
-    public function apply($fmt, &$argument) {
+    public function apply($fmt, $argument) {
       if (!is_scalar($argument)) {
         throw(new FormatException('Argument with type '.gettype($argument).' is not scalar'));
       }
Index: ../../../skeleton/text/format/MessageFormat.class.php
===================================================================
--- ../../../skeleton/text/format/MessageFormat.class.php	(revision 8952)
+++ ../../../skeleton/text/format/MessageFormat.class.php	(working copy)
@@ -82,7 +82,7 @@
      * @access  public
      * @return  &text.format.MessageFormat
      */
-    public function &getInstance() {
+    public function getInstance() {
       return parent::getInstance('MessageFormat');
     }
   
@@ -95,11 +95,11 @@
      * @return  &text.format.PrintfFormat formatter
      * @throws  lang.IllegalArgumentException 
      */
-    public function &setFormatter($alias, &$formatter) {
+    public function setFormatter($alias, $formatter) {
       if (!is('IFormat', $formatter)) {
         throw(new IllegalArgumentException('Formatter must be a text.format.Format'));
       }
-      $this->formatters[$alias]= &$formatter;
+      $this->formatters[$alias]= $formatter;
       return $this->formatters[$alias];
     }
     
@@ -122,13 +122,13 @@
      * @param   &mixed argument
      * @return  string
      */
-    public function apply($fmt, &$argument) {
+    public function apply($fmt, $argument) {
       static $instance;
       static $level= 0;
       
       if (FALSE === ($p= strpos($fmt, '{'))) return $fmt;
       if (!isset($instance)) {
-        $instance= &MessageFormat::getInstance();
+        $instance= MessageFormat::getInstance();
       }
       if (!is_array($argument)) $argument= array($argument);
       $level++;
Index: ../../../skeleton/text/format/MoneyFormat.class.php
===================================================================
--- ../../../skeleton/text/format/MoneyFormat.class.php	(revision 8952)
+++ ../../../skeleton/text/format/MoneyFormat.class.php	(working copy)
@@ -21,7 +21,7 @@
      * @access  public
      * @return  &text.format.MoneyFormat
      */
-    public function &getInstance() {
+    public function getInstance() {
       return parent::getInstance('MoneyFormat');
     }  
   
@@ -33,7 +33,7 @@
      * @param   &mixed argument
      * @return  string
      */
-    public function apply($fmt, &$argument) {
+    public function apply($fmt, $argument) {
       if (!function_exists('money_format')) {
         throw(new FormatException('money_format requires PHP >= 4.3.0'));
       }
Index: ../../../skeleton/text/format/IFormat.class.php
===================================================================
--- ../../../skeleton/text/format/IFormat.class.php	(revision 8952)
+++ ../../../skeleton/text/format/IFormat.class.php	(working copy)
@@ -31,7 +31,7 @@
      * @access  public
      * @return  &text.format.Format
      */
-    public function &getInstance($name) {
+    public function getInstance($name) {
       static $instance= array();
       
       if (!isset($instance[$name])) $instance[$name]= new $name();
@@ -47,7 +47,7 @@
      * @return  string
      * @throws  lang.IllegalAccessException
      */
-    public function apply($fmt, &$argument) { 
+    public function apply($fmt, $argument) { 
       throw(new IllegalAccessException('Calling apply method of base class text.format.Format'));
     }
     
Index: ../../../skeleton/text/format/NumberFormat.class.php
===================================================================
--- ../../../skeleton/text/format/NumberFormat.class.php	(revision 8952)
+++ ../../../skeleton/text/format/NumberFormat.class.php	(working copy)
@@ -22,7 +22,7 @@
      * @access  public
      * @return  &text.format.NumberFormat
      */
-    public function &getInstance() {
+    public function getInstance() {
       return parent::getInstance('NumberFormat');
     }  
   
@@ -35,7 +35,7 @@
      * @return  string
      * @throws  lang.FormatException
      */
-    public function apply($fmt, &$argument) {
+    public function apply($fmt, $argument) {
       if (!is_numeric($argument)) {
         throw(new FormatException('Argument '.$argument.' of type "'.gettype($argument).'" is not a number'));
       }
Index: ../../../skeleton/text/format/ChoiceFormat.class.php
===================================================================
--- ../../../skeleton/text/format/ChoiceFormat.class.php	(revision 8952)
+++ ../../../skeleton/text/format/ChoiceFormat.class.php	(working copy)
@@ -20,7 +20,7 @@
      * @access  public
      * @return  &text.format.ChoiceFormat
      */
-    public function &getInstance() {
+    public function getInstance() {
       return parent::getInstance('ChoiceFormat');
     }  
   
@@ -33,7 +33,7 @@
      * @return  string
      * @throws  lang.FormatException
      */
-    public function apply($fmt, &$argument) {
+    public function apply($fmt, $argument) {
       foreach (explode('|', $fmt) as $choice) {
         list($cmp, $val)= explode(':', $choice);
         if ($argument == $cmp) {
Index: ../../../skeleton/text/Collator.class.php
===================================================================
--- ../../../skeleton/text/Collator.class.php	(revision 8952)
+++ ../../../skeleton/text/Collator.class.php	(working copy)
@@ -32,7 +32,7 @@
      * @param   &util.Locale locale
      * @return  &text.Collator
      */
-    public function &getInstance(&$locale) {
+    public function getInstance($locale) {
       static $instance= array();
       
       $id= $locale->hashCode();
@@ -52,7 +52,7 @@
      * @param   &string b
      * @return  int
      */
-    public function compare(&$a, &$b) {
+    public function compare($a, $b) {
       setlocale(LC_COLLATE, $this->locale);
       return strcoll($a, $b);
     }
Index: ../../../skeleton/text/doclet/ThrowsTaglet.class.php
===================================================================
--- ../../../skeleton/text/doclet/ThrowsTaglet.class.php	(revision 8952)
+++ ../../../skeleton/text/doclet/ThrowsTaglet.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @param   string text
      * @return  &text.doclet.Tag
      */ 
-    public function &tagFrom(&$holder, $kind, $text) {
+    public function tagFrom($holder, $kind, $text) {
       list($class, $condition)= explode(' ', $text);
       return new ThrowsTag($holder->root->classNamed($class), $condition);
     }
Index: ../../../skeleton/text/doclet/SimpleTaglet.class.php
===================================================================
--- ../../../skeleton/text/doclet/SimpleTaglet.class.php	(revision 8952)
+++ ../../../skeleton/text/doclet/SimpleTaglet.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @param   string text
      * @return  &text.doclet.Tag
      */ 
-    public function &tagFrom(&$holder, $kind, $text) {
+    public function tagFrom($holder, $kind, $text) {
       return new Tag($kind, $text);
     }
 
Index: ../../../skeleton/text/doclet/ClassDoc.class.php
===================================================================
--- ../../../skeleton/text/doclet/ClassDoc.class.php	(revision 8952)
+++ ../../../skeleton/text/doclet/ClassDoc.class.php	(working copy)
@@ -44,10 +44,10 @@
      * @access  public
      * @param   &RootDoc root
      */
-    public function setRoot(&$root) {
+    public function setRoot($root) {
       parent::setRoot($root);
-      $this->interfaces->root= &$root;
-      $this->usedClasses->root= &$root;    
+      $this->interfaces->root= $root;
+      $this->usedClasses->root= $root;    
     }
     
     /**
@@ -72,12 +72,12 @@
 
       if ($this->type) return $this->type;    // Already known
 
-      $cmp= &$this;
+      $cmp= $this;
       do {
         if (isset($map[$cmp->qualifiedName])) {
           return $this->type= $map[$cmp->qualifiedName];
         }
-      } while ($cmp= &$cmp->superclass);
+      } while ($cmp= $cmp->superclass);
 
       return $this->type= ORDINARY_CLASS;
     }
@@ -118,11 +118,11 @@
      * @access  public
      * @return  bool
      */
-    public function subclassOf(&$classdoc) {
-      $cmp= &$this;
+    public function subclassOf($classdoc) {
+      $cmp= $this;
       do {
         if ($cmp->qualifiedName == $classdoc->qualifiedName) return TRUE;
-      } while ($cmp= &$cmp->superclass);
+      } while ($cmp= $cmp->superclass);
 
       return FALSE;
     }
Index: ../../../skeleton/text/doclet/ParamTaglet.class.php
===================================================================
--- ../../../skeleton/text/doclet/ParamTaglet.class.php	(revision 8952)
+++ ../../../skeleton/text/doclet/ParamTaglet.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @param   string text
      * @return  &text.doclet.Tag
      */ 
-    public function &tagFrom(&$holder, $kind, $text) {
+    public function tagFrom($holder, $kind, $text) {
       list($type, $name, $text)= explode(' ', $text, 3);
       return new ParamTag($type, $name, $text);
     }
Index: ../../../skeleton/text/doclet/ModelTaglet.class.php
===================================================================
--- ../../../skeleton/text/doclet/ModelTaglet.class.php	(revision 8952)
+++ ../../../skeleton/text/doclet/ModelTaglet.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @param   string text
      * @return  &text.doclet.Tag
      */ 
-    public function &tagFrom(&$holder, $kind, $text) {
+    public function tagFrom($holder, $kind, $text) {
       return new ModelTag($kind, $text);
     }
 
Index: ../../../skeleton/text/doclet/Doc.class.php
===================================================================
--- ../../../skeleton/text/doclet/Doc.class.php	(revision 8952)
+++ ../../../skeleton/text/doclet/Doc.class.php	(working copy)
@@ -24,8 +24,8 @@
      * @access  public
      * @param   &RootDoc root
      */
-    public function setRoot(&$root) {
-      $this->root= &$root;
+    public function setRoot($root) {
+      $this->root= $root;
     }
     
     /**
@@ -57,7 +57,7 @@
      */
     public function parseDetail($what) {
       if (!isset($this->detail)) {
-        $tm= &TagletManager::getInstance();
+        $tm= TagletManager::getInstance();
 
         $stripped= preg_replace('/[\r\n\s\t]+\* ?/', "\n", trim($this->rawComment, "/*\n\r\t "));
         $tagstart= FALSE === ($p= strpos($stripped, "\n@")) ? strlen($stripped)+ 1 : $p;
@@ -70,8 +70,8 @@
         if ($t= strtok(trim(substr($stripped, $tagstart)), '@')) do {
           list($kind, $rest)= explode(' ', trim($t), 2);
           
-          if ($tag= &$tm->make($this, $kind, trim($rest))) {
-            $this->detail['tags'][$kind][]= &$tag;
+          if ($tag= $tm->make($this, $kind, trim($rest))) {
+            $this->detail['tags'][$kind][]= $tag;
           }
         } while ($t= strtok('@'));
       }
Index: ../../../skeleton/text/doclet/RootDoc.class.php
===================================================================
--- ../../../skeleton/text/doclet/RootDoc.class.php	(revision 8952)
+++ ../../../skeleton/text/doclet/RootDoc.class.php	(working copy)
@@ -65,14 +65,14 @@
      * @return  bool
      * @throws  lang.Exception in case doclet setup fails
      */
-    public static function start(&$doclet, &$params) {
+    public static function start($doclet, $params) {
       $classes= array();
       $root= new RootDoc();
       
       // Separate options from classes
       $valid= $doclet->validOptions();
       for ($i= 1; $i < $params->count; $i++) {
-        $option= &$params->list[$i];
+        $option= $params->list[$i];
         
         if (0 == strncmp($option, '--', 2)) {        // Long: --foo / --foo=bar
           $p= strpos($option, '=');
@@ -100,7 +100,7 @@
       
       // Set up class iterator
       try {
-        $root->classes= &$doclet->iteratorFor($root, $classes);
+        $root->classes= $doclet->iteratorFor($root, $classes);
       } catch (Exception $e) {
         throw($e);
       }
@@ -146,7 +146,7 @@
      * @return  &ClassDoc
      * @throws  lang.IllegalArgumentException if class could not be found or parsed
      */
-    public function &classNamed($classname) {
+    public function classNamed($classname) {
       static $cache= array();
       static $map= array('uses' => T_USES, 'implements' => T_IMPLEMENTS, 'define' => T_DEFINE);
 
@@ -261,7 +261,7 @@
                 $classname
               )));
 
-              $doc->superclass= &$this->classNamed($lookup);
+              $doc->superclass= $this->classNamed($lookup);
               break;
 
             case ST_CLASS.'{':
@@ -328,7 +328,7 @@
                 $method->rawComment= $comment;
                 $method->annotations= $annotations;
               }
-              $doc->methods[]= &$method;
+              $doc->methods[]= $method;
               $comment= $annotations= NULL;
               $state= ST_FUNCTION;
               break;
@@ -419,7 +419,7 @@
         }
       }
       
-      return $cache[$classname]= &$doc;
+      return $cache[$classname]= $doc;
     }
   }
 ?>
Index: ../../../skeleton/text/doclet/Doclet.class.php
===================================================================
--- ../../../skeleton/text/doclet/Doclet.class.php	(revision 8952)
+++ ../../../skeleton/text/doclet/Doclet.class.php	(working copy)
@@ -34,7 +34,7 @@
      * @param   &text.doclet.RootDoc root
      * @return  bool TRUE on success
      */ 
-    public function start(&$root) {
+    public function start($root) {
       return TRUE;
     }
 
@@ -47,9 +47,9 @@
      * @return  &text.doclet.ClassIterator
      * @throws  lang.Exception in case the iterator cannot be created.
      */ 
-    public function &iteratorFor(&$root, $classes) {
+    public function iteratorFor($root, $classes) {
       $iterator= new ClassIterator($classes);
-      $iterator->root= &$root;
+      $iterator->root= $root;
       return $iterator;
     }
     
Index: ../../../skeleton/text/doclet/TagletManager.class.php
===================================================================
--- ../../../skeleton/text/doclet/TagletManager.class.php	(revision 8952)
+++ ../../../skeleton/text/doclet/TagletManager.class.php	(working copy)
@@ -29,7 +29,7 @@
      * @access  public
      */
     public static function __static() {
-      with ($self= &TagletManager::getInstance()); {
+      with ($self= TagletManager::getInstance()); {
         $self->taglets['see']= new SeeTaglet();
         $self->taglets['param']= new ParamTaglet();
         $self->taglets['return']= new ReturnTaglet();
@@ -38,14 +38,14 @@
         
         // Simple taglets
         $s= new SimpleTaglet();
-        $self->taglets['purpose']= &$s;
-        $self->taglets['access']= &$s;
-        $self->taglets['deprecated']= &$s;
-        $self->taglets['experimental']= &$s;
-        $self->taglets['platform']= &$s;
-        $self->taglets['test']= &$s;
-        $self->taglets['doc']= &$s;
-        $self->taglets['ext']= &$s;
+        $self->taglets['purpose']= $s;
+        $self->taglets['access']= $s;
+        $self->taglets['deprecated']= $s;
+        $self->taglets['experimental']= $s;
+        $self->taglets['platform']= $s;
+        $self->taglets['test']= $s;
+        $self->taglets['doc']= $s;
+        $self->taglets['ext']= $s;
       }
     }
 
@@ -56,7 +56,7 @@
      * @access  public
      * @return  &text.doclet.TagletManager
      */
-    public static function &getInstance() {
+    public static function getInstance() {
       static $instance= NULL;
       
       if (!$instance) $instance= new TagletManager();
@@ -70,8 +70,8 @@
      * @param   string kind
      * @param   &text.doclet.Taglet taglet
      */
-    public function addCustomTag($kind, &$taglet) {
-      $this->taglets[$kind]= &$taglet;
+    public function addCustomTag($kind, $taglet) {
+      $this->taglets[$kind]= $taglet;
     }
 
     /**
@@ -83,7 +83,7 @@
      * @param   string text
      * @return  &text.doclet.Tag
      */
-    public function &make(&$holder, $kind, $text) {
+    public function make($holder, $kind, $text) {
       if (!isset($this->taglets[$kind])) {
         throw(new IllegalArgumentException('Unknown taglet kind "'.$kind.'"'));
       }
Index: ../../../skeleton/text/doclet/SeeTaglet.class.php
===================================================================
--- ../../../skeleton/text/doclet/SeeTaglet.class.php	(revision 8952)
+++ ../../../skeleton/text/doclet/SeeTaglet.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @param   string text
      * @return  &text.doclet.Tag
      */ 
-    public function &tagFrom(&$holder, $kind, $text) {
+    public function tagFrom($holder, $kind, $text) {
       sscanf($text, '%[^:]://%s %[^$]', $scheme, $urn, $comment);
       return new SeeTag($kind, $comment, $scheme, $urn);
     }
Index: ../../../skeleton/text/doclet/ClassIterator.class.php
===================================================================
--- ../../../skeleton/text/doclet/ClassIterator.class.php	(revision 8952)
+++ ../../../skeleton/text/doclet/ClassIterator.class.php	(working copy)
@@ -55,7 +55,7 @@
      * @return  &mixed
      * @throws  util.NoSuchElementException when there are no more elements
      */
-    public function &next() {
+    public function next() {
       if (is_null($this->_key)) {
         throw(new NoSuchElementException('No more elements'));
       }
Index: ../../../skeleton/text/doclet/ReturnTaglet.class.php
===================================================================
--- ../../../skeleton/text/doclet/ReturnTaglet.class.php	(revision 8952)
+++ ../../../skeleton/text/doclet/ReturnTaglet.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @param   string text
      * @return  &text.doclet.Tag
      */ 
-    public function &tagFrom(&$holder, $kind, $text) {
+    public function tagFrom($holder, $kind, $text) {
       list($type, $label)= explode(' ', $text, 2);
       return new ReturnTag($type, $label);
     }
Index: ../../../skeleton/text/doclet/Taglet.class.php
===================================================================
--- ../../../skeleton/text/doclet/Taglet.class.php	(revision 8952)
+++ ../../../skeleton/text/doclet/Taglet.class.php	(working copy)
@@ -21,7 +21,7 @@
      * @param   string text
      * @return  &text.doclet.Tag
      */ 
-    public function &tagFrom(&$holder, $kind, $text);
+    public function tagFrom($holder, $kind, $text);
 
   }
 ?>
Index: ../../../skeleton/text/doclet/ThrowsTag.class.php
===================================================================
--- ../../../skeleton/text/doclet/ThrowsTag.class.php	(revision 8952)
+++ ../../../skeleton/text/doclet/ThrowsTag.class.php	(working copy)
@@ -23,9 +23,9 @@
      * @param   &ClassDoc exception
      * @param   string label
      */
-    public function __construct(&$exception, $label) {
+    public function __construct($exception, $label) {
       parent::__construct('throws', $label);
-      $this->exception= &$exception;
+      $this->exception= $exception;
     }
   }
 ?>
Index: ../../../skeleton/text/CSVGenerator.class.php
===================================================================
--- ../../../skeleton/text/CSVGenerator.class.php	(revision 8952)
+++ ../../../skeleton/text/CSVGenerator.class.php	(working copy)
@@ -38,10 +38,10 @@
      * @param   stream stream
      * @return  bool success
      */    
-    public function setOutputStream(&$stream) {
+    public function setOutputStream($stream) {
       try {
         if (!$stream->isOpen()) $stream->open (STREAM_MODE_WRITE);
-        $this->stream= &$stream;
+        $this->stream= $stream;
       } catch (Exception $e) {
         throw ($e);
       }
Index: ../../../skeleton/text/parser/CSVParser.class.php
===================================================================
--- ../../../skeleton/text/parser/CSVParser.class.php	(revision 8952)
+++ ../../../skeleton/text/parser/CSVParser.class.php	(working copy)
@@ -30,7 +30,7 @@
      * @param   string delim delimiter
      * @return  string token
      */
-    public function _strtok(&$string, $delim) {
+    public function _strtok($string, $delim) {
 
       // Note: don't use builtin strtok, because it does ignore an
       // empty field (two delimiters in a row). We need this information.
@@ -54,13 +54,13 @@
      * @access  public
      * @param   Stream stream
      */    
-    public function setInputStream(&$stream) {
+    public function setInputStream($stream) {
       try {
         if (!$stream->isOpen()) $stream->open();
       } catch (IOException $e) {
         throw ($e);
       }
-      $this->stream= &$stream;
+      $this->stream= $stream;
     }
     
     /**
@@ -142,7 +142,7 @@
      * @access  private
      * @return  string buffer
      */    
-    public function &_getNextRecord() {
+    public function _getNextRecord() {
       try {
         if ($this->stream->eof()) return FALSE;
 
Index: ../../../skeleton/text/parser/DaemonMessage.class.php
===================================================================
--- ../../../skeleton/text/parser/DaemonMessage.class.php	(revision 8952)
+++ ../../../skeleton/text/parser/DaemonMessage.class.php	(working copy)
@@ -41,8 +41,8 @@
      * @access  public
      * @param   &peer.mail.InternetAddress r
      */
-    public function setFailedRecipient(&$r) {
-      $this->failed= &$r;
+    public function setFailedRecipient($r) {
+      $this->failed= $r;
     }
     
     /**
@@ -51,7 +51,7 @@
      * @access  public
      * @return  &peer.mail.InternetAddress
      */
-    public function &getFailedRecipient() {
+    public function getFailedRecipient() {
       return $this->failed;
     }
     
Index: ../../../skeleton/text/parser/DateParser.class.php
===================================================================
--- ../../../skeleton/text/parser/DateParser.class.php	(revision 8952)
+++ ../../../skeleton/text/parser/DateParser.class.php	(working copy)
@@ -54,7 +54,7 @@
      * @return  &util.Date
      * @throws  lang.FormatException in case the date could not be parsed
      */
-    public static function &parse($s) {
+    public static function parse($s) {
       if (empty($s)) {
       
         // Border case
@@ -87,10 +87,10 @@
           try {
             if (
               ($tz= new TimeZone($matches[7])) &&
-              ($lc= &TimeZone::getLocal())
+              ($lc= TimeZone::getLocal())
             ) {
             
-              $date= &$lc->convertDate(new Date($stamp), $tz);
+              $date= $lc->convertDate(new Date($stamp), $tz);
               $stamp= $date->getTime();
             }
           } catch (IllegalArgumentException $e) {
Index: ../../../skeleton/text/parser/InternetAddressParser.class.php
===================================================================
--- ../../../skeleton/text/parser/InternetAddressParser.class.php	(revision 8952)
+++ ../../../skeleton/text/parser/InternetAddressParser.class.php	(working copy)
@@ -35,7 +35,7 @@
      * @return  &InternetAddress[]
      * @throws  lang.FormatException in case the string is malformed
      */
-    public function &parse($str) {
+    public function parse($str) {
       $result= array();
       $st= new StringTokenizer($str, ',');
       
@@ -45,7 +45,7 @@
         // No " in this string, so this contains one address
         if (FALSE === ($pos= strpos($tok, '"'))) {
           try {
-            $result[]= &InternetAddress::fromString($tok);
+            $result[]= InternetAddress::fromString($tok);
           } catch (FormatException $e) {
             throw($e);
           }
@@ -70,7 +70,7 @@
         }
 
         try {
-          $result[]= &InternetAddress::fromString($tok);
+          $result[]= InternetAddress::fromString($tok);
         } catch (FormatException $e) {
           throw($e);
         }
Index: ../../../skeleton/text/parser/VFormatParser.class.php
===================================================================
--- ../../../skeleton/text/parser/VFormatParser.class.php	(revision 8952)
+++ ../../../skeleton/text/parser/VFormatParser.class.php	(working copy)
@@ -53,7 +53,7 @@
      * @param   function func
      */
     public function setDefaultHandler($func) {
-      $this->handlers[NULL]= &$func;
+      $this->handlers[NULL]= $func;
     }
     
     /**
@@ -64,7 +64,7 @@
      * @param   function func
      */
     public function setHandler($element, $func) {
-      $this->handlers[$element]= &$func;
+      $this->handlers[$element]= $func;
     }
     
     /**
@@ -115,7 +115,7 @@
      * @return  bool success
      * @throws  lang.FormatException
      */
-    public function parse(&$stream) {
+    public function parse($stream) {
       $stream->open(STREAM_MODE_READ);
       if (!($result= $this->_checkHeader($l= $stream->readLine()))) {
         $stream->close();
@@ -210,7 +210,7 @@
           $val->{$pname}= $pvalue;
         }
         
-        $value= &$val;
+        $value= $val;
       } else {
         $kargs= array(strtoupper($key));
       }
Index: ../../../skeleton/text/parser/DaemonMailParser.class.php
===================================================================
--- ../../../skeleton/text/parser/DaemonMailParser.class.php	(revision 8952)
+++ ../../../skeleton/text/parser/DaemonMailParser.class.php	(working copy)
@@ -63,7 +63,7 @@
      * @param   function func
      */
     public function addHeaderFound($header, $func) {
-      $this->_hcb[]= array($header, NULL, &$func);
+      $this->_hcb[]= array($header, NULL, $func);
     }
 
     /**
@@ -75,7 +75,7 @@
      * @param   function func
      */
     public function addHeaderMatch($header, $regex, $func) {
-      $this->_hcb[]= array($header, $regex, &$func);
+      $this->_hcb[]= array($header, $regex, $func);
     }
     
     /**
@@ -97,7 +97,7 @@
      * @param   string str
      * @param   &text.parser.DaemonMessage daemonmessage
      */
-    public function _parseDeliveryStatus($str, &$daemonmessage) {
+    public function _parseDeliveryStatus($str, $daemonmessage) {
       $l= strtok(chop($str), "\n");
       $r= array();
       do {
@@ -148,7 +148,7 @@
      * @throws  lang.FormatException
      * @throws  lang.IllegalArgumentException
      */
-    public function parse(&$message) {
+    public function parse($message) {
       static $magic= array(
         '550'                    => DAEMON_GENERIC,
         '5.5.0'                  => DAEMON_GENERIC,
@@ -186,10 +186,10 @@
       // Set up daemon mail object
       $daemonmessage= new DaemonMessage();
       $daemonmessage->setFrom($message->getFrom());
-      $daemonmessage->date= &$message->date;
+      $daemonmessage->date= $message->date;
       $daemonmessage->headers= $message->headers;
       $daemonmessage->subject= $message->subject;
-      $daemonmessage->to= &$message->to;
+      $daemonmessage->to= $message->to;
       
       // Is there a header named "X-Failed-Recipients"?
       if (NULL !== ($rcpt= $message->getHeader('X-Failed-Recipients'))) {
@@ -309,7 +309,7 @@
         $body= NULL;
         $daemonmessage->details['Daemon-Type']= DAEMON_TYPE_MULTIPART;
         
-        while ($part= &$message->getPart()) {
+        while ($part= $message->getPart()) {
           
           switch (strtolower($part->getContentType())) {
             case 'message/delivery-status':
@@ -454,7 +454,7 @@
                 (NULL == $defines[1]) ||
                 (preg_match($defines[1], $v, $regs))
               ) {
-                call_user_func_array($defines[2], array(&$daemonmessage, $v, $regs));
+                call_user_func_array($defines[2], array($daemonmessage, $v, $regs));
               }
             }
             break;
Index: ../../../skeleton/text/PHPTokenizer.class.php
===================================================================
--- ../../../skeleton/text/PHPTokenizer.class.php	(revision 8952)
+++ ../../../skeleton/text/PHPTokenizer.class.php	(working copy)
@@ -155,8 +155,8 @@
         do {
           $CAT && $CAT->debugf('[%04x:%-18s] >>> %s "%s"', $i, $name, $this->getTokenName($token), $cdata);
           
-          $rule= &$this->rules[$name];
-          $expect= &$rule['match'][$rule['expect']];
+          $rule= $this->rules[$name];
+          $expect= $rule['match'][$rule['expect']];
           $s= sizeof($rule['match']);
           $f= FALSE;
 
Index: ../../../skeleton/text/encode/UUCode.class.php
===================================================================
--- ../../../skeleton/text/encode/UUCode.class.php	(revision 8952)
+++ ../../../skeleton/text/encode/UUCode.class.php	(working copy)
@@ -37,13 +37,13 @@
       $out= '';
       $offset= 0;
       while ($chunk= substr($str, $offset, 0x2D)) {
-        $out.= chr((strlen($chunk) & 0x3F) + 0x20);
+        $out.= chr((strlen($chunk)  0x3F) + 0x20);
         for ($i= 0, $s= strlen($chunk); $i < $s; $i+= 3) {
           $out.= strtr( 
-            chr(((ord($chunk{$i}) >> 2) & 0x3F) + 0x20).
-            chr(((((ord($chunk{$i}) << 4) & 0x30) | ((ord($chunk{$i+ 1}) >> 4) & 0x0F)) & 0x3F) + 0x20).
-            chr(((((ord($chunk{$i+ 1}) << 2) & 0x3C) | ((ord($chunk{$i+ 2}) >> 6) & 0x03)) & 0x3F) + 0x20).
-            chr(((ord($chunk{$i+ 2}) & 0x3F) & 0x3F) + 0x20),
+            chr(((ord($chunk{$i}) >> 2)  0x3F) + 0x20).
+            chr(((((ord($chunk{$i}) << 4)  0x30) | ((ord($chunk{$i+ 1}) >> 4)  0x0F))  0x3F) + 0x20).
+            chr(((((ord($chunk{$i+ 1}) << 2)  0x3C) | ((ord($chunk{$i+ 2}) >> 6)  0x03))  0x3F) + 0x20).
+            chr(((ord($chunk{$i+ 2})  0x3F)  0x3F) + 0x20),
             ' ', '`'
           );
         }
@@ -68,9 +68,9 @@
         if ('`' == $chunk{0}) break;
         for ($i= 1, $s= strlen($chunk); $i < $s; $i+= 4) {
           $out.= (
-            chr((((ord($chunk{$i}) - 0x20) & 0x3F) << 2) | (((ord($chunk{$i+ 1}) - 0x20) & 0x3F) >> 4)).
-            chr((((ord($chunk{$i+ 1}) - 0x20) & 0x3F) << 4) | (((ord($chunk{$i+ 2}) - 0x20) & 0x3F) >> 2)).
-            chr((((ord($chunk{$i+ 2}) - 0x20) & 0x3F) << 6) | ((ord($chunk{$i+ 3}) - 0x20) & 0x3F))
+            chr((((ord($chunk{$i}) - 0x20)  0x3F) << 2) | (((ord($chunk{$i+ 1}) - 0x20)  0x3F) >> 4)).
+            chr((((ord($chunk{$i+ 1}) - 0x20)  0x3F) << 4) | (((ord($chunk{$i+ 2}) - 0x20)  0x3F) >> 2)).
+            chr((((ord($chunk{$i+ 2}) - 0x20)  0x3F) << 6) | ((ord($chunk{$i+ 3}) - 0x20)  0x3F))
           );
         }
       } while ($chunk= strtok("\n"));
Index: ../../../skeleton/text/PHPParser.class.php
===================================================================
--- ../../../skeleton/text/PHPParser.class.php	(revision 8952)
+++ ../../../skeleton/text/PHPParser.class.php	(working copy)
@@ -53,8 +53,8 @@
      * @access  public
      * @param   &util.log.LogCategory log
      */
-    public function setTrace(&$log) {
-      $this->log= &$log;
+    public function setTrace($log) {
+      $this->log= $log;
     }    
     
     /**
@@ -84,7 +84,7 @@
           // No active 'workspace' => continue
           if (empty($currentSpace)) continue;
 
-          $s= &$currentSpace[sizeof($currentSpace)- 1];
+          $s= $currentSpace[sizeof($currentSpace)- 1];
           
           switch ($token) {
             case '{':
@@ -166,13 +166,13 @@
                 $f->braces= 0;
                 
                 if (!empty($currentClass)) {
-                  $c= &$currentClass[sizeof($currentClass)- 1];
-                  $c->functions[]= &$f;
+                  $c= $currentClass[sizeof($currentClass)- 1];
+                  $c->functions[]= $f;
                 } else {
-                  $this->functions[]= &$f;
+                  $this->functions[]= $f;
                 }
                 
-                $currentSpace[]= &$f;
+                $currentSpace[]= $f;
                 
                 $mode= PHPPARSER_MODE_UNDEF;
                 break;
@@ -195,9 +195,9 @@
                 $c->braces= 0;
                 $c->functions= array();
                 
-                $this->classes[]= &$c;
-                $currentClass[]= &$c;
-                $currentSpace[]= &$c;
+                $this->classes[]= $c;
+                $currentClass[]= $c;
+                $currentSpace[]= $c;
                 
                 $mode= PHPPARSER_MODE_UNDEF;
                 break;
@@ -214,7 +214,7 @@
                 $this->log && $this->log->info ('extends', $data, 'at line', $lineno);
                 
                 // Get last found class from stack
-                $c= &$currentClass[sizeof($currentClass) - 1];
+                $c= $currentClass[sizeof($currentClass) - 1];
                 $c->extends= $data;
                 $mode= PHPPARSER_MODE_UNDEF;
                 break;
Index: ../../../skeleton/text/StringUtil.class.php
===================================================================
--- ../../../skeleton/text/StringUtil.class.php	(revision 8952)
+++ ../../../skeleton/text/StringUtil.class.php	(working copy)
@@ -24,7 +24,7 @@
      * @param   int len default 1
      * @return  string
      */
-    public static function delete(&$string, $pos, $len= 1) {
+    public static function delete($string, $pos, $len= 1) {
       $string= substr($string, 0, $pos).substr($string, $pos+ 1);
       return $string;
     }
@@ -41,7 +41,7 @@
      * @param   char char
      * @return  string
      */
-    public static function insert(&$string, $pos, $char) {
+    public static function insert($string, $pos, $char) {
       $string= substr($string, 0, $pos).$char.substr($string, $pos);
       return $string;
     }
Index: ../../../skeleton/peer/http/HttpRequest.class.php
===================================================================
--- ../../../skeleton/peer/http/HttpRequest.class.php	(revision 8952)
+++ ../../../skeleton/peer/http/HttpRequest.class.php	(working copy)
@@ -37,8 +37,8 @@
      * @access  public
      * @param   &peer.URL url object
      */
-    public function __construct(&$url) {
-      $this->url= &$url;
+    public function __construct($url) {
+      $this->url= $url;
       if ($url->getUser() && $url->getPassword()) {
         $this->headers['Authorization']= 'Basic '.base64_encode($url->getUser().':'.$url->getPassword());
       }
@@ -63,7 +63,7 @@
      */
     public function setParameters($p) {
       if (is('RequestData', $p)) {
-        $this->parameters= &$p;
+        $this->parameters= $p;
       } else if (is_string($p)) {
         parse_str($p, $this->parameters); 
       } else {
@@ -155,7 +155,7 @@
      * @access  public
      * @return  &peer.http.HttpResponse response object
      */
-    public function &send($timeout= 60, $connecttimeout= 2.0) {
+    public function send($timeout= 60, $connecttimeout= 2.0) {
       $s= new Socket($this->url->getHost(), $this->url->getPort(80));
       $s->setTimeout($timeout);
       
Index: ../../../skeleton/peer/http/HttpsRequest.class.php
===================================================================
--- ../../../skeleton/peer/http/HttpsRequest.class.php	(revision 8952)
+++ ../../../skeleton/peer/http/HttpsRequest.class.php	(working copy)
@@ -21,7 +21,7 @@
      * @access  public
      * @return  &peer.http.HttpsResponse response object
      */
-    public function &send($timeout= 60) {
+    public function send($timeout= 60) {
       $curl= curl_init($this->url->getURL());
       curl_setopt($curl, CURLOPT_CUSTOMREQUEST, $this->getRequestString());
       curl_setopt($curl, CURLOPT_HEADER, 1);
Index: ../../../skeleton/peer/http/HttpUtil.class.php
===================================================================
--- ../../../skeleton/peer/http/HttpUtil.class.php	(revision 8952)
+++ ../../../skeleton/peer/http/HttpUtil.class.php	(working copy)
@@ -46,11 +46,11 @@
      * @return  string
      * @throws  peer.http.UnexpectedResponseException
      */
-    public static function get(&$connection, $params= array(), $headers= array()) {
+    public static function get($connection, $params= array(), $headers= array()) {
       $redirected= 0;
       do {
         try {
-          $response= &$connection->get($params, $headers);
+          $response= $connection->get($params, $headers);
         } catch (Exception $e) {
           throw(new UnexpectedResponseException(
             $e->getMessage(),
@@ -82,7 +82,7 @@
               ));
             }
             $redirected++;
-            $connection->request= &HttpRequestFactory::factory(new URL($loc));
+            $connection->request= HttpRequestFactory::factory(new URL($loc));
             break;
 
           default:              // Any other code
Index: ../../../skeleton/peer/http/HttpResponse.class.php
===================================================================
--- ../../../skeleton/peer/http/HttpResponse.class.php	(revision 8952)
+++ ../../../skeleton/peer/http/HttpResponse.class.php	(working copy)
@@ -29,8 +29,8 @@
      * @access  public
      * @param   &lang.Object stream
      */
-    public function __construct(&$stream) {
-      $this->stream= &$stream;
+    public function __construct($stream) {
+      $this->stream= $stream;
       
     }
 
Index: ../../../skeleton/peer/http/HttpConnection.class.php
===================================================================
--- ../../../skeleton/peer/http/HttpConnection.class.php	(revision 8952)
+++ ../../../skeleton/peer/http/HttpConnection.class.php	(working copy)
@@ -67,8 +67,8 @@
      * @access  protected
      * @param   &peer.URL object
      */
-    public function _createRequest(&$url) {
-      $this->request= &HttpRequestFactory::factory($url);
+    public function _createRequest($url) {
+      $this->request= HttpRequestFactory::factory($url);
     }
 
     /**
@@ -122,7 +122,7 @@
      * @throws  io.IOException
      * @throws  lang.IllegalAccessException
      */
-    public function &request($method, $arg, $headers= array()) {
+    public function request($method, $arg, $headers= array()) {
       if (!$this->request) throw(new IllegalAccessException(
         'No request object returned from HttpRequestFactory::factory'
       ));
@@ -132,7 +132,7 @@
       $this->request->addHeaders($headers);
       
       try {
-        $this->response= &$this->request->send($this->_timeout, $this->_ctimeout);
+        $this->response= $this->request->send($this->_timeout, $this->_ctimeout);
       } catch (Exception $e) {
         throw($e);
       }
@@ -148,7 +148,7 @@
      * @param   array headers default array()
      * @return  &peer.http.HttpResponse response object
      */
-    public function &get($arg= NULL, $headers= array()) {
+    public function get($arg= NULL, $headers= array()) {
       return $this->request(HTTP_GET, $arg, $headers);
     }
     
@@ -160,7 +160,7 @@
      * @param   array headers default array()
      * @return  &peer.http.HttpResponse response object
      */
-    public function &head($arg= NULL, $headers= array()) {
+    public function head($arg= NULL, $headers= array()) {
       return $this->request(HTTP_HEAD, $arg, $headers);
     }
     
@@ -172,7 +172,7 @@
      * @param   array headers default array()
      * @return  &peer.http.HttpResponse response object
      */
-    public function &post($arg= NULL, $headers= array()) {
+    public function post($arg= NULL, $headers= array()) {
       return $this->request(HTTP_POST, $arg, $headers);
     }
     
@@ -184,7 +184,7 @@
      * @param   array headers default array()
      * @return  &peer.http.HttpResponse response object
      */
-    public function &put($arg= NULL, $headers= array()) {
+    public function put($arg= NULL, $headers= array()) {
       return $this->request(HTTP_PUT, new RequestData($arg), $headers);
     }
   }
Index: ../../../skeleton/peer/http/HttpRequestFactory.class.php
===================================================================
--- ../../../skeleton/peer/http/HttpRequestFactory.class.php	(revision 8952)
+++ ../../../skeleton/peer/http/HttpRequestFactory.class.php	(working copy)
@@ -26,7 +26,7 @@
      * @return  &lang.Object a request object
      * @throws  lang.IllegalArgumentException in case the scheme is not supported
      */
-    public function &factory(&$url) {
+    public function factory($url) {
       switch ($url->getScheme()) {
         case 'http':
           return new HttpRequest($url);
Index: ../../../skeleton/peer/ldap/LDAPSearchResult.class.php
===================================================================
--- ../../../skeleton/peer/ldap/LDAPSearchResult.class.php	(revision 8952)
+++ ../../../skeleton/peer/ldap/LDAPSearchResult.class.php	(working copy)
@@ -25,7 +25,7 @@
      * @access  public
      * @param   array result returnvalue of ldap_get_entries()
      */
-    public function __construct(&$hdl, $res) {
+    public function __construct($hdl, $res) {
       $this->data= ldap_get_entries($hdl, $res);
       $this->size= $this->data['count'];
       ldap_free_result($res);
@@ -47,7 +47,7 @@
      * @access  public
      * @return  &mixed entry or FALSE if there is no such entry
      */
-    public function &getFirstEntry() {
+    public function getFirstEntry() {
       return $this->getEntry($this->_offset= 0);
     }
     
@@ -59,7 +59,7 @@
      * @return  &mixed entry or FALSE if none exists by this offset
      * @throws  lang.IllegalStateException in case no search has been performed before
      */
-    public function &getEntry($offset) {
+    public function getEntry($offset) {
       if (NULL == $this->data) {
         throw(new IllegalStateException('Please perform a search first'));
       }
@@ -79,7 +79,7 @@
      * @access  public
      * @return  &mixed entry or FALSE if there are none more
      */
-    public function &getNextEntry() {
+    public function getNextEntry() {
       return $this->getEntry(++$this->_offset);
     }
 
Index: ../../../skeleton/peer/ldap/LDAPClient.class.php
===================================================================
--- ../../../skeleton/peer/ldap/LDAPClient.class.php	(revision 8952)
+++ ../../../skeleton/peer/ldap/LDAPClient.class.php	(working copy)
@@ -194,7 +194,7 @@
      * @throws  peer.ldap.LDAPException
      * @see     php://ldap_search
      */
-    public function &search() {
+    public function search() {
       $args= func_get_args();
       array_unshift($args, $this->_hdl);
       if (FALSE === ($res= call_user_func_array('ldap_search', $args))) {
@@ -211,7 +211,7 @@
      * @param   &peer.ldap.LDAPQuery filter
      * @return  &peer.ldap.LDAPSearchResult search result object
      */
-    public function &searchBy(&$filter) {
+    public function searchBy($filter) {
       static $methods= array(
         LDAP_SCOPE_BASE     => 'ldap_read',
         LDAP_SCOPE_ONELEVEL => 'ldap_list',
@@ -221,7 +221,7 @@
       if (empty($methods[$filter->getScope()]))
         throw(new IllegalArgumentException('Scope '.$args[0].' not supported'));
       
-      if (FALSE === ($res= &call_user_func_array(
+      if (FALSE === ($res= call_user_func_array(
         $methods[$filter->getScope()], array(
         $this->_hdl,
         $filter->getBase(),
@@ -258,7 +258,7 @@
      * @throws  peer.ldap.LDAPException
      * @see     php://ldap_search
      */
-    public function &searchScope() {
+    public function searchScope() {
       $args= func_get_args();
       switch ($args[0]) {
         case LDAP_SCOPE_BASE: $func= 'ldap_read'; break;
@@ -283,7 +283,7 @@
      * @throws  lang.IllegalArgumentException
      * @throws  peer.ldap.LDAPException
      */
-    public function &read(&$entry) {
+    public function read($entry) {
       if (!is('LDAPEntry', $entry)) {
         throw(new IllegalArgumentException('Given parameter is not an LDAPEntry object'));
       }
@@ -308,7 +308,7 @@
      * @param   &peer.ldap.LDAPEntry entry specifying the dn
      * @return  bool TRUE if the entry exists
      */
-    public function exists(&$entry) {
+    public function exists($entry) {
       if (!is('LDAPEntry', $entry)) {
         throw(new IllegalArgumentException('Given parameter is not an LDAPEntry object'));
       }
@@ -337,7 +337,7 @@
      * @param   &mixed v
      * @return  string encoded entry
      */
-    public function _encode(&$v) {
+    public function _encode($v) {
       if (is_array($v)) {
         foreach (array_keys($v) as $i) $v[$i]= $this->_encode($v[$i]);
         return $v;
@@ -354,7 +354,7 @@
      * @throws  lang.IllegalArgumentException when entry parameter is not an LDAPEntry object
      * @throws  peer.ldap.LDAPException when an error occurs during adding the entry
      */
-    public function add(&$entry) {
+    public function add($entry) {
       if (!is('LDAPEntry', $entry)) {
         throw(new IllegalArgumentException('Given parameter is not an LDAPEntry object'));
       } 
@@ -363,7 +363,7 @@
       if (NULL == ($res= ldap_add(
         $this->_hdl, 
         $entry->getDN(), 
-        array_map(array(&$this, '_encode'), $entry->getAttributes())
+        array_map(array($this, '_encode'), $entry->getAttributes())
       ))) {
         throw(new LDAPException('Add for "'.$entry->getDN().'" failed', ldap_errno($this->_hdl)));
       }
@@ -383,7 +383,7 @@
      * @throws  lang.IllegalArgumentException when entry parameter is not an LDAPEntry object
      * @throws  peer.ldap.LDAPException when an error occurs during adding the entry
      */
-    public function modify(&$entry) {
+    public function modify($entry) {
       if (!is('LDAPEntry', $entry)) {
         throw(new IllegalArgumentException('Given parameter is not an LDAPEntry object'));
       } 
@@ -391,7 +391,7 @@
       if (FALSE == ($res= ldap_modify(
         $this->_hdl,
         $entry->getDN(),
-        array_map(array(&$this, '_encode'), $entry->getAttributes())
+        array_map(array($this, '_encode'), $entry->getAttributes())
       ))) {
         throw(new LDAPException('Modify for "'.$entry->getDN().'" failed', ldap_errno($this->_hdl)));
       }
@@ -408,7 +408,7 @@
      * @throws  lang.IllegalArgumentException when entry parameter is not an LDAPEntry object
      * @throws  peer.ldap.LDAPException when an error occurs during adding the entry
      */
-    public function delete(&$entry) {
+    public function delete($entry) {
       if (!is('LDAPEntry', $entry)) {
         throw(new IllegalArgumentException('Given parameter is not an LDAPEntry object'));
       } 
Index: ../../../skeleton/peer/ldap/LDAPEntry.class.php
===================================================================
--- ../../../skeleton/peer/ldap/LDAPEntry.class.php	(revision 8952)
+++ ../../../skeleton/peer/ldap/LDAPEntry.class.php	(working copy)
@@ -36,7 +36,7 @@
      * @param   &mixed v
      * @return  string decoded entry
      */
-    public function _decode(&$v) {
+    public function _decode($v) {
       if (is_array($v)) for ($i= 0, $m= sizeof($v); $i < $m; $i++) {
         $v[$i]= $this->_decode($v[$i]);
         return $v;
@@ -53,14 +53,14 @@
      * @param   &mixed data return value from ldap_* functions
      * @return  &peer.ldap.LDAPEntry object
      */
-    public static function &fromData(&$data) {
+    public static function fromData($data) {
       $e= new LDAPEntry($data['dn']);
       unset($data['dn']);
       foreach (array_keys($data) as $key) {
         if ('count' == $key || is_int($key)) continue;
         
         if (is_array($data[$key])) {
-          $e->attributes[$key]= array_map(array(&$e, '_decode'), $data[$key]);
+          $e->attributes[$key]= array_map(array($e, '_decode'), $data[$key]);
         } else {
           $e->attributes[$key]= $e->_decode($data[$key]);
         }
Index: ../../../skeleton/peer/ldap/util/LDIFWriter.class.php
===================================================================
--- ../../../skeleton/peer/ldap/util/LDIFWriter.class.php	(revision 8952)
+++ ../../../skeleton/peer/ldap/util/LDIFWriter.class.php	(working copy)
@@ -50,8 +50,8 @@
      * @access  public
      * @param   &io.Stream stream
      */
-    public function __construct(&$stream) {
-      $this->stream= &$stream;
+    public function __construct($stream) {
+      $this->stream= $stream;
       
     }
     
@@ -73,7 +73,7 @@
      * @param   &peer.ldap.LDAPEntry entry
      * @throws  lang.IllegalArgumentException in case the parameter is not an LDAPEntry object
      */
-    public function write(&$entry) {
+    public function write($entry) {
       if (!is('LDAPEntry', $entry)) {
         throw(new IllegalArgumentException(
           'Parameter entry is expected to be a peer.ldap.LDAPEntry object (given: '.xp::typeOf($entry).')'
Index: ../../../skeleton/peer/Header.class.php
===================================================================
--- ../../../skeleton/peer/Header.class.php	(revision 8952)
+++ ../../../skeleton/peer/Header.class.php	(working copy)
@@ -76,7 +76,7 @@
      * @param   string str
      * @return  &peer.Header header object
      */
-    public static function &fromString($str) {
+    public static function fromString($str) {
       list($k, $v)= explode(': ', $str, 2);
       return new Header($k, $v);
     }
Index: ../../../skeleton/peer/mail/MimeMessage.class.php
===================================================================
--- ../../../skeleton/peer/mail/MimeMessage.class.php	(revision 8952)
+++ ../../../skeleton/peer/mail/MimeMessage.class.php	(working copy)
@@ -110,13 +110,13 @@
      * @return  &peer.mail.MimePart the part added
      * @throws  lang.IllegalArgumentException if part argument is not a peer.mail.MimePart
      */
-    public function &addPart(&$part) {
+    public function addPart($part) {
       if (!is('MimePart', $part)) {
         throw(new IllegalArgumentException(
           'Parameter part is not a peer.mail.MimePart (given: '.xp::typeOf($part).')'
         ));
       }
-      $this->parts[]= &$part;
+      $this->parts[]= $part;
       return $part;
     }
     
@@ -187,7 +187,7 @@
      * @param   &array p structure parts as retrieved from cclient lib
      * @param   string id default '' part id
      */
-    public function _recurseparts(&$parts, &$p, $id= '') {
+    public function _recurseparts($parts, $p, $id= '') {
       static $types= array(
         'text',
         'multipart',
@@ -242,8 +242,8 @@
           $part->body= $this->folder->getMessagePart($this->uid, $pid);
         }
         
-        $part->folder= &$this->folder;
-        $parts[]= &$part;
+        $part->folder= $this->folder;
+        $parts[]= $part;
       }
     }
     
@@ -254,7 +254,7 @@
      * @param   int id default -1
      * @return  &peer.mail.MimePart part
      */
-    public function &getPart($id= -1) {
+    public function getPart($id= -1) {
       $this->_parts();
       
       // Iterative use
@@ -278,7 +278,7 @@
     public function _parts() {
       if ((NULL === $this->folder) || (!empty($this->parts))) return FALSE;
       
-      $struct= &$this->folder->getMessageStruct($this->uid);
+      $struct= $this->folder->getMessageStruct($this->uid);
       if (!$struct->parts) {
         return FALSE;
       }
Index: ../../../skeleton/peer/mail/MailFolder.class.php
===================================================================
--- ../../../skeleton/peer/mail/MailFolder.class.php	(revision 8952)
+++ ../../../skeleton/peer/mail/MailFolder.class.php	(working copy)
@@ -29,9 +29,9 @@
      * @param   &peer.mail.store.MailStore store
      * @param   string name default ''
      */  
-    public function __construct(&$store, $name= '') {
+    public function __construct($store, $name= '') {
       $this->name= $name;
-      $this->store= &$store;
+      $this->store= $store;
       
     }
   
@@ -107,7 +107,7 @@
      * @param   mixed* msgnums
      * @return  &peer.mail.Message[]
      */
-    public function &getMessages() { 
+    public function getMessages() { 
       $args= func_get_args();
       array_unshift($args, $this);
       return call_user_func_array(array($this->store, 'getMessages'), $args);
@@ -129,7 +129,7 @@
      * @param   &peer.mail.Message msg
      * @return  bool success
      */
-    public function deleteMessage(&$msg) {
+    public function deleteMessage($msg) {
       return $this->store->deleteMessage($this, $msg);
     }
 
@@ -140,7 +140,7 @@
      * @param   &peer.mail.Message msg
      * @return  bool success
      */
-    public function undeleteMessage(&$msg) {
+    public function undeleteMessage($msg) {
       return $this->store->undeleteMessage($this, $msg);
     }
     
@@ -151,7 +151,7 @@
      * @param   &peer.mail.Message msg
      * @return  bool success
      */
-    public function moveMessage(&$msg) {
+    public function moveMessage($msg) {
       return $this->store->moveMessage($this, $msg);
     }
     
@@ -170,9 +170,9 @@
      * @access  public
      * @return  &peer.mail.Message or FALSE to indicate we reached the last mail
      */
-    public function &getMessage() {
+    public function getMessage() {
       $this->_ofs++;
-      $ret= &$this->store->getMessages($this, $this->_ofs);
+      $ret= $this->store->getMessages($this, $this->_ofs);
       return $ret[0];
     }
 
@@ -184,7 +184,7 @@
      * @param   string part
      * @return  &int
      */
-    public function &getMessagePart($uid, $part) { 
+    public function getMessagePart($uid, $part) { 
       return $this->store->getMessagePart($this, $uid, $part);
     }
 
@@ -195,7 +195,7 @@
      * @param   string uid
      * @return  &object
      */
-    public function &getMessageStruct($uid) { 
+    public function getMessageStruct($uid) { 
       return $this->store->getMessageStruct($this, $uid);
     }
 
Index: ../../../skeleton/peer/mail/InternetAddress.class.php
===================================================================
--- ../../../skeleton/peer/mail/InternetAddress.class.php	(revision 8952)
+++ ../../../skeleton/peer/mail/InternetAddress.class.php	(working copy)
@@ -54,7 +54,7 @@
      * @param   &lang.Object cmp
      * @return  bool
      */
-    public function equals(&$cmp) {
+    public function equals($cmp) {
       return (
         is('InternetAddress', $cmp) and 
         $this->personal.$this->localpart.$this->domain === $cmp->personal.$cmp->localpart.$cmp->domain
@@ -80,7 +80,7 @@
      * @return  &peer.mail.InternetAddress address object
      * @throws  lang.FormatException in case the string could not be parsed into an address
      */
-    public static function &fromString($str) {
+    public static function fromString($str) {
       static $matches= array(
         '/^=\?([^\?])+\?([QB])\?([^\?]+)\?= <([^ @]+@[0-9a-z.-]+)>$/i' => 3,
         '/^<?([^ @]+@[0-9a-z.-]+)>?$/i'                                => 0,
Index: ../../../skeleton/peer/mail/MultiPart.class.php
===================================================================
--- ../../../skeleton/peer/mail/MultiPart.class.php	(revision 8952)
+++ ../../../skeleton/peer/mail/MultiPart.class.php	(working copy)
@@ -83,13 +83,13 @@
      * @return  &peer.mail.MimePart the part added
      * @throws  lang.IllegalArgumentException if part argument is not a peer.mail.MimePart
      */
-    public function &addPart(&$part) {
+    public function addPart($part) {
       if (!is('MimePart', $part)) {
         throw(new IllegalArgumentException(
           'Parameter part is not a peer.mail.MimePart (given: '.xp::typeOf($part).')'
         ));
       }
-      $this->parts[]= &$part;
+      $this->parts[]= $part;
       return $part;
     }
 
@@ -100,7 +100,7 @@
      * @param   int id default -1
      * @return  &peer.mail.MimePart part
      */
-    public function &getPart($id= -1) {
+    public function getPart($id= -1) {
 
       // Iterative use
       if (-1 == $id) $id= $this->_ofs++;
Index: ../../../skeleton/peer/mail/transport/Transport.class.php
===================================================================
--- ../../../skeleton/peer/mail/transport/Transport.class.php	(revision 8952)
+++ ../../../skeleton/peer/mail/transport/Transport.class.php	(working copy)
@@ -37,7 +37,7 @@
      * @param   &peer.mail.Message message the Message object to send
      * @throws  peer.mail.transport.TransportException to indicate an error occured
      */
-    public function send(&$message) { }
+    public function send($message) { }
     
     /**
      * Set a LogCategory for tracing communication
@@ -48,12 +48,12 @@
      * @return  &util.log.LogCategory
      * @throws  lang.IllegalArgumentException in case a of a type mismatch
      */
-    public function &setTrace(&$cat) {
+    public function setTrace($cat) {
       if (NULL !== $cat && !is('LogCategory', $cat)) {
         throw(new IllegalArgumentException('Argument passed is not a LogCategory'));
       }
       
-      $this->cat= &$cat;
+      $this->cat= $cat;
     }
     
     /**
Index: ../../../skeleton/peer/mail/transport/MailTransport.class.php
===================================================================
--- ../../../skeleton/peer/mail/transport/MailTransport.class.php	(revision 8952)
+++ ../../../skeleton/peer/mail/transport/MailTransport.class.php	(working copy)
@@ -55,7 +55,7 @@
      * @param   &peer.mail.Message message the Message object to send
      * @return  bool success
      */
-    public function send(&$message) { 
+    public function send($message) { 
     
       // Sanity check: Is this a message?
       if (!is('Message', $message)) {
Index: ../../../skeleton/peer/mail/transport/SmtpTransport.class.php
===================================================================
--- ../../../skeleton/peer/mail/transport/SmtpTransport.class.php	(revision 8952)
+++ ../../../skeleton/peer/mail/transport/SmtpTransport.class.php	(working copy)
@@ -267,7 +267,7 @@
      * @return  bool TRUE in case of success
      * @throws  peer.mail.transport.TransportException to indicate an error occured
      */
-    public function send(&$message) {
+    public function send($message) {
       try {
         $this->_sockcmd(
           'MAIL FROM: %s', 
@@ -276,7 +276,7 @@
         );
 
         // List all recipients, hide BCC
-        foreach (array(TO, CC, BCC) as $type) while ($r= &$message->getRecipient($type)) {
+        foreach (array(TO, CC, BCC) as $type) while ($r= $message->getRecipient($type)) {
           $this->_sockcmd(
             'RCPT TO: %s', 
             $r->localpart.'@'.$r->domain, 
Index: ../../../skeleton/peer/mail/store/NullStoreCache.class.php
===================================================================
--- ../../../skeleton/peer/mail/store/NullStoreCache.class.php	(revision 8952)
+++ ../../../skeleton/peer/mail/store/NullStoreCache.class.php	(working copy)
@@ -31,7 +31,7 @@
      * @param   string key
      * @return  &mixed value or NULL to indicate the value doesn't exist
      */    
-    public function &get($key) {
+    public function get($key) {
       return NULL;
     }
   
@@ -42,7 +42,7 @@
      * @param   string key
      * @param   &mixed val
      */
-    public function put($key, &$val) { }
+    public function put($key, $val) { }
     
     /**
      * Check whether cache has a value by key
Index: ../../../skeleton/peer/mail/store/Pop3Store.class.php
===================================================================
--- ../../../skeleton/peer/mail/store/Pop3Store.class.php	(revision 8952)
+++ ../../../skeleton/peer/mail/store/Pop3Store.class.php	(working copy)
@@ -30,7 +30,7 @@
      * @return  bool
      * @throws  lang.IllegalArgumentException
      */
-    public function _supports($u, &$attr) {
+    public function _supports($u, $attr) {
       switch (strtolower($u->getScheme())) {
         case 'pop3': 
           $attr['proto']= 'pop3'; 
Index: ../../../skeleton/peer/mail/store/CclientStore.class.php
===================================================================
--- ../../../skeleton/peer/mail/store/CclientStore.class.php	(revision 8952)
+++ ../../../skeleton/peer/mail/store/CclientStore.class.php	(working copy)
@@ -41,7 +41,7 @@
      * @return  bool
      * @throws  lang.IllegalArgumentException
      */
-    public function _supports(&$u, &$attr) {
+    public function _supports($u, $attr) {
       throw(new IllegalArgumentException('Scheme "'.$u->getScheme().'" not recognized'));
     }
     
@@ -137,7 +137,7 @@
      * @return  &peer.mail.MailFolder
      * @throws  peer.mail.MessagingException
      */
-    public function &getFolder($name) { 
+    public function getFolder($name) { 
       if (!$this->cache->has(SKEY_FOLDER.$name)) {
         if (FALSE === imap_list($this->_hdl[0], $this->_hdl[1], $name)) {
           trigger_error('Folder: '.$name, E_USER_NOTICE);
@@ -150,7 +150,7 @@
         $folder= new MailFolder($this, $name);
         $this->cache->put(SKEY_FOLDER.$name, $folder);
       } else {
-        $folder= &$this->cache->get(SKEY_FOLDER.$name);
+        $folder= $this->cache->get(SKEY_FOLDER.$name);
       }
       
       return $folder;
@@ -163,11 +163,11 @@
      * @return  &peer.mail.MailFolder
      * @throws  peer.mail.MessagingException
      */
-    public function &getFolders() {
-      if (NULL === ($f= &$this->cache->get(SKEY_LIST.SKEY_FOLDER))) {
+    public function getFolders() {
+      if (NULL === ($f= $this->cache->get(SKEY_LIST.SKEY_FOLDER))) {
       
         // Retrieve list and cache it
-        if (0 == ($s= sizeof($list= &imap_getmailboxes($this->_hdl[0], $this->_hdl[1], '*')))) {
+        if (0 == ($s= sizeof($list= imap_getmailboxes($this->_hdl[0], $this->_hdl[1], '*')))) {
           throw(new MessagingException(
             'Retrieving folder list failed',
             $this->_errors()
@@ -200,7 +200,7 @@
      * @throws  peer.mail.MessagingException in case opening the folder failed
      * @throws  lang.IllegalAccessException in case there is already a folder open
      */
-    public function openFolder(&$f, $readonly= FALSE) {
+    public function openFolder($f, $readonly= FALSE) {
     
       // Is it already open?
       if ($this->currentfolder === $f->name) return TRUE;
@@ -239,7 +239,7 @@
      * @param   &peer.mail.MailFolder f
      * @return  bool success
      */
-    public function closeFolder(&$f) { 
+    public function closeFolder($f) { 
       $this->currentfolder= NULL;
       return TRUE;
     }
@@ -253,7 +253,7 @@
      * @param   string part
      * @return  string
      */
-    public function getMessagePart(&$f, $uid, $part) {
+    public function getMessagePart($f, $uid, $part) {
       return imap_fetchbody(
         $this->_hdl[0], 
         $uid, 
@@ -271,7 +271,7 @@
      * @see     php://imap_fetchstructure
      * @return  &object
      */
-    public function &getMessageStruct(&$f, $uid) {
+    public function getMessageStruct($f, $uid) {
       return imap_fetchstructure(
         $this->_hdl[0], 
         $uid,
@@ -287,7 +287,7 @@
      * @param   &peer.mail.Message msg
      * @return  bool success
      */
-    public function deleteMessage(&$f, &$msg) {
+    public function deleteMessage($f, $msg) {
       if (FALSE === imap_delete($this->_hdl[0], $msg->uid, FT_UID)) {
         trigger_error('UID: '.$msg->uid, E_USER_NOTICE);
         throw(new MessagingException(
@@ -308,7 +308,7 @@
      * @param   &peer.mail.Message msg
      * @return  bool success
      */
-    public function undeleteMessage(&$f, &$msg) {
+    public function undeleteMessage($f, $msg) {
       if (FALSE === imap_undelete($this->_hdl[0], $msg->uid, FT_UID)) {
         trigger_error('UID: '.$msg->uid, E_USER_NOTICE);
         throw(new MessagingException(
@@ -329,7 +329,7 @@
      * @param   &peer.mail.Message msg
      * @return  bool success
      */
-    public function moveMessage(&$f, $msg) {
+    public function moveMessage($f, $msg) {
       if (FALSE === imap_mail_move($this->_hdl[0], $msg->uid, $f->name, CP_UID)) {
         throw (new MessagingException('Can not move mail'));
       }
@@ -346,14 +346,14 @@
      * @return  &peer.mail.Message[]
      * @throws  peer.mail.MessagingException
      */
-    public function &getMessages(&$f) {
+    public function getMessages($f) {
       if (1 == func_num_args()) {
         $count= $this->getMessageCount($f, 'messages');
         $msgnums= range(1, $count);
       } else {
         $msgnums= array();
         for ($i= 1, $s= func_num_args(); $i < $s; $i++) {
-          $arg= &func_get_arg($i);
+          $arg= func_get_arg($i);
           $msgnums= array_merge($msgnums, $arg);
         }
       }
@@ -363,15 +363,15 @@
       // Check cache
       $seq= '';
       foreach ($msgnums as $msgnum) {
-        if (NULL === ($msg= &$this->cache->get(SKEY_LIST.SKEY_MESSAGE.$f->name.'.'.$msgnum))) {
+        if (NULL === ($msg= $this->cache->get(SKEY_LIST.SKEY_MESSAGE.$f->name.'.'.$msgnum))) {
           $seq.= ','.$msgnum;
         } else {
-          $messages[]= &$msg;
+          $messages[]= $msg;
         }
       }
       
       if (!empty($seq)) {
-        if (FALSE === ($list= &imap_fetch_overview($this->_hdl[0], substr($seq, 1)))) {
+        if (FALSE === ($list= imap_fetch_overview($this->_hdl[0], substr($seq, 1)))) {
           trigger_error('Folder: '.$f->name, E_USER_NOTICE);
           throw(new MessagingException(
             'Reading messages {'.$seq.'} failed',
@@ -385,7 +385,7 @@
           
           $m= new $class($list[$i]->uid);
           $m->size= $list[$i]->size;
-          $m->folder= &$f;
+          $m->folder= $f;
           $m->body= NULL;   // Indicate this needs to be fetched
 
           // Flags
@@ -403,7 +403,7 @@
           // Cache it
           $this->cache->put(SKEY_LIST.SKEY_MESSAGE.$f->name.'.'.$list[$i]->msgno, $m);
 
-          $messages[]= &$m;
+          $messages[]= $m;
         }
       }
       
@@ -419,7 +419,7 @@
      * @param   string attr one of "messages", "recent" or "unseen"
      * @return  int status
      */
-    public function getMessageCount(&$f, $attr) {
+    public function getMessageCount($f, $attr) {
       if (NULL === ($info= $this->cache->get(SKEY_INFO.SKEY_FOLDER.$f->name))) {
         if (FALSE === ($info= imap_status(
           $this->_hdl[0], 
Index: ../../../skeleton/peer/mail/store/MaildirStore.class.php
===================================================================
--- ../../../skeleton/peer/mail/store/MaildirStore.class.php	(revision 8952)
+++ ../../../skeleton/peer/mail/store/MaildirStore.class.php	(working copy)
@@ -95,7 +95,7 @@
      * @param   string foldername
      * @return  &peer.mail.MailFolder folder;
      */    
-    public function &getFolder($name) {
+    public function getFolder($name) {
       $f= new Folder ($this->_folder->getURI().DIRECTORY_SEPARATOR.$name);
       if (!$f->exists())
         throw (new MessagingException (
@@ -112,7 +112,7 @@
      * @access  public
      * @return  &array* folders array of peer.mail.MailFolder objects
      */
-    public function &getFolders() {
+    public function getFolders() {
       $f= array();
       while ($entry= $this->_folder->getEntry()) {
         if (is_dir ($this->_folder->getURI().DIRECTORY_SEPARATOR.$entry)) {
@@ -138,7 +138,7 @@
      * @throws  lang.IllegalAccessException if another folder is still open
      * @throws  io.IOException if folder cannot be opened
      */
-    public function openFolder(&$f, $readonly= FALSE) {
+    public function openFolder($f, $readonly= FALSE) {
       // Is it already open?
       if ($this->currentfolder === $f->name)
         return TRUE;
@@ -159,7 +159,7 @@
         throw ($e);
       }
       
-      $this->_folder= &$nf;
+      $this->_folder= $nf;
       
       $this->currentfolder= $f->name;
       return TRUE;
@@ -173,7 +173,7 @@
      * @return  boolean success
      * @throws  lang.IllegalArgumentException if folder is not opened folder
      */    
-    public function closeFolder(&$f) {
+    public function closeFolder($f) {
       // Is it already open?
       if ($this->currentfolder !== $f->name)
         throw (new IllegalArgumentException (
@@ -195,7 +195,7 @@
      * @param   int attr default 0xFFFF
      * @return  int count
      */    
-    public function getMessageCount(&$f, $attr= 0xFFFF) {
+    public function getMessageCount($f, $attr= 0xFFFF) {
       $this->openFolder ($f);
       $f= new Folder ($f->name.DIRECTORY_SEPARATOR.'cur');
       if (!$f->exists())
@@ -205,7 +205,7 @@
       try {
         $f->open();
         while ($e= $f->getEntry()) {
-          if ($attr & $this->_getMailFlags ($e)) $cnt++;
+          if ($attr  $this->_getMailFlags ($e)) $cnt++;
         }
         $f->close();
       } catch (Exception $e) {
@@ -224,7 +224,7 @@
      * @param   int number
      * @return  string uri
      */    
-    public function _getMessageURI(&$f, $nr) {
+    public function _getMessageURI($f, $nr) {
       $this->_folder->rewind();
 
       while (FALSE !== ($entry= $this->_folder->getEntry()) && $nr <= $i++) {
@@ -268,7 +268,7 @@
      * @return  &peer.mail.Message
      * @throws  io.IOException if file cannot be read
      */    
-    public function &_readMessageRaw($filename) {
+    public function _readMessageRaw($filename) {
       $header= '';
       $body= '';
       try {
@@ -302,7 +302,7 @@
      * @param   mixed* msgnums
      * @return  array messages
      */    
-    public function getMessages(&$f) {
+    public function getMessages($f) {
       $this->openFolder ($f);
       if (1 == func_num_args()) {
         $count= $this->getMessageCount ();
@@ -310,7 +310,7 @@
       } else {
         $msgnums= array();
         for ($i= 1, $s= func_num_args(); $i < $s; $i++) {
-          $arg= &func_get_arg($i);
+          $arg= func_get_arg($i);
           $msgnums= array_merge($msgnums, $arg);
         }
       }
@@ -321,14 +321,14 @@
         $flags= $this->_getMailFlags($filename);
         
         try {
-          $msg= &$this->_readMessageRaw($filename);
+          $msg= $this->_readMessageRaw($filename);
         } catch (IOException $e) {
         
           // Ignore any errors
           continue;
         }
         
-        $messages[]= &$msg;
+        $messages[]= $msg;
       }
       
       return $messages;
Index: ../../../skeleton/peer/mail/store/MailStore.class.php
===================================================================
--- ../../../skeleton/peer/mail/store/MailStore.class.php	(revision 8952)
+++ ../../../skeleton/peer/mail/store/MailStore.class.php	(working copy)
@@ -56,7 +56,7 @@
       if (NULL === $cache) {
         $this->cache= new StoreCache();
       } else {
-        $this->cache= &$cache;
+        $this->cache= $cache;
       }
       
     }
@@ -85,7 +85,7 @@
      * @param   string name
      * @return  &peer.mail.MailFolder
      */
-    public function &getFolder($name) { }
+    public function getFolder($name) { }
     
     /**
      * Get all folders
@@ -93,7 +93,7 @@
      * @access  abstract
      * @return  &peer.mail.MailFolder[]
      */
-    public function &getFolders() { }
+    public function getFolders() { }
 
     /**
      * Open a folder
@@ -103,7 +103,7 @@
      * @param   bool readonly default FALSE
      * @return  bool success
      */
-    public function openFolder(&$f, $readonly= FALSE) { }
+    public function openFolder($f, $readonly= FALSE) { }
     
     /**
      * Close a folder
@@ -112,7 +112,7 @@
      * @param   &peer.mail.MailFolder f
      * @return  bool success
      */
-    public function closeFolder(&$f) { }
+    public function closeFolder($f) { }
     
     /**
      * Get messages in a folder
@@ -122,7 +122,7 @@
      * @param   mixed* msgnums
      * @return  &peer.mail.Message[]
      */
-    public function &getMessages(&$f) { }
+    public function getMessages($f) { }
 
     /**
      * Get number of messages in this folder
@@ -132,6 +132,6 @@
      * @param   string attr one of "message", "recent" or "unseen"
      * @return  int
      */
-    public function getMessageCount(&$f, $attr) { }
+    public function getMessageCount($f, $attr) { }
   }
 ?>
Index: ../../../skeleton/peer/mail/store/StoreCache.class.php
===================================================================
--- ../../../skeleton/peer/mail/store/StoreCache.class.php	(revision 8952)
+++ ../../../skeleton/peer/mail/store/StoreCache.class.php	(working copy)
@@ -78,7 +78,7 @@
      * @param   string key
      * @return  &mixed value or NULL to indicate the value doesn't exist
      */    
-    public function &get($key) {
+    public function get($key) {
       if (isset($this->data[$key])) return $this->data[$key]; else return NULL;
     }
   
@@ -89,8 +89,8 @@
      * @param   string key
      * @param   &mixed val
      */
-    public function put($key, &$val) {
-      $this->data[$key]= &$val;
+    public function put($key, $val) {
+      $this->data[$key]= $val;
     }
     
     /**
Index: ../../../skeleton/peer/mail/store/MboxStore.class.php
===================================================================
--- ../../../skeleton/peer/mail/store/MboxStore.class.php	(revision 8952)
+++ ../../../skeleton/peer/mail/store/MboxStore.class.php	(working copy)
@@ -28,7 +28,7 @@
      * @return  bool
      * @throws  lang.IllegalArgumentException
      */
-    public function _supports(&$u, &$attr) {
+    public function _supports($u, $attr) {
       switch (strtolower($u->getScheme())) {
         case 'mbox': 
           $attr['mbx']= '/'.$u->getHost().$u->getPath();
@@ -50,7 +50,7 @@
      * @return  &peer.mail.MailFolder
      * @throws  peer.mail.MessagingException
      */  
-    public function &getFolder() {
+    public function getFolder() {
       return parent::getFolder('*');
     }
   }
Index: ../../../skeleton/peer/mail/store/ImapStore.class.php
===================================================================
--- ../../../skeleton/peer/mail/store/ImapStore.class.php	(revision 8952)
+++ ../../../skeleton/peer/mail/store/ImapStore.class.php	(working copy)
@@ -33,7 +33,7 @@
      * @return  bool
      * @throws  lang.IllegalArgumentException
      */
-    public function _supports(&$u, &$attr) {
+    public function _supports($u, $attr) {
       switch (strtolower($u->getScheme())) {
         case 'imap': 
           $attr['proto']= 'imap'; 
Index: ../../../skeleton/peer/mail/util/HtmlMessage.class.php
===================================================================
--- ../../../skeleton/peer/mail/util/HtmlMessage.class.php	(revision 8952)
+++ ../../../skeleton/peer/mail/util/HtmlMessage.class.php	(working copy)
@@ -35,10 +35,10 @@
       parent::__construct(-1);
       
       // Construct multipart and set content type accordingly
-      with ($multi= &$this->addPart(new MultiPart())); {
-        $this->text= &$multi->addPart(new MimePart('', 'text/plain'));
+      with ($multi= $this->addPart(new MultiPart())); {
+        $this->text= $multi->addPart(new MimePart('', 'text/plain'));
         $this->text->setDisposition(MIME_DISPOSITION_INLINE);
-        $this->html= &$multi->addPart(new MimePart('', 'text/html'));
+        $this->html= $multi->addPart(new MimePart('', 'text/html'));
         $this->html->setDisposition(MIME_DISPOSITION_INLINE);
       }
       $this->setContentType('multipart/related; type="multipart/alternative"');
@@ -56,7 +56,7 @@
      * @return  string content id
      */
     public function addImage($data, $contentType) {
-      with ($image= &$this->addPart(new MimePart())); {
+      with ($image= $this->addPart(new MimePart())); {
         $image->setDisposition(MIME_DISPOSITION_INLINE);
         $image->setEncoding(MIME_ENC_BASE64);
         $image->setFilename(NULL);
@@ -78,8 +78,8 @@
      * @param   &peer.mail.util.ImageLoader loader
      * @return  &peer.mail.util.ImageLoader
      */
-    public function &registerLoader($scheme, &$loader) {
-      $this->_loaders[$scheme]= &$loader;
+    public function registerLoader($scheme, $loader) {
+      $this->_loaders[$scheme]= $loader;
       return $loader;
     }
     
@@ -92,7 +92,7 @@
      * @throws  lang.MethodNotImplementedException in case no loader is present
      * @throws  lang.Throwable
      */
-    public function loadImage(&$source) {
+    public function loadImage($source) {
       $scheme= $source->getScheme('file');
       if (!isset($this->_loaders[$scheme])) {
         throw(new MethodNotImplementedException(
Index: ../../../skeleton/peer/mail/util/ImageLoader.class.php
===================================================================
--- ../../../skeleton/peer/mail/util/ImageLoader.class.php	(revision 8952)
+++ ../../../skeleton/peer/mail/util/ImageLoader.class.php	(working copy)
@@ -19,6 +19,6 @@
      * @param   &peer.URL source
      * @return  string[2] data and contenttype
      */
-    public function load(&$source);
+    public function load($source);
   }
 ?>
Index: ../../../skeleton/peer/mail/util/FilesystemImageLoader.class.php
===================================================================
--- ../../../skeleton/peer/mail/util/FilesystemImageLoader.class.php	(revision 8952)
+++ ../../../skeleton/peer/mail/util/FilesystemImageLoader.class.php	(working copy)
@@ -25,7 +25,7 @@
      * @param   &peer.URL source
      * @return  string[2] data and contenttype
      */
-    public function load(&$source) { 
+    public function load($source) { 
       return array(
         FileUtil::getContents(new File($source->getURL())),
         MimeType::getByFilename($source->getURL())
Index: ../../../skeleton/peer/mail/Message.class.php
===================================================================
--- ../../../skeleton/peer/mail/Message.class.php	(revision 8952)
+++ ../../../skeleton/peer/mail/Message.class.php	(working copy)
@@ -270,8 +270,8 @@
      * @access  public
      * @param   mixed arg
      */
-    public function setDate(&$arg) {
-      if (is('Date', $arg)) $this->date= &$arg; else $this->date= new Date($arg);
+    public function setDate($arg) {
+      if (is('Date', $arg)) $this->date= $arg; else $this->date= new Date($arg);
     }
     
     /**
@@ -280,7 +280,7 @@
      * @access  public
      * @return  &util.Date
      */
-    public function &getDate() {
+    public function getDate() {
       return $this->date;
     }
   
@@ -291,9 +291,9 @@
      * @param   string type one of the constants TO, CC, BCC
      * @param   &peer.mail.InternetAddress adr address to add
      */
-    public function addRecipient($type, &$adr) {
-      $m= &$this->$type;
-      $m[]= &$adr;
+    public function addRecipient($type, $adr) {
+      $m= $this->$type;
+      $m[]= $adr;
     }
     
     /**
@@ -303,7 +303,7 @@
      * @param   string type one of the constants TO, CC, BCC
      * @param   &peer.mail.InternetAddress[] adr addresses to add
      */
-    public function addRecipients($type, &$adr) {
+    public function addRecipients($type, $adr) {
       $this->$type= array_merge($this->$type, $adr);
     }
 
@@ -314,7 +314,7 @@
      * @param   string type one of the constants TO, CC, BCC
      * @return  &peer.mail.InternetAddress[] adr recipients of type
      */
-    public function &getRecipients($type) {
+    public function getRecipients($type) {
       return $this->$type;
     }
     
@@ -330,11 +330,11 @@
      * @param   string type one of the constants TO, CC, BCC
      * @return  &peer.mail.InternetAddress[] adr recipients of type
      */
-    public function &getRecipient($type) {
+    public function getRecipient($type) {
       static $ofs= array();
       
       if (!isset($ofs[$type])) $ofs[$type]= 0;
-      $l= &$this->$type;
+      $l= $this->$type;
       if (!isset($l[$ofs[$type]])) {
         unset($ofs[$type]);
         return FALSE;
@@ -348,8 +348,8 @@
      * @access  public
      * @param   &peer.mail.InternetAddress[] adr addresses to add
      */
-    public function setFrom(&$adr) {
-      $this->from= &$adr;
+    public function setFrom($adr) {
+      $this->from= $adr;
     }
 
     /**
@@ -358,7 +358,7 @@
      * @access  public
      * @return  &peer.mail.InternetAddress[] adr addresses to add
      */
-    public function &getFrom() {
+    public function getFrom() {
       return $this->from;
     }
     
@@ -435,7 +435,7 @@
       ) return $this->body;
       
       // We have a folder and the body is NULL (indicating we haven't fetched this message)
-      return ($this->body= &$this->folder->getMessagePart($this->uid, '1'));
+      return ($this->body= $this->folder->getMessagePart($this->uid, '1'));
     }
 
     /**
@@ -627,7 +627,7 @@
      * @param   &peer.mail.InternetAddress[] addrs
      * @return  string
      */
-    public function _astr($t, &$addrs) {
+    public function _astr($t, $addrs) {
       $l= '';
       for ($i= 0, $s= sizeof($addrs); $i < $s; $i++) {
         if (!is('InternetAddress', $addrs[$i])) continue; // Ignore!
Index: ../../../skeleton/peer/ftp/DefaultFtpListParser.class.php
===================================================================
--- ../../../skeleton/peer/ftp/DefaultFtpListParser.class.php	(revision 8952)
+++ ../../../skeleton/peer/ftp/DefaultFtpListParser.class.php	(working copy)
@@ -22,7 +22,7 @@
      * @param   string raw a single line
      * @return  &peer.ftp.FtpEntry
      */
-    public function &entryFrom($raw) {
+    public function entryFrom($raw) {
       sscanf(
         $raw, 
         '%s %d %s %s %d %s %d %[^ ] %[^$]',
@@ -48,7 +48,7 @@
       // Check for "recent" file which are specified "HH:MM" instead
       // of year for the last 6 month (as specified in coreutils/src/ls.c)
       if (strstr($date, ':')) {
-        $now= &Date::now();
+        $now= Date::now();
         if ($d->getMonth() > $now->getMonth()) $d->year--;
       }
 
Index: ../../../skeleton/peer/ftp/FtpDir.class.php
===================================================================
--- ../../../skeleton/peer/ftp/FtpDir.class.php	(revision 8952)
+++ ../../../skeleton/peer/ftp/FtpDir.class.php	(working copy)
@@ -33,7 +33,7 @@
      * @access  public
      * @return  &peer.ftp.FtpEntry FALSE to indicate EOL
      */
-    public function &getEntry() {
+    public function getEntry() {
       if (NULL === $this->entries) {
 
         // Retrieve entries
@@ -54,7 +54,7 @@
       // reference, ".."
       do {        
         try {
-          $entry= &$this->connection->parser->entryFrom($this->entries[$this->_offset]);
+          $entry= $this->connection->parser->entryFrom($this->entries[$this->_offset]);
         } catch (Exception $e) {
           throw(new SocketException(sprintf(
             'During listing of #%d (%s): %s',
@@ -73,7 +73,7 @@
       } while ('.' == $entry->getName() || '..' == $entry->getName());
       
       // Inject connection and return
-      $entry->connection= &$this->connection;
+      $entry->connection= $this->connection;
       return $entry;
     }
   }
Index: ../../../skeleton/peer/ftp/FtpConnection.class.php
===================================================================
--- ../../../skeleton/peer/ftp/FtpConnection.class.php	(revision 8952)
+++ ../../../skeleton/peer/ftp/FtpConnection.class.php	(working copy)
@@ -170,7 +170,7 @@
      * @return  &peer.ftp.FtpDir
      * @throws  peer.SocketException
      */
-    public function &getDir($dir= NULL) {
+    public function getDir($dir= NULL) {
       if (NULL === $dir) {
         if (FALSE === ($dir= ftp_pwd($this->handle))) {
           throw(new SocketException('Cannot retrieve current directory'));
@@ -178,7 +178,7 @@
       }
         
       $f= new FtpDir($dir);
-      $f->connection= &$this;
+      $f->connection= $this;
       return $f;
     }
     
@@ -190,7 +190,7 @@
      * @throws  peer.SocketException
      * @return  bool success
      */
-    public function setDir(&$f) {
+    public function setDir($f) {
       if (FALSE === ftp_chdir($this->handle, $f->name)) {
         throw(new SocketException('Cannot change directory to '.$f->name));
       }
@@ -204,7 +204,7 @@
      * @param   &peer.ftp.FtpDir f
      * @return  bool success
      */
-    public function makeDir(&$f) {
+    public function makeDir($f) {
       return ftp_mkdir($this->handle, $f->name);
     }
     
@@ -218,7 +218,7 @@
      * @return  bool success
      * @throws  peer.SocketException
      */
-    public function put(&$arg, $remote= NULL, $mode= FTP_ASCII) {
+    public function put($arg, $remote= NULL, $mode= FTP_ASCII) {
       if (is('File', $arg)) {
         $local= $arg->_fd;
         if (empty($remote)) $remote= basename ($arg->getUri());
@@ -248,7 +248,7 @@
      * @return  bool success
      * @throws  peer.SocketException
      */
-    public function get($remote, &$arg, $mode= FTP_ASCII) {
+    public function get($remote, $arg, $mode= FTP_ASCII) {
       if (is('File', $arg)) {
         $local= $arg->_fd;
         $f= 'ftp_fget';
Index: ../../../skeleton/peer/ftp/FtpEntry.class.php
===================================================================
--- ../../../skeleton/peer/ftp/FtpEntry.class.php	(revision 8952)
+++ ../../../skeleton/peer/ftp/FtpEntry.class.php	(working copy)
@@ -159,8 +159,8 @@
      * @access  public
      * @param   &util.Date date
      */
-    public function setDate(&$date) {
-      $this->date= &$date;
+    public function setDate($date) {
+      $this->date= $date;
     }
 
     /**
@@ -169,7 +169,7 @@
      * @access  public
      * @return  &util.Date
      */
-    public function &getDate() {
+    public function getDate() {
       return $this->date;
     }
 
Index: ../../../skeleton/peer/ftp/server/storage/FilesystemStorageCollection.class.php
===================================================================
--- ../../../skeleton/peer/ftp/server/storage/FilesystemStorageCollection.class.php	(revision 8952)
+++ ../../../skeleton/peer/ftp/server/storage/FilesystemStorageCollection.class.php	(working copy)
@@ -175,7 +175,7 @@
      * @access  public
      * @return  &peer.ftp.server.storage.StorageEntry[]
      */
-    public function &elements() {
+    public function elements() {
       $rpath= substr($this->f->getURI(), strlen($this->root));
           
       $r= array();
Index: ../../../skeleton/peer/ftp/server/storage/FilesystemStorage.class.php
===================================================================
--- ../../../skeleton/peer/ftp/server/storage/FilesystemStorage.class.php	(revision 8952)
+++ ../../../skeleton/peer/ftp/server/storage/FilesystemStorage.class.php	(working copy)
@@ -108,7 +108,7 @@
      * @param int type
      * @return &peer.ftp.server.storage.StorageEntry
      */
-    public function &createEntry($clientId, $uri, $type) {
+    public function createEntry($clientId, $uri, $type) {
       $path= substr($this->realname($clientId, $uri), strlen($this->root));
       switch ($type) {
         case ST_ELEMENT:
@@ -128,7 +128,7 @@
      * @param   int type one of the ST_* constants
      * @return  &peer.ftp.server.storage.StorageEntry
      */
-    public function &create($clientId, $uri, $type) {
+    public function create($clientId, $uri, $type) {
       $path= $this->realname($clientId, $uri);
 
       switch ($type) {
@@ -155,7 +155,7 @@
      * @param   string uri
      * @return  &peer.ftp.server.storage.StorageEntry
      */
-    public function &lookup($clientId, $uri) {
+    public function lookup($clientId, $uri) {
       if (!file_exists($path= $this->realname($clientId, $uri))) return NULL;
       
       return $this->createEntry($clientId, $uri, is_dir($path) ? ST_COLLECTION : ST_ELEMENT);
Index: ../../../skeleton/peer/ftp/server/storage/StorageCollection.class.php
===================================================================
--- ../../../skeleton/peer/ftp/server/storage/StorageCollection.class.php	(revision 8952)
+++ ../../../skeleton/peer/ftp/server/storage/StorageCollection.class.php	(working copy)
@@ -21,7 +21,7 @@
      * @access  public
      * @return  &peer.ftp.server.storage.StorageEntry[]
      */
-    public function &elements();
+    public function elements();
   
   }
 ?>
Index: ../../../skeleton/peer/ftp/server/storage/Storage.class.php
===================================================================
--- ../../../skeleton/peer/ftp/server/storage/Storage.class.php	(revision 8952)
+++ ../../../skeleton/peer/ftp/server/storage/Storage.class.php	(working copy)
@@ -43,7 +43,7 @@
      * @param   string uri
      * @return  &peer.ftp.server.storage.StorageEntry
      */
-    public function &lookup($clientId, $uri);
+    public function lookup($clientId, $uri);
 
     /**
      * Creates a new StorageEntry and return it
@@ -54,7 +54,7 @@
      * @param   int type one of the ST_* constants
      * @return  &peer.ftp.server.storage.StorageEntry
      */
-    public function &createEntry($clientId, $uri, $type);
+    public function createEntry($clientId, $uri, $type);
     
     /**
      * Creates a new StorageEntry and return it
@@ -65,7 +65,7 @@
      * @param   int type one of the ST_* constants
      * @return  &peer.ftp.server.storage.StorageEntry
      */
-    public function &create($clientId, $uri, $type);
+    public function create($clientId, $uri, $type);
   
   }
 ?>
Index: ../../../skeleton/peer/ftp/server/FtpConnectionListener.class.php
===================================================================
--- ../../../skeleton/peer/ftp/server/FtpConnectionListener.class.php	(revision 8952)
+++ ../../../skeleton/peer/ftp/server/FtpConnectionListener.class.php	(working copy)
@@ -45,9 +45,9 @@
      * @param   &peer.ftp.server.Storage storage
      * @param   &peer.ftp.server.Authenticator authenticator
      */
-    public function __construct(&$storage, &$authenticator) {
-      $this->storage= &$storage;
-      $this->authenticator= &$authenticator;
+    public function __construct($storage, $authenticator) {
+      $this->storage= $storage;
+      $this->authenticator= $authenticator;
     }
 
     /**
@@ -56,8 +56,8 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setTrace(&$cat) { 
-      $this->cat= &$cat;
+    public function setTrace($cat) { 
+      $this->cat= $cat;
     }
     
     /**
@@ -70,7 +70,7 @@
      * @param string method Interceptor method to invoke
      * @return bool
      */
-    public function checkInterceptors(&$event, &$entry, $method) {
+    public function checkInterceptors($event, $entry, $method) {
       if (!$this->interceptors) return TRUE;
     
       // Check each interceptors an it's conditions
@@ -102,13 +102,13 @@
      * @param   &peer.server.ConnectionEvent event
      * @return  &peer.BSDSocket
      */
-    public function &openDatasock(&$event) {
+    public function openDatasock($event) {
       if (is('ServerSocket', $this->datasock[$event->stream->hashCode()])) {
 
         // Open socket in passive mode
         $this->cat && $this->cat->debug('+++ Opening passive connection');
         try {
-          $socket= &$this->datasock[$event->stream->hashCode()]->accept();
+          $socket= $this->datasock[$event->stream->hashCode()]->accept();
         } catch (SocketException $e) {
           $this->answer($event->stream, 425, 'Cannot open passive connection '.$e->getMessage());
           return FALSE;        
@@ -117,7 +117,7 @@
       
         // Open socket in active mode
         $this->cat && $this->cat->debug('+++ Opening active connection');
-        with ($socket= &$this->datasock[$event->stream->hashCode()]); {
+        with ($socket= $this->datasock[$event->stream->hashCode()]); {
           try {
             $socket->connect();
           } catch (SocketException $e) {
@@ -152,7 +152,7 @@
      * @return  int number of bytes written
      * @throws  io.IOException
      */
-    public function answer(&$sock, $code, $text, $lines= NULL) {
+    public function answer($sock, $code, $text, $lines= NULL) {
       if (is_array($lines)) {
         $answer= $code.'-'.$text.":\r\n  ".implode("\n  ", $lines)."\r\n".$code." End\r\n";
       } else {
@@ -169,7 +169,7 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onUser(&$event, $params) {
+    public function onUser($event, $params) {
       $this->sessions[$event->stream->hashCode()]->setUsername($params);
       $this->sessions[$event->stream->hashCode()]->setAuthenticated(FALSE);
       $this->answer($event->stream, 331, 'Password required for '.$params);
@@ -182,7 +182,7 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onPass(&$event, $params) {
+    public function onPass($event, $params) {
       with ($user= $this->sessions[$event->stream->hashCode()]->getUsername()); {
         try {
           $r= $this->authenticator->authenticate($user, $params);
@@ -210,7 +210,7 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onRein(&$event, $params) {
+    public function onRein($event, $params) {
       delete($this->datasock[$event->stream->hashCode()]);
       $this->sessions[$event->stream->hashCode()]->setAuthenticated(FALSE);
     }
@@ -222,7 +222,7 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onPwd(&$event, $params) {
+    public function onPwd($event, $params) {
       $this->answer($event->stream, 257, '"'.$this->storage->getBase($event->stream->hashCode()).'" is current directory');
     }
 
@@ -235,7 +235,7 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onCwd(&$event, $params) {
+    public function onCwd($event, $params) {
       try {
         $pwd= $this->storage->setBase($event->stream->hashCode(), $params);
       } catch (Exception $e) {
@@ -252,7 +252,7 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onCdup(&$event, $params) {
+    public function onCdup($event, $params) {
       try {
         $pwd= $this->storage->setBase(
           $event->stream->hashCode(),
@@ -274,7 +274,7 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onFeat(&$event, $params) {
+    public function onFeat($event, $params) {
       $this->answer($event->stream, 211, 'Features', array('MDTM', 'SIZE'));
     }
 
@@ -286,7 +286,7 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onHelp(&$event, $params) {
+    public function onHelp($event, $params) {
       $methods= array();
       $i= 0;
       foreach (get_class_methods($this) as $name) {
@@ -306,7 +306,7 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onSite(&$event, $params) {
+    public function onSite($event, $params) {
       $method= 'onSite'.strtolower(strtok($params, ' '));
 
       // Check if method is implemented and answer with code 550 in case
@@ -326,7 +326,7 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onSiteHelp(&$event, $params) {
+    public function onSiteHelp($event, $params) {
       return $this->onHelp($event, $params);
     }
 
@@ -337,10 +337,10 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onSiteChmod(&$event, $params) {
+    public function onSiteChmod($event, $params) {
       list($permissions, $uri)= explode(' ', trim($params), 2);
       $this->cat->warn($permissions);
-      if (!($entry= &$this->storage->lookup($event->stream->hashCode(), $uri))) {
+      if (!($entry= $this->storage->lookup($event->stream->hashCode(), $uri))) {
         $this->answer($event->stream, 550, $uri.': No such file or directory');
         return;
       }
@@ -358,7 +358,7 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onSyst(&$event, $params) {
+    public function onSyst($event, $params) {
       $this->answer($event->stream, 215, 'UNIX Type: L8');
     }
 
@@ -371,7 +371,7 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */    
-    public function onNoop(&$event, $params) {
+    public function onNoop($event, $params) {
       $this->answer($event->stream, 200, 'OK');
     }
 
@@ -384,9 +384,9 @@
      */
     public function _rwx($bits) {
       return (
-        (($bits & 4) ? 'r' : '-').
-        (($bits & 2) ? 'w' : '-').
-        (($bits & 1) ? 'x' : '-')
+        (($bits  4) ? 'r' : '-').
+        (($bits  2) ? 'w' : '-').
+        (($bits  1) ? 'x' : '-')
       );
     }
     
@@ -399,10 +399,10 @@
      */
     public function permissionString($permissions) {
       return (
-        ($permissions & 0x4000 ? 'd' : '-').
-        $this->_rwx(($permissions >> 6) & 7).
-        $this->_rwx(($permissions >> 3) & 7).
-        $this->_rwx(($permissions) & 7)
+        ($permissions  0x4000 ? 'd' : '-').
+        $this->_rwx(($permissions >> 6)  7).
+        $this->_rwx(($permissions >> 3)  7).
+        $this->_rwx(($permissions)  7)
       );
     }
     
@@ -414,8 +414,8 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onList(&$event, $params) {
-      if (!$socket= &$this->openDatasock($event)) return;
+    public function onList($event, $params) {
+      if (!$socket= $this->openDatasock($event)) return;
             
       // Remove all -options
       if (($parts= sscanf($params, '-%s %s')) && $parts[0]) {
@@ -423,7 +423,7 @@
         $params= $parts[1];
       }
       
-      if (!($entry= &$this->storage->lookup($event->stream->hashCode(), $params))) {
+      if (!($entry= $this->storage->lookup($event->stream->hashCode(), $params))) {
         $this->answer($event->stream, 550, $params.': No such file or directory');
         $socket->close();
         delete($socket);
@@ -476,10 +476,10 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onNlst(&$event, $params) {
-      if (!$socket= &$this->openDatasock($event)) return;
+    public function onNlst($event, $params) {
+      if (!$socket= $this->openDatasock($event)) return;
       
-      if (!($entry= &$this->storage->lookup($event->stream->hashCode(), $params))) {
+      if (!($entry= $this->storage->lookup($event->stream->hashCode(), $params))) {
         $this->answer($event->stream, 550, $params.': No such file or directory');
         $socket->close();
         return;
@@ -522,8 +522,8 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onMdtm(&$event, $params) {
-      if (!($entry= &$this->storage->lookup($event->stream->hashCode(), $params))) {
+    public function onMdtm($event, $params) {
+      if (!($entry= $this->storage->lookup($event->stream->hashCode(), $params))) {
         $this->answer($event->stream, 550, $params.': No such file or directory');
         return;
       }
@@ -544,8 +544,8 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onSize(&$event, $params) {
-      if (!($entry= &$this->storage->lookup($event->stream->hashCode(), $params))) {
+    public function onSize($event, $params) {
+      if (!($entry= $this->storage->lookup($event->stream->hashCode(), $params))) {
         $this->answer($event->stream, 550, $params.': No such file or directory');
         return;
       }
@@ -566,14 +566,14 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onMkd(&$event, $params) {
+    public function onMkd($event, $params) {
       if ($this->storage->lookup($event->stream->hashCode(), $params)) {
         $this->answer($event->stream, 550, $params.': already exists');
         return;
       }
       
       // Invoke interceptor
-      $entry= &$this->storage->createEntry($event->stream->hashCode(), $params, ST_COLLECTION);
+      $entry= $this->storage->createEntry($event->stream->hashCode(), $params, ST_COLLECTION);
       if (!$this->checkInterceptors($event, $entry, 'onCreate')) return;
 
       // Create the element
@@ -596,8 +596,8 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onRmd(&$event, $params) {
-      if (!($element= &$this->storage->lookup($event->stream->hashCode(), $params))) {
+    public function onRmd($event, $params) {
+      if (!($element= $this->storage->lookup($event->stream->hashCode(), $params))) {
         $this->answer($event->stream, 550, $params.': no such file or directory');
         return;
       }
@@ -624,10 +624,10 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onRetr(&$event, $params) {
-      if (!$socket= &$this->openDatasock($event)) return;
+    public function onRetr($event, $params) {
+      if (!$socket= $this->openDatasock($event)) return;
     
-      if (!($entry= &$this->storage->lookup($event->stream->hashCode(), $params))) {
+      if (!($entry= $this->storage->lookup($event->stream->hashCode(), $params))) {
         $this->answer($event->stream, 550, $params.': No such file or directory');
         $socket->close();
         return;
@@ -673,20 +673,20 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onStor(&$event, $params) {
-      if (!$socket= &$this->openDatasock($event)) return;
+    public function onStor($event, $params) {
+      if (!$socket= $this->openDatasock($event)) return;
       
-      if (!($entry= &$this->storage->lookup($event->stream->hashCode(), $params))) {
+      if (!($entry= $this->storage->lookup($event->stream->hashCode(), $params))) {
 
         // Invoke interceptor
-        $entry= &$this->storage->createEntry($event->stream->hashCode(), $params, ST_ELEMENT);
+        $entry= $this->storage->createEntry($event->stream->hashCode(), $params, ST_ELEMENT);
         if (!$this->checkInterceptors($event, $entry, 'onCreate')) {
           $socket->close();
           return;
         }
 
         try {
-          $entry= &$this->storage->create($event->stream->hashCode(), $params, ST_ELEMENT);
+          $entry= $this->storage->create($event->stream->hashCode(), $params, ST_ELEMENT);
         } catch (Exception $e) {
           $this->answer($event->stream, 550, $params.': '.$e->getMessage());
           $socket->close();
@@ -725,8 +725,8 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onDele(&$event, $params) {
-      if (!($entry= &$this->storage->lookup($event->stream->hashCode(), $params))) {
+    public function onDele($event, $params) {
+      if (!($entry= $this->storage->lookup($event->stream->hashCode(), $params))) {
         $this->answer($event->stream, 550, $params.': No such file or directory');
         return;
       }
@@ -755,8 +755,8 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onRnfr(&$event, $params) {
-      if (!($entry= &$this->storage->lookup($event->stream->hashCode(), $params))) {
+    public function onRnfr($event, $params) {
+      if (!($entry= $this->storage->lookup($event->stream->hashCode(), $params))) {
         $this->answer($event->stream, 550, $params.': No such file or directory');
         return;
       }
@@ -773,8 +773,8 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onRnto(&$event, $params) {
-      if (!$entry= &$this->sessions[$event->stream->hashCode()]->getTempVar('rnfr')) {
+    public function onRnto($event, $params) {
+      if (!$entry= $this->sessions[$event->stream->hashCode()]->getTempVar('rnfr')) {
         $this->answer($event->stream, 503, 'Bad sequence of commands');
         return;
       }
@@ -802,7 +802,7 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onType(&$event, $params) {
+    public function onType($event, $params) {
       switch ($params= strtoupper($params)) {
         case TYPE_ASCII:
         case TYPE_BINARY:
@@ -822,7 +822,7 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onStru(&$event, $params) {
+    public function onStru($event, $params) {
       switch ($params= strtoupper($params)) {
         case STRU_FILE:
           $this->answer($event->stream, 200, 'Structure set to '.$params);
@@ -845,7 +845,7 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onMode(&$event, $params) {
+    public function onMode($event, $params) {
       switch ($params= strtoupper($params)) {
         case MODE_STREAM:
           $this->answer($event->stream, 200, 'Mode set to '.$params);
@@ -868,7 +868,7 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onQuit(&$event, $params) {
+    public function onQuit($event, $params) {
       $this->answer($event->stream, 221, 'Goodbye');
       $event->stream->close();
       
@@ -883,7 +883,7 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onPort(&$event, $params) {
+    public function onPort($event, $params) {
       $this->mode[$event->stream->hashCode()]= DATA_ACTIVE;
       $octets= sscanf($params, '%d,%d,%d,%d,%d,%d');
       $host= sprintf('%s.%s.%s.%s', $octets[0], $octets[1], $octets[2], $octets[3]);
@@ -903,7 +903,7 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onOpts(&$event, $params) {
+    public function onOpts($event, $params) {
       if (2 != sscanf($params, '%s %s', $option, $value)) {
         $this->answer($event->stream, 501, 'OPTS: Invalid numer of arguments');
         return;
@@ -920,7 +920,7 @@
      * @param   &peer.server.ConnectionEvent event
      * @param   string params
      */
-    public function onPasv(&$event, $params) {
+    public function onPasv($event, $params) {
       $this->mode[$event->stream->hashCode()]= DATA_PASSIVE;
 
       if ($this->datasock[$event->stream->hashCode()]) {
@@ -939,7 +939,7 @@
         }
       }
       $this->cat && $this->cat->debug('Passive mode: Data socket is', $this->datasock[$event->stream->hashCode()]);
-      $octets= strtr(gethostbyname($this->server->socket->host), '.', ',').','.($port >> 8).','.($port & 0xFF);
+      $octets= strtr(gethostbyname($this->server->socket->host), '.', ',').','.($port >> 8).','.($port  0xFF);
       $this->answer($event->stream, 227, 'Entering passive mode ('.$octets.')');
     }
     
@@ -949,7 +949,7 @@
      * @access  public
      * @param   &peer.server.ConnectionEvent event
      */
-    public function connected(&$event) {
+    public function connected($event) {
       $this->cat && $this->cat->debugf('===> Client %s connected', $event->stream->host);
 
       // Create a new session object for this client
@@ -963,7 +963,7 @@
      * @access  public
      * @param   &peer.server.ConnectionEvent event
      */
-    public function data(&$event) {
+    public function data($event) {
       static $public= array('onhelp', 'onuser', 'onpass', 'onquit');
       
       $this->cat && $this->cat->debug('>>> ', addcslashes($event->data, "\0..\17"));
@@ -1001,7 +1001,7 @@
      * @access  public
      * @param   &peer.server.ConnectionEvent event
      */
-    public function disconnected(&$event) {
+    public function disconnected($event) {
       $this->cat && $this->cat->debugf('Client %s disconnected', $event->stream->host);
       
       // Kill associated session
Index: ../../../skeleton/peer/ftp/server/FtpThread.class.php
===================================================================
--- ../../../skeleton/peer/ftp/server/FtpThread.class.php	(revision 8952)
+++ ../../../skeleton/peer/ftp/server/FtpThread.class.php	(working copy)
@@ -46,8 +46,8 @@
      * @access  public
      * @param   &peer.server.Server server
      */
-    public function setServer(&$server) {
-      $this->server= &$server;
+    public function setServer($server) {
+      $this->server= $server;
     }
     
     /**
@@ -56,8 +56,8 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setTrace(&$cat) { 
-      $this->cat= &$cat;
+    public function setTrace($cat) { 
+      $this->cat= $cat;
     }
     
     /**
@@ -66,8 +66,8 @@
      * @access  public
      * @param   &lang.reflect.InvokationHandler handler
      */
-    public function setAuthenticatorHandler(&$handler) {
-      $this->authenticatorHandler= &$handler;
+    public function setAuthenticatorHandler($handler) {
+      $this->authenticatorHandler= $handler;
     }
     
 
@@ -77,8 +77,8 @@
      * @access  public
      * @param   &lang.reflect.InvokationHandler handler
      */
-    public function setStorageHandler(&$handler) {
-      $this->storageHandler= &$handler;
+    public function setStorageHandler($handler) {
+      $this->storageHandler= $handler;
     }
 
     /**
@@ -88,7 +88,7 @@
      * @param peer.ftp.server.interceptor.InterceptorCondition Condition
      * @param peer.ftp.server.interceptor.StorageActionInterceptor Interceptor
      */
-    public function addInterceptorFor($conditions, &$interceptor) {
+    public function addInterceptorFor($conditions, $interceptor) {
       $this->interceptors[]= array($conditions, $interceptor);
     }
     
@@ -98,7 +98,7 @@
      * @access public
      * @param peer.ftp.server.interceptor.StorageActionInterceptor Interceptor
      */
-    public function addInterceptor(&$interceptor) {
+    public function addInterceptor($interceptor) {
       $this->addInterceptorFor(array(), $interceptor);
     }
     
@@ -109,7 +109,7 @@
      * @access  protected
      * @return  &peer.ftp.server.FtpThread
      */
-    public static function &getInstance() {
+    public static function getInstance() {
       static $instance= NULL;
 
       if (!$instance) $instance= new FtpThread();
@@ -167,11 +167,11 @@
      */
     public function run() {
       try {
-        with ($class= &XPClass::forName(LISTENER_CLASS), $cl= &ClassLoader::getDefault()); {
+        with ($class= XPClass::forName(LISTENER_CLASS), $cl= ClassLoader::getDefault()); {
         
           // Add listener
-          $this->server->addListener($listener= &$class->newInstance(
-            $storage= &Proxy::newProxyInstance(
+          $this->server->addListener($listener= $class->newInstance(
+            $storage= Proxy::newProxyInstance(
               $cl,
               array(XPClass::forName('peer.ftp.server.storage.Storage')),
               $this->storageHandler
Index: ../../../skeleton/peer/ftp/server/interceptor/InterceptorCondition.class.php
===================================================================
--- ../../../skeleton/peer/ftp/server/interceptor/InterceptorCondition.class.php	(revision 8952)
+++ ../../../skeleton/peer/ftp/server/interceptor/InterceptorCondition.class.php	(working copy)
@@ -18,6 +18,6 @@
      * @param peer.ftp.server.storage.StorageEntry entry
      * @return bool
      */
-    public function check(&$session, &$entry);
+    public function check($session, $entry);
   }
 ?>
Index: ../../../skeleton/peer/ftp/server/interceptor/StorageActionInterceptor.class.php
===================================================================
--- ../../../skeleton/peer/ftp/server/interceptor/StorageActionInterceptor.class.php	(revision 8952)
+++ ../../../skeleton/peer/ftp/server/interceptor/StorageActionInterceptor.class.php	(working copy)
@@ -20,7 +20,7 @@
      * @param &peer.ftp.server.storage.StorageEntry
      * @return bool
      */
-    public function onCreate(&$session, &$entry);
+    public function onCreate($session, $entry);
   
     /**
      * Invoked when an entry is deleted
@@ -30,7 +30,7 @@
      * @param &peer.ftp.server.storage.StorageEntry
      * @return bool
      */
-    public function onDelete(&$session, &$entry);
+    public function onDelete($session, $entry);
   
     /**
      * Invoked when an entry is read
@@ -40,7 +40,7 @@
      * @param &peer.ftp.server.storage.StorageEntry
      * @return bool
      */
-    public function onRead(&$session, &$entry);
+    public function onRead($session, $entry);
   
     /**
      * Invoked when an entry is renamed
@@ -50,7 +50,7 @@
      * @param &peer.ftp.server.storage.StorageEntry
      * @return bool
      */
-    public function onRename(&$session, &$entry);
+    public function onRename($session, $entry);
   
     /**
      * Invoked when permissions are changed for an entry
@@ -60,6 +60,6 @@
      * @param &peer.ftp.server.storage.StorageEntry
      * @return bool
      */
-    public function onChangePermissions(&$session, &$entry);
+    public function onChangePermissions($session, $entry);
   }
 ?>
Index: ../../../skeleton/peer/ftp/server/interceptor/EntrynameInterceptor.class.php
===================================================================
--- ../../../skeleton/peer/ftp/server/interceptor/EntrynameInterceptor.class.php	(revision 8952)
+++ ../../../skeleton/peer/ftp/server/interceptor/EntrynameInterceptor.class.php	(working copy)
@@ -46,7 +46,7 @@
      * @param &peer.ftp.server.storage.StorageEntry
      * @return bool
      */
-    public function onCreate(&$session, &$entry) {
+    public function onCreate($session, $entry) {
       if (is('peer.ftp.server.storage.StorageCollection', $entry)) return;
     
       if (!$this->validFilename($entry->getFilename())) {
@@ -62,7 +62,7 @@
      * @param &peer.ftp.server.storage.StorageEntry
      * @return bool
      */
-    public function onRename(&$session, &$entry) {
+    public function onRename($session, $entry) {
       if (is('peer.ftp.server.storage.StorageCollection', $entry)) return;
 
       if (!$this->validFilename($entry->getFilename())) {
Index: ../../../skeleton/peer/ftp/server/interceptor/DefaultInterceptor.class.php
===================================================================
--- ../../../skeleton/peer/ftp/server/interceptor/DefaultInterceptor.class.php	(revision 8952)
+++ ../../../skeleton/peer/ftp/server/interceptor/DefaultInterceptor.class.php	(working copy)
@@ -22,7 +22,7 @@
      * @param &peer.ftp.server.storage.StorageEntry
      * @return bool
      */
-    public function onCreate(&$session, &$entry) {
+    public function onCreate($session, $entry) {
       return TRUE;
     }
   
@@ -34,7 +34,7 @@
      * @param &peer.ftp.server.storage.StorageEntry
      * @return bool
      */
-    public function onDelete(&$session, &$entry) {
+    public function onDelete($session, $entry) {
       return TRUE;
     }
   
@@ -46,7 +46,7 @@
      * @param &peer.ftp.server.storage.StorageEntry
      * @return bool
      */
-    public function onRead(&$session, &$entry) {
+    public function onRead($session, $entry) {
       return TRUE;
     }
   
@@ -58,7 +58,7 @@
      * @param &peer.ftp.server.storage.StorageEntry
      * @return bool
      */
-    public function onRename(&$session, &$entry) {
+    public function onRename($session, $entry) {
       return TRUE;
     }
   
@@ -70,7 +70,7 @@
      * @param &peer.ftp.server.storage.StorageEntry
      * @return bool
      */
-    public function onChangePermissions(&$session, &$entry) {
+    public function onChangePermissions($session, $entry) {
       return TRUE;
     }
   } 
Index: ../../../skeleton/peer/ftp/server/interceptor/PathCondition.class.php
===================================================================
--- ../../../skeleton/peer/ftp/server/interceptor/PathCondition.class.php	(revision 8952)
+++ ../../../skeleton/peer/ftp/server/interceptor/PathCondition.class.php	(working copy)
@@ -31,7 +31,7 @@
      * @param peer.ftp.server.storage.StorageEntry entry
      * @return bool
      */
-    public function check(&$session, &$entry) {
+    public function check($session, $entry) {
     
       // Check if the entry's path start with the path to check
       return substr($entry->getFilename(), 0, strlen($this->path)) == $this->path;
Index: ../../../skeleton/peer/ftp/WindowsFtpListParser.class.php
===================================================================
--- ../../../skeleton/peer/ftp/WindowsFtpListParser.class.php	(revision 8952)
+++ ../../../skeleton/peer/ftp/WindowsFtpListParser.class.php	(working copy)
@@ -22,7 +22,7 @@
      * @param   string raw a single line
      * @return  &peer.ftp.FtpEntry
      */
-    public function &entryFrom($raw) {
+    public function entryFrom($raw) {
       preg_match(
         '/([0-9]{2})-([0-9]{2})-([0-9]{2}) +([0-9]{2}):([0-9]{2})(AM|PM) +(<DIR>)?([0-9]+)? +(.+)/',
         $raw,
Index: ../../../skeleton/peer/ftp/FtpListParser.class.php
===================================================================
--- ../../../skeleton/peer/ftp/FtpListParser.class.php	(revision 8952)
+++ ../../../skeleton/peer/ftp/FtpListParser.class.php	(working copy)
@@ -33,7 +33,7 @@
      * @param   string raw a single line
      * @return  &peer.ftp.FtpEntry
      */
-    public function &entryFrom($raw);
+    public function entryFrom($raw);
   
   }
 ?>
Index: ../../../skeleton/peer/URL.class.php
===================================================================
--- ../../../skeleton/peer/URL.class.php	(revision 8952)
+++ ../../../skeleton/peer/URL.class.php	(working copy)
@@ -282,7 +282,7 @@
      * @param   &lang.Object cmp
      * @return  bool
      */
-    public function equals(&$cmp) {
+    public function equals($cmp) {
       return is('peer.URL', $cmp) && $this->getURL() == $cmp->getURL();
     }
   }
Index: ../../../skeleton/peer/server/ConnectionListener.class.php
===================================================================
--- ../../../skeleton/peer/server/ConnectionListener.class.php	(revision 8952)
+++ ../../../skeleton/peer/server/ConnectionListener.class.php	(working copy)
@@ -32,7 +32,7 @@
      * @access  public
      * @param   &peer.server.ConnectionEvent event
      */
-    public function connected(&$event) {
+    public function connected($event) {
     }
     
     /**
@@ -53,7 +53,7 @@
      * @access  public
      * @param   &peer.server.ConnectionEvent event
      */
-    public function data(&$event) { 
+    public function data($event) { 
     }
     
     /**
@@ -67,7 +67,7 @@
      * @access  public
      * @param   &peer.server.ConnectionEvent event
      */
-    public function disconnected(&$event) { 
+    public function disconnected($event) { 
     }
     
     /**
@@ -82,7 +82,7 @@
      * @access  public
      * @param   &peer.server.ConnectionEvent event
      */
-    public function error(&$event) { 
+    public function error($event) { 
     }
   
   }
Index: ../../../skeleton/peer/server/ForkingServer.class.php
===================================================================
--- ../../../skeleton/peer/server/ForkingServer.class.php	(revision 8952)
+++ ../../../skeleton/peer/server/ForkingServer.class.php	(working copy)
@@ -26,7 +26,7 @@
       $tcp= getprotobyname('tcp');
       while (!$this->terminate) {
         try {
-          $m= &$this->socket->accept();
+          $m= $this->socket->accept();
         } catch (IOException $e) {
           $this->shutdown();
           break;
Index: ../../../skeleton/peer/server/Server.class.php
===================================================================
--- ../../../skeleton/peer/server/Server.class.php	(revision 8952)
+++ ../../../skeleton/peer/server/Server.class.php	(working copy)
@@ -76,13 +76,13 @@
      * @param   &peer.server.ConnectionListener listener
      * @return  &peer.server.ConnectionListener the added listener
      */
-    public function &addListener(&$listener) {
+    public function addListener($listener) {
       if (!$this->protocol) {
-        $c= &XPClass::forName('peer.server.protocol.ListenerWrapperProtocol');
-        $this->protocol= &$c->newInstance();
+        $c= XPClass::forName('peer.server.protocol.ListenerWrapperProtocol');
+        $this->protocol= $c->newInstance();
       }
 
-      $listener->server= &$this;
+      $listener->server= $this;
       $this->protocol->addListener($listener);
       return $listener;
     }
@@ -94,9 +94,9 @@
      * @param   &peer.server.ServerProtocol protocol
      * @return  &peer.server.ServerProtocol protocol
      */
-    public function &setProtocol(&$protocol) {
-      $protocol->server= &$this;
-      $this->protocol= &$protocol;
+    public function setProtocol($protocol) {
+      $protocol->server= $this;
+      $this->protocol= $protocol;
       return $protocol;
     }
 
@@ -165,13 +165,13 @@
           // In case the accept() call fails, break out of the loop and terminate
           // the server - this really should not happen!
           if ($handle === $accepting) {
-            if (!($m= &$this->socket->accept())) {
+            if (!($m= $this->socket->accept())) {
               throw(new SocketException('Call to accept() failed'));
             }
             
             $this->tcpnodelay && $m->setOption($tcp, TCP_NODELAY, TRUE);
             $this->protocol->handleConnect($m);
-            $handles[(int)$m->getHandle()]= &$m;
+            $handles[(int)$m->getHandle()]= $m;
             continue;
           }
           
Index: ../../../skeleton/peer/server/protocol/ListenerWrapperProtocol.class.php
===================================================================
--- ../../../skeleton/peer/server/protocol/ListenerWrapperProtocol.class.php	(revision 8952)
+++ ../../../skeleton/peer/server/protocol/ListenerWrapperProtocol.class.php	(working copy)
@@ -26,8 +26,8 @@
      * @access  public
      * @param   &peer.server.ConnectionListener listener
      */
-    public function addListener(&$listener) {      
-      $this->listeners[]= &$listener;
+    public function addListener($listener) {      
+      $this->listeners[]= $listener;
     }
     
     /**
@@ -44,7 +44,7 @@
      * @access  protected
      * @param   &peer.server.ConnectionEvent event
      */
-    public function notify(&$event) {
+    public function notify($event) {
       for ($i= 0, $s= sizeof($this->listeners); $i < $s; $i++) {
         $this->listeners[$i]->{$event->type}($event);
       }
@@ -56,7 +56,7 @@
      * @access  public
      * @param   &peer.Socket
      */
-    public function handleConnect(&$socket) {
+    public function handleConnect($socket) {
       $this->notify(new ConnectionEvent(EVENT_CONNECTED, $socket));
     }
 
@@ -66,7 +66,7 @@
      * @access  public
      * @param   &peer.Socket
      */
-    public function handleDisconnect(&$socket) {
+    public function handleDisconnect($socket) {
        $this->notify(new ConnectionEvent(EVENT_DISCONNECTED, $socket));
      }
   
@@ -77,7 +77,7 @@
      * @param   &peer.Socket
      * @return  mixed
      */
-    public function handleData(&$socket) { 
+    public function handleData($socket) { 
       try {
         if (NULL === ($data= $socket->readBinary())) throw(new IOException('EOF'));
       } catch (IOException $e) {
@@ -94,7 +94,7 @@
      * @param   &peer.Socket
      * @param   &lang.Exception e
      */
-    public function handleError(&$socket, &$e) {
+    public function handleError($socket, $e) {
       $this->notify(new ConnectionEvent(EVENT_ERROR, $socket, $e));
     }
 
Index: ../../../skeleton/peer/server/ServerProtocol.class.php
===================================================================
--- ../../../skeleton/peer/server/ServerProtocol.class.php	(revision 8952)
+++ ../../../skeleton/peer/server/ServerProtocol.class.php	(working copy)
@@ -26,7 +26,7 @@
      * @access  public
      * @param   &peer.Socket socket
      */
-    public function handleConnect(&$socket);
+    public function handleConnect($socket);
 
     /**
      * Handle client disconnect
@@ -34,7 +34,7 @@
      * @access  public
      * @param   &peer.Socket socket
      */
-    public function handleDisconnect(&$socket);
+    public function handleDisconnect($socket);
   
     /**
      * Handle client data
@@ -43,7 +43,7 @@
      * @param   &peer.Socket socket
      * @return  mixed
      */
-    public function handleData(&$socket);
+    public function handleData($socket);
 
     /**
      * Handle I/O error
@@ -52,7 +52,7 @@
      * @param   &peer.Socket socket
      * @param   &lang.Exception e
      */
-    public function handleError(&$socket, &$e);
+    public function handleError($socket, $e);
   
   }
 ?>
Index: ../../../skeleton/peer/server/PreforkingServer.class.php
===================================================================
--- ../../../skeleton/peer/server/PreforkingServer.class.php	(revision 8952)
+++ ../../../skeleton/peer/server/PreforkingServer.class.php	(working copy)
@@ -46,8 +46,8 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setTrace(&$cat) {
-      $this->cat= &$cat;
+    public function setTrace($cat) {
+      $this->cat= $cat;
     }
 
     /**
@@ -71,7 +71,7 @@
      * @access  private
      * @param   array children
      */
-    public function _killChildren(&$children) {
+    public function _killChildren($children) {
       foreach ($children as $pid => $i) {
         $this->cat && $this->cat->infof('Server #%d: Terminating child #%d with pid %d', getmypid(), $i, $pid);
         posix_kill($pid, SIGINT);
@@ -91,7 +91,7 @@
     public function handleChild() {
       
       // Install child signal handler
-      pcntl_signal(SIGINT, array(&$this, 'handleSignal'));
+      pcntl_signal(SIGINT, array($this, 'handleSignal'));
 
       // Handle initialization of protocol. This is called once for 
       // every new child created
@@ -111,7 +111,7 @@
           
           // There is data on the socket.
           // Handle it!
-          $m= &$this->socket->accept();
+          $m= $this->socket->accept();
         } catch (IOException $e) {
           $this->cat && $this->cat->warn('Child', getmypid(), 'in accept ~', $e);
           return;
@@ -172,8 +172,8 @@
         // process id of the process we are running in) will cleanly shut
         // down this server. If this server is run within a thread (which
         // is recommended), a $thread->stop() will accomplish this.
-        pcntl_signal(SIGINT, array(&$this, 'handleSignal'));
-        pcntl_signal(SIGHUP, array(&$this, 'handleSignal'));
+        pcntl_signal(SIGINT, array($this, 'handleSignal'));
+        pcntl_signal(SIGHUP, array($this, 'handleSignal'));
         
         // Wait until we are supposed to terminate. This condition variable
         // is set to TRUE by the signal handler. Sleep a second to decrease
Index: ../../../skeleton/peer/server/ConnectionEvent.class.php
===================================================================
--- ../../../skeleton/peer/server/ConnectionEvent.class.php	(revision 8952)
+++ ../../../skeleton/peer/server/ConnectionEvent.class.php	(working copy)
@@ -25,9 +25,9 @@
      * @param   &peer.Socket stream
      * @param   mixed data default NULL
      */
-    public function __construct($type, &$stream, $data= NULL) {
+    public function __construct($type, $stream, $data= NULL) {
       $this->type= $type;
-      $this->stream= &$stream;
+      $this->stream= $stream;
       $this->data= $data;
       
     }
Index: ../../../skeleton/peer/webdav/WebdavClient.class.php
===================================================================
--- ../../../skeleton/peer/webdav/WebdavClient.class.php	(revision 8952)
+++ ../../../skeleton/peer/webdav/WebdavClient.class.php	(working copy)
@@ -60,7 +60,7 @@
      * @param   mixed url either a string or a peer.URL object
      */
     public function __construct($url) {
-      if (!is('URL', $url)) $this->url= new URL($url); else $this->url= &$url;
+      if (!is('URL', $url)) $this->url= new URL($url); else $this->url= $url;
     }
     
     /**
@@ -70,7 +70,7 @@
      * @param   string uri
      * @return  &peer.webdav.WebdavConnection
      */
-    public function &getConnection($uri= NULL) {
+    public function getConnection($uri= NULL) {
       $url= new URL($this->url->getURL().$this->path.($uri === NULL ? '' : '/'.$uri));
       return new WebdavConnection($url);
     }
@@ -95,8 +95,8 @@
      */
     public function exists($uri) {    
       try {
-        $c= &$this->getConnection($uri);
-        $response= &$c->head();
+        $c= $this->getConnection($uri);
+        $response= $c->head();
       } catch (Exception $e) {
         throw($e);
       }
@@ -113,10 +113,10 @@
      * @return  &peer.http.HttpResponse response object
      * @see     rfc://2518
      */
-    public function &read($uri= NULL, $xml= NULL, $depth= '1') {     
+    public function read($uri= NULL, $xml= NULL, $depth= '1') {     
       try {
-        $c= &$this->getConnection($uri);
-        $response= &$c->propfind(
+        $c= $this->getConnection($uri);
+        $response= $c->propfind(
           $xml,
           array(
             new Header('Depth', $depth)
@@ -137,7 +137,7 @@
      * @return  &peer.http.HttpResponse response object
      * @see     rfc://2518
      */
-    public function &put(&$file, $uri= NULL) {  
+    public function put($file, $uri= NULL) {  
       // If no uri or filename is specified, take the original filename  
       if ($uri === NULL) $uri= $file->getFilename();
             
@@ -146,8 +146,8 @@
       
       if (!$file->isOpen()) $file->open(FILE_MODE_READ);
       try {
-        $c= &$this->getConnection($uri);
-        $response= &$c->put(
+        $c= $this->getConnection($uri);
+        $response= $c->put(
           $file->read($file->size()),
           array(
             new Header('Content-Type', MimeType::getByFilename($uri))
@@ -167,10 +167,10 @@
      * @return  &peer.http.HttpResponse response object
      * @see     rfc://2518
      */
-    public function &get($uri= NULL) {    
+    public function get($uri= NULL) {    
       try {
-        $c= &$this->getConnection($uri);
-        $response= &$c->get();
+        $c= $this->getConnection($uri);
+        $response= $c->get();
       } catch (Exception $e) {
         throw($e);
       }
@@ -186,10 +186,10 @@
      * @return  &peer.http.HttpResponse response object
      * @see     rfc://2518
      */
-    public function &proppatch($xml, $uri= NULL) {          
+    public function proppatch($xml, $uri= NULL) {          
       try {
-        $c= &$this->getConnection($uri);
-        $response= &$c->proppatch($xml);
+        $c= $this->getConnection($uri);
+        $response= $c->proppatch($xml);
       } catch (Exception $e) {
         throw($e);
       }
@@ -206,8 +206,8 @@
      */
     public function mkcol($uri) {        
       try {
-        $c= &$this->getConnection($uri);
-        $response= &$c->mkcol();
+        $c= $this->getConnection($uri);
+        $response= $c->mkcol();
       } catch (Exception $e) {
         throw($e);
       }
@@ -227,8 +227,8 @@
      */
     public function copy($source, $destination, $overwrite= FALSE, $depth= 'Infinity') {        
       try {
-        $c= &$this->getConnection($source);
-        $response= &$c->copy(
+        $c= $this->getConnection($source);
+        $response= $c->copy(
           NULL,
           array(
             new Header('Overwrite', $overwrite ? 'T' : 'F'),
@@ -254,8 +254,8 @@
      */
     public function move($source, $destination, $overwrite= FALSE) {   
       try {
-        $c= &$this->getConnection($source);
-        $response= &$c->move(
+        $c= $this->getConnection($source);
+        $response= $c->move(
           NULL,
           array(
             new Header('Overwrite', $overwrite ? 'T' : 'F'),
@@ -279,8 +279,8 @@
      */
     public function lock($uri, $xml) {    
       try {
-        $c= &$this->getConnection($uri);
-        $response= &$c->lock(
+        $c= $this->getConnection($uri);
+        $response= $c->lock(
           $xml,
           array(
             new Header('Timeout', 'Infinity'),
@@ -305,8 +305,8 @@
      */
     public function unlock($uri, $locktoken) {    
       try {
-        $c= &$this->getConnection($uri);
-        $response= &$c->unlock(
+        $c= $this->getConnection($uri);
+        $response= $c->unlock(
           NULL,
           array(
             new Header('Lock-Token', $locktoken)
@@ -328,8 +328,8 @@
      */
     public function delete($uri) {    
       try {
-        $c= &$this->getConnection($uri);
-        $response= &$c->delete();
+        $c= $this->getConnection($uri);
+        $response= $c->delete();
       } catch (Exception $e) {
         throw($e);
       }
@@ -346,8 +346,8 @@
      */
     public function version($uri) {    
       try {
-        $c= &$this->getConnection($uri);
-        $response= &$c->version();
+        $c= $this->getConnection($uri);
+        $response= $c->version();
       } catch (Exception $e) {
         throw($e);
       }
@@ -364,8 +364,8 @@
      */
     public function report($uri) {    
       try {
-        $c= &$this->getConnection($uri);
-        $response= &$c->report();
+        $c= $this->getConnection($uri);
+        $response= $c->report();
       } catch (Exception $e) {
         throw($e);
       }
Index: ../../../skeleton/peer/ServerSocket.class.php
===================================================================
--- ../../../skeleton/peer/ServerSocket.class.php	(revision 8952)
+++ ../../../skeleton/peer/ServerSocket.class.php	(working copy)
@@ -151,7 +151,7 @@
      * @return  &mixed a peer.BSDSocket object or FALSE
      * @throws  peer.SocketException in case of an error
      */
-    public function &accept() {
+    public function accept() {
       if (0 > ($msgsock= socket_accept($this->_sock))) {
         throw(new SocketException(sprintf(
           'Accept failed',
Index: ../../../skeleton/peer/sieve/SieveClient.class.php
===================================================================
--- ../../../skeleton/peer/sieve/SieveClient.class.php	(revision 8952)
+++ ../../../skeleton/peer/sieve/SieveClient.class.php	(working copy)
@@ -308,8 +308,8 @@
           $str= base64_decode($this->_sock->readLine());
           $this->cat && $this->cat->debug('Challenge (length '.$len.'):', $str);
           try {
-            $challenge= &DigestChallenge::fromString($str);
-            $response= &$challenge->responseFor(DC_QOP_AUTH, $user, $pass, $auth);
+            $challenge= DigestChallenge::fromString($str);
+            $response= $challenge->responseFor(DC_QOP_AUTH, $user, $pass, $auth);
           } catch (FormatException $e) {
             throw($e);
           }
@@ -369,10 +369,10 @@
     public function getScripts() {
       $r= array();
       foreach ($this->getScriptNames() as $name => $info) {
-        with ($s= &$this->getScript($name)); {
+        with ($s= $this->getScript($name)); {
           $s->setActive('ACTIVE' == $info);         // Only one at a time
         }
-        $r[]= &$s;
+        $r[]= $s;
       }
       return $r;
     }
@@ -405,7 +405,7 @@
      * @param   string name
      * @return  &peer.sieve.SieveScript script
      */
-    public function &getScript($name) {
+    public function getScript($name) {
       $this->_sendcmd('GETSCRIPT "%s"', $name);
       if (!($r= $this->_response())) return $r;
       
@@ -442,7 +442,7 @@
      * @param   &peer.sieve.SieveScript script
      * @return  bool success
      */
-    public function putScript(&$script) {
+    public function putScript($script) {
       $this->_sendcmd('PUTSCRIPT "%s" {%d+}', $script->getName(), $script->getLength());
       $this->_sendcmd($script->getCode());
       return $this->_response(TRUE);
@@ -480,7 +480,7 @@
      * @param   &peer.sieve.SieveScript script
      * @return  bool success
      */
-    public function hasSpaceFor(&$script) {
+    public function hasSpaceFor($script) {
       $this->_sendcmd('HAVESPACE "%s" %d', $script->getName(), $script->getLength());
       return $this->_response(TRUE, FALSE);
     }
@@ -507,8 +507,8 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setTrace(&$cat) { 
-      $this->cat= &$cat;
+    public function setTrace($cat) { 
+      $this->cat= $cat;
     }
 
   } 
Index: ../../../skeleton/peer/BSDSocket.class.php
===================================================================
--- ../../../skeleton/peer/BSDSocket.class.php	(revision 8952)
+++ ../../../skeleton/peer/BSDSocket.class.php	(working copy)
@@ -243,7 +243,7 @@
       }
       
       if (FALSE === ($n= socket_select(
-        $r= array(&$this->_sock),             // Read
+        $r= array($this->_sock),             // Read
         $w= NULL,                             // Write
         $e= NULL,                             // Except
         $tv_sec,
Index: ../../../skeleton/peer/news/NntpConnection.class.php
===================================================================
--- ../../../skeleton/peer/news/NntpConnection.class.php	(revision 8952)
+++ ../../../skeleton/peer/news/NntpConnection.class.php	(working copy)
@@ -50,8 +50,8 @@
      * @access  private
      * @param   &peer.URL url
      */
-    public function __construct(&$url) {
-      $this->url= &$url;
+    public function __construct($url) {
+      $this->url= $url;
       $this->_sock= new Socket(
         $this->url->getHost(),
         $this->url->getPort(119)
@@ -64,8 +64,8 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setTrace(&$cat) {
-      $this->cat= &$cat;
+    public function setTrace($cat) {
+      $this->cat= $cat;
     }
     
     /**
@@ -240,7 +240,7 @@
      * @access  public
      * @return  &peer.news.Newsgroup[]
      */
-    public function &getGroups() {
+    public function getGroups() {
       $status= $this->_sendcmd('LIST');
       if (!NntpReply::isPositiveCompletion($status))
         throw(new IOException('Could not get groups'));
@@ -261,7 +261,7 @@
      * @return  &peer.news.Article
      * @throws  io.IOException in case article could not be retrieved
      */
-    public function &getArticle($id= NULL) {
+    public function getArticle($id= NULL) {
       $status= $this->_sendcmd('ARTICLE', $id);
       if (!NntpReply::isPositiveCompletion($status)) 
         throw(new IOException('Could not get article'));
@@ -354,7 +354,7 @@
      * @return  &peer.news.Article
      * @throws  io.IOException in case article could not be retrieved
      */
-    public function &getNextArticle() {
+    public function getNextArticle() {
       $status= $this->_sendcmd('NEXT');
       if (!NntpReply::isPositiveCompletion($status)) 
         throw(new IOException('Could not get next article'));
@@ -369,7 +369,7 @@
      * @return  &peer.news.Article
      * @throws  io.IOException in case article could not be retrieved
      */
-    public function &getLastArticle() {
+    public function getLastArticle() {
       $status= $this->_sendcmd('LAST');
       if (!NntpReply::isPositiveCompletion($status)) 
         throw(new IOException('Could not get last article'));
@@ -403,7 +403,7 @@
      * @param   string range default NULL
      * @return  &int[] articleId
      */
-    public function &getOverview($range= NULL) {
+    public function getOverview($range= NULL) {
       $status= $this->_sendcmd('XOVER', $range);
       if (!NntpReply::isPositiveCompletion($status))
         throw(new IOException('Could not get overview'));
@@ -423,7 +423,7 @@
      * @param   string newsgroup
      * @return  array messageId
      */ 
-    public function newNews(&$date, $newsgroup) {
+    public function newNews($date, $newsgroup) {
       $status= $this->_sendcmd(
         'NEWNEWS',
         $newsgroup,
@@ -445,7 +445,7 @@
      * @param   &util.Date date
      * @return  array &peer.news.Newsgroup
      */
-    public function newGroups(&$date) {
+    public function newGroups($date) {
       $status= $this->_sendcmd(
         'NEWGROUPS',
         $date->format('%y%m%d %H%M%S')
Index: ../../../skeleton/peer/irc/IRCConnection.class.php
===================================================================
--- ../../../skeleton/peer/irc/IRCConnection.class.php	(revision 8952)
+++ ../../../skeleton/peer/irc/IRCConnection.class.php	(working copy)
@@ -60,8 +60,8 @@
      * @param   string server
      * @param   int port default 6667
      */
-    public function __construct(&$user, $server, $port= 6667) {
-      $this->user= &$user;
+    public function __construct($user, $server, $port= 6667) {
+      $this->user= $user;
       $this->sock= new Socket($server, $port);
     }
     
@@ -73,8 +73,8 @@
      * @param   &peer.irc.IRCConnectionListener listener
      * @return  &peer.irc.IRCConnectionListener the listener added
      */
-    public function &addListener(&$listener) {
-      $this->listeners[]= &$listener;
+    public function addListener($listener) {
+      $this->listeners[]= $listener;
       return $listener;
     }
     
@@ -84,8 +84,8 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setTrace(&$cat) {
-      $this->cat= &$cat;
+    public function setTrace($cat) {
+      $this->cat= $cat;
     }
   
     /**
@@ -121,7 +121,7 @@
           $function, 
           var_export(array_slice($a, 1), 1)
         );
-        call_user_func_array(array(&$this->listeners[$i], $function), $a);
+        call_user_func_array(array($this->listeners[$i], $function), $a);
       }
     }
     
Index: ../../../skeleton/peer/irc/IRCConnectionListener.class.php
===================================================================
--- ../../../skeleton/peer/irc/IRCConnectionListener.class.php	(revision 8952)
+++ ../../../skeleton/peer/irc/IRCConnectionListener.class.php	(working copy)
@@ -26,7 +26,7 @@
      * @param   &peer.irc.IRCConnection connection
      * @param   string data
      */
-    public function onPings(&$connection, $data) { }
+    public function onPings($connection, $data) { }
 
     /**
      * Callback for when a connection to the IRC server has been 
@@ -38,7 +38,7 @@
      * @param   string server
      * @param   int port
      */
-    public function onConnect(&$connection, $server, $port) { }
+    public function onConnect($connection, $server, $port) { }
 
     /**
      * Callback for when a connection to the IRC server has been 
@@ -51,7 +51,7 @@
      * @param   string server
      * @param   int port
      */
-    public function onDisconnect(&$connection, $server, $port) { }
+    public function onDisconnect($connection, $server, $port) { }
     
     /**
      * Callback for server message MOTDSTART (375)
@@ -62,7 +62,7 @@
      * @param   string target whom the message is for
      * @param   string data
      */
-    public function onMOTDStart(&$connection, $server, $target, $data) { }
+    public function onMOTDStart($connection, $server, $target, $data) { }
 
     /**
      * Callback for server message MOTD (372)
@@ -73,7 +73,7 @@
      * @param   string target whom the message is for
      * @param   string data
      */
-    public function onMOTD(&$connection, $server, $target, $data) { }
+    public function onMOTD($connection, $server, $target, $data) { }
 
     /**
      * Callback for server message REPLY_ENDOFMOTD (376)
@@ -84,7 +84,7 @@
      * @param   string target whom the message is for
      * @param   string data
      */
-    public function onEndOfMOTD(&$connection, $server, $target, $data) { }
+    public function onEndOfMOTD($connection, $server, $target, $data) { }
     
     /**
      * Callback for all other server messages
@@ -96,7 +96,7 @@
      * @param   string target whom the message is for
      * @param   string data
      */
-    public function onServerMessage(&$connection, $server, $code, $target, $data) { }
+    public function onServerMessage($connection, $server, $code, $target, $data) { }
 
     /**
      * Callback for invitations. Note: Due to the limitations of the INVITE
@@ -114,7 +114,7 @@
      * @param   string who who is invited
      * @param   string channel invitation is for
      */
-    public function onInvite(&$connection, $nick, $who, $channel) { }
+    public function onInvite($connection, $nick, $who, $channel) { }
 
     /**
      * Callback for kicks
@@ -133,7 +133,7 @@
      * @param   string who who was kicked
      * @param   string reason what reason the user was kicked for
      */
-    public function onKicks(&$connection, $channel, $nick, $who, $reason) { }
+    public function onKicks($connection, $channel, $nick, $who, $reason) { }
 
     /**
      * Callback for quits
@@ -144,7 +144,7 @@
      * @param   string nick who quit
      * @param   string reason what reason the user supplied for quitting
      */
-    public function onQuits(&$connection, $channel, $nick, $reason) { }
+    public function onQuits($connection, $channel, $nick, $reason) { }
 
     /**
      * Callback for nick changes
@@ -154,7 +154,7 @@
      * @param   string nick the old nick
      * @param   string new the new nick
      */
-    public function onNickChanges(&$connection, $nick, $new) { }
+    public function onNickChanges($connection, $nick, $new) { }
 
     /**
      * Callback for joins
@@ -173,7 +173,7 @@
      * @param   string channel which channel was joined
      * @param   string nick who joined
      */
-    public function onJoins(&$connection, $channel, $nick) { }
+    public function onJoins($connection, $channel, $nick) { }
 
     /**
      * Callback for parts
@@ -184,7 +184,7 @@
      * @param   string nick who part
      * @param   string message the part message, if any
      */
-    public function onParts(&$connection, $channel, $nick, $message) { }
+    public function onParts($connection, $channel, $nick, $message) { }
     
     /**
      * Callback for mode changes
@@ -196,7 +196,7 @@
      * @param   string mode the mode including a + or - as its first letter
      * @param   string params additional parameters
      */
-    public function onModeChanges(&$connection, $nick, $target, $mode, $params) { }
+    public function onModeChanges($connection, $nick, $target, $mode, $params) { }
   
     /**
      * Callback for private messages
@@ -217,7 +217,7 @@
      * @param   string target
      * @param   string message
      */
-    public function onPrivateMessage(&$connection, $nick, $target, $message) { }
+    public function onPrivateMessage($connection, $nick, $target, $message) { }
 
     /**
      * Callback for topic changes
@@ -228,7 +228,7 @@
      * @param   string channel what channel the topic was changed for
      * @param   string topic the new topic
      */
-    public function onTopic(&$connection, $nick, $channel, $topic) { }
+    public function onTopic($connection, $nick, $channel, $topic) { }
 
     /**
      * Callback for notices
@@ -239,7 +239,7 @@
      * @param   string target
      * @param   string message
      */
-    public function onNotice(&$connection, $nick, $target, $message) { }
+    public function onNotice($connection, $nick, $target, $message) { }
 
     /**
      * Callback for actions. Actions are when somebody writes /me ...
@@ -256,7 +256,7 @@
      * @param   string target where action was initiated
      * @param   string action what actually happened (e.g. "looks around")
      */
-    public function onAction(&$connection, $nick, $target, $action) { }
+    public function onAction($connection, $nick, $target, $action) { }
 
     /**
      * Callback for CTCP VERSION
@@ -267,7 +267,7 @@
      * @param   string target where version was requested
      * @param   string params additional parameters
      */
-    public function onVersion(&$connection, $nick, $target, $params) { }
+    public function onVersion($connection, $nick, $target, $params) { }
 
     /**
      * Callback for CTCP USERINFO
@@ -278,7 +278,7 @@
      * @param   string target where user information was requested
      * @param   string params additional parameters
      */
-    public function onUserInfo(&$connection, $nick, $target, $params) { }
+    public function onUserInfo($connection, $nick, $target, $params) { }
 
     /**
      * Callback for CTCP CLIENTINFO
@@ -289,7 +289,7 @@
      * @param   string target where client information was requested
      * @param   string params additional parameters
      */
-    public function onClientInfo(&$connection, $nick, $target, $params) { }
+    public function onClientInfo($connection, $nick, $target, $params) { }
 
     /**
      * Callback for CTCP PING
@@ -300,7 +300,7 @@
      * @param   string target where ping was requested
      * @param   string params additional parameters
      */
-    public function onPing(&$connection, $nick, $target, $params) { }
+    public function onPing($connection, $nick, $target, $params) { }
 
     /**
      * Callback for CTCP TIME
@@ -311,7 +311,7 @@
      * @param   string target where time was requested
      * @param   string params additional parameters
      */
-    public function onTime(&$connection, $nick, $target, $params) { }
+    public function onTime($connection, $nick, $target, $params) { }
 
     /**
      * Callback for CTCP FINGER
@@ -322,7 +322,7 @@
      * @param   string target where finger information was requested
      * @param   string params additional parameters
      */
-    public function onFinger(&$connection, $nick, $target, $params) { }
+    public function onFinger($connection, $nick, $target, $params) { }
   
   }
 ?>
Index: ../../../skeleton/remote/HandlerFactory.class.php
===================================================================
--- ../../../skeleton/remote/HandlerFactory.class.php	(revision 8952)
+++ ../../../skeleton/remote/HandlerFactory.class.php	(working copy)
@@ -28,7 +28,7 @@
      * @access  public
      */
     public static function __static() {
-      $self= &HandlerFactory::getInstance();
+      $self= HandlerFactory::getInstance();
       $self->register('xp', XPClass::forName('remote.protocol.XpProtocolHandler'));
     }
     
@@ -39,7 +39,7 @@
      * @access  public
      * @return  &remote.HandlerFactory
      */
-    public static function &getInstance() {
+    public static function getInstance() {
       static $instance= NULL;
       
       if (!isset($instance)) $instance= new HandlerFactory();
@@ -54,8 +54,8 @@
      * @param   &lang.XPClass<remote.protocol.ProtocolHandler> handler class
      * @return  &lang.XPClass<remote.protocol.ProtocolHandler>
      */
-    public function &register($type, &$handler) {
-      $this->handlers[$type]= &$handler;
+    public function register($type, $handler) {
+      $this->handlers[$type]= $handler;
       return $handler;
     }
   
@@ -68,8 +68,8 @@
      * @return  &lang.XPClass<remote.protocol.ProtocolHandler>
      * @throws  remote.protocol.UnknownProtocolException
      */
-    public static function &handlerFor($type) {
-      $self= &HandlerFactory::getInstance();
+    public static function handlerFor($type) {
+      $self= HandlerFactory::getInstance();
       if (!isset($self->handlers[$type])) {
         throw(new UnknownProtocolException($type));
       }
Index: ../../../skeleton/remote/protocol/SerializerMapping.class.php
===================================================================
--- ../../../skeleton/remote/protocol/SerializerMapping.class.php	(revision 8952)
+++ ../../../skeleton/remote/protocol/SerializerMapping.class.php	(working copy)
@@ -20,7 +20,7 @@
      * @param   array<string, mixed> context default array()
      * @return  &mixed
      */
-    public function &valueOf(&$serializer, &$serialized, $context= array());
+    public function valueOf($serializer, $serialized, $context= array());
 
     /**
      * Returns an on-the-wire representation of the given value
@@ -31,7 +31,7 @@
      * @param   array<string, mixed> context default array()
      * @return  string
      */
-    public function representationOf(&$serializer, &$value, $context= array());
+    public function representationOf($serializer, $value, $context= array());
     
     /**
      * Return XPClass object of class supported by this mapping
@@ -39,6 +39,6 @@
      * @access  public
      * @return  &lang.XPClass
      */
-    public function &handledClass();
+    public function handledClass();
   }
 ?>
Index: ../../../skeleton/remote/protocol/SerializedData.class.php
===================================================================
--- ../../../skeleton/remote/protocol/SerializedData.class.php	(revision 8952)
+++ ../../../skeleton/remote/protocol/SerializedData.class.php	(working copy)
@@ -22,7 +22,7 @@
      * @param   string buffer
      */
     public function __construct($buffer) {
-      $this->buffer= &$buffer;
+      $this->buffer= $buffer;
       $this->offset= 0;
     }
     
Index: ../../../skeleton/remote/protocol/DoubleMapping.class.php
===================================================================
--- ../../../skeleton/remote/protocol/DoubleMapping.class.php	(revision 8952)
+++ ../../../skeleton/remote/protocol/DoubleMapping.class.php	(working copy)
@@ -24,7 +24,7 @@
      * @param   array<string, mixed> context default array()
      * @return  &mixed
      */
-    public function &valueOf(&$serializer, &$serialized, $context= array()) {
+    public function valueOf($serializer, $serialized, $context= array()) {
       // No implementation
     }
 
@@ -37,7 +37,7 @@
      * @param   array<string, mixed> context default array()
      * @return  string
      */
-    public function representationOf(&$serializer, &$value, $context= array()) {
+    public function representationOf($serializer, $value, $context= array()) {
       return 'd:'.$value->value.';';
     }
     
@@ -47,7 +47,7 @@
      * @access  public
      * @return  &lang.XPClass
      */
-    public function &handledClass() {
+    public function handledClass() {
       return XPClass::forName('lang.types.Double');
     }
   } 
Index: ../../../skeleton/remote/protocol/ArrayListMapping.class.php
===================================================================
--- ../../../skeleton/remote/protocol/ArrayListMapping.class.php	(revision 8952)
+++ ../../../skeleton/remote/protocol/ArrayListMapping.class.php	(working copy)
@@ -23,13 +23,13 @@
      * @param   array<string, mixed> context default array()
      * @return  &mixed
      */
-    public function &valueOf(&$serializer, &$serialized, $context= array()) {
+    public function valueOf($serializer, $serialized, $context= array()) {
       $a= new ArrayList();
       $size= $serialized->consumeSize();
       
       $serialized->offset++;  // Opening "{"
       for ($i= 0; $i < $size; $i++) {
-        $a->values[$i]= &$serializer->valueOf($serialized, $context);
+        $a->values[$i]= $serializer->valueOf($serialized, $context);
       }
       $serialized->offset++;  // Closing "}"
       return $a;
@@ -44,7 +44,7 @@
      * @param   array<string, mixed> context default array()
      * @return  string
      */
-    public function representationOf(&$serializer, &$value, $context= array()) {
+    public function representationOf($serializer, $value, $context= array()) {
       $s= 'A:'.sizeof($value->values).':{';
       foreach (array_keys($value->values) as $key) {
         $s.= $serializer->representationOf($value->values[$key], $context);
@@ -58,7 +58,7 @@
      * @access  public
      * @return  &lang.XPClass
      */
-    public function &handledClass() {
+    public function handledClass() {
       return XPClass::forName('lang.types.ArrayList');
     }
   } 
Index: ../../../skeleton/remote/protocol/RemoteInterfaceMapping.class.php
===================================================================
--- ../../../skeleton/remote/protocol/RemoteInterfaceMapping.class.php	(revision 8952)
+++ ../../../skeleton/remote/protocol/RemoteInterfaceMapping.class.php	(working copy)
@@ -33,20 +33,34 @@
      * @param   array<string, mixed> context default array()
      * @return  &mixed
      */
-    public function &valueOf(&$serializer, &$serialized, $context= array()) {
+<<<<<<< .mine
+<<<<<<< .mine
+    function valueOf($serializer, $serialized, $context= array()) {
+=======
+    public function valueOf($serializer, $serialized, $context= array()) {
+>>>>>>> .r8952
       $oid= $serialized->consumeSize();
+      $interface= $serialized->consumeSize();
+=======
+    function valueOf($serializer, $serialized, $context= array()) {
+      $oid= $serialized->consumeSize();
       $serialized->offset++;    // '{'
       $interface= $serializer->valueOf($serialized, $context);
       $serialized->offset++;    // '}'
+<<<<<<< .mine
+>>>>>>> .r8717
+      try(); {
+=======
       try {
-        $iclass= &XPClass::forName($interface);
+>>>>>>> .r8952
+        $iclass= XPClass::forName($interface);
       } catch (ClassNotFoundException $e) {
         throw($e);
       }
 
-      $cl= &ClassLoader::getDefault();      
+      $cl= ClassLoader::getDefault();      
       try {
-        $instance= &Proxy::newProxyInstance(
+        $instance= Proxy::newProxyInstance(
           $cl, 
           array($iclass), 
           RemoteInvocationHandler::newInstance((int)$oid, $context['handler'])
@@ -67,7 +81,7 @@
      * @param   array<string, mixed> context default array()
      * @return  string
      */
-    public function representationOf(&$serializer, &$var, $context= array()) {
+    public function representationOf($serializer, $var, $context= array()) {
       static $oid=  0;
       
       // Check if we've serialized this object before by looking it up
@@ -83,9 +97,9 @@
       $eoid= $context[RIH_OIDS_KEY]->get($var->hashCode());
       
       // Find home interface
-      $class= &$var->getClass();
+      $class= $var->getClass();
       
-      foreach (($interfaces= &$class->getInterfaces()) as $interface) {
+      foreach (($interfaces= $class->getInterfaces()) as $interface) {
         if ($interface->isSubclassOf('remote.beans.BeanInterface')) {
           return 'I:'.$eoid.':{'.$serializer->representationOf($interface->getName(), $context).'}';
         }
@@ -100,7 +114,7 @@
      * @access  public
      * @return  &lang.XPClass
      */
-    public function &handledClass() {
+    public function handledClass() {
       return XPClass::forName('lang.reflect.Proxy');
     }
   } 
Index: ../../../skeleton/remote/protocol/DateMapping.class.php
===================================================================
--- ../../../skeleton/remote/protocol/DateMapping.class.php	(revision 8952)
+++ ../../../skeleton/remote/protocol/DateMapping.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @param   array<string, mixed> context default array()
      * @return  &mixed
      */
-    public function &valueOf(&$serializer, &$serialized, $context= array()) {
+    public function valueOf($serializer, $serialized, $context= array()) {
       $value= new Date((int)$serialized->consumeWord());
       return $value;
     }
@@ -37,7 +37,7 @@
      * @param   array<string, mixed> context default array()
      * @return  string
      */
-    public function representationOf(&$serializer, &$value, $context= array()) {
+    public function representationOf($serializer, $value, $context= array()) {
       return 'T:'.$value->getTime().';';
     }
     
@@ -47,7 +47,7 @@
      * @access  public
      * @return  &lang.XPClass
      */
-    public function &handledClass() {
+    public function handledClass() {
       return XPClass::forName('util.Date');
     }
   } 
Index: ../../../skeleton/remote/protocol/HashmapMapping.class.php
===================================================================
--- ../../../skeleton/remote/protocol/HashmapMapping.class.php	(revision 8952)
+++ ../../../skeleton/remote/protocol/HashmapMapping.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @param   array<string, mixed> context default array()
      * @return  &mixed
      */
-    public function &valueOf(&$serializer, &$serialized, $context= array()) {
+    public function valueOf($serializer, $serialized, $context= array()) {
       // No implementation
     }
 
@@ -36,7 +36,7 @@
      * @param   array<string, mixed> context default array()
      * @return  string
      */
-    public function representationOf(&$serializer, &$value, $context= array()) {
+    public function representationOf($serializer, $value, $context= array()) {
       return $serializer->representationOf($value->_hash, $context);
     }
     
@@ -46,7 +46,7 @@
      * @access  public
      * @return  &lang.XPClass
      */
-    public function &handledClass() {
+    public function handledClass() {
       return XPClass::forName('util.Hashmap');
     }
   } 
Index: ../../../skeleton/remote/protocol/ProtocolHandler.class.php
===================================================================
--- ../../../skeleton/remote/protocol/ProtocolHandler.class.php	(revision 8952)
+++ ../../../skeleton/remote/protocol/ProtocolHandler.class.php	(working copy)
@@ -21,7 +21,7 @@
      * @param   &peer.URL proxy
      * @throws  remote.RemoteException
      */
-    public function initialize(&$proxy);
+    public function initialize($proxy);
     
     /**
      * Look up an object by its name
@@ -31,7 +31,7 @@
      * @param   &lang.Object
      * @throws  remote.RemoteException
      */
-    public function &lookup($name);
+    public function lookup($name);
 
     /**
      * Invoke a method on a given object id with given method name
@@ -44,6 +44,6 @@
      * @return  &mixed
      * @throws  remote.RemoteException
      */
-    public function &invoke($oid, $method, $args);
+    public function invoke($oid, $method, $args);
   }
 ?>
Index: ../../../skeleton/remote/protocol/XpProtocolHandler.class.php
===================================================================
--- ../../../skeleton/remote/protocol/XpProtocolHandler.class.php	(revision 8952)
+++ ../../../skeleton/remote/protocol/XpProtocolHandler.class.php	(working copy)
@@ -55,7 +55,7 @@
      * @param   &mixed value
      * @return  string
      */
-    public function stringOf(&$value) {
+    public function stringOf($value) {
       if (is('Proxy', $value)) {
         $s= 'Proxy<';
         $c= get_class($value);
@@ -74,7 +74,7 @@
      * @access  public
      * @param   &peer.URL proxy
      */
-    public function initialize(&$proxy) {
+    public function initialize($proxy) {
       sscanf(
         $proxy->getParam('version', '1.0'), 
         '%d.%d', 
@@ -126,7 +126,7 @@
      * @param   string name
      * @param   &lang.Object
      */
-    public function &lookup($name) {
+    public function lookup($name) {
       $this->cat && $this->cat->infof(
         '>>> %s(%s:%d) LOOKUP %s',
         $this->getClassName(),
@@ -134,7 +134,7 @@
         $this->_sock->port,
         $name
       );
-      $r= &$this->sendPacket(REMOTE_MSG_LOOKUP, '', array(new ByteCountedString($name)));
+      $r= $this->sendPacket(REMOTE_MSG_LOOKUP, '', array(new ByteCountedString($name)));
       $this->cat && $this->cat->infof('<<< %s', $this->stringOf($r));
       return $r;
     }
@@ -146,7 +146,7 @@
      * @param   &remote.UserTransaction tran
      * @param   bool
      */
-    public function begin(&$tran) {
+    public function begin($tran) {
       $this->cat && $this->cat->infof(
         '>>> %s(%s:%d) BEGIN %s',
         $this->getClassName(),
@@ -154,7 +154,7 @@
         $this->_sock->port,
         $this->stringOf($tran)
       );
-      $r= &$this->sendPacket(REMOTE_MSG_TRAN_OP, pack('N', REMOTE_TRAN_BEGIN));
+      $r= $this->sendPacket(REMOTE_MSG_TRAN_OP, pack('N', REMOTE_TRAN_BEGIN));
       $this->cat && $this->cat->infof('<<< %s', $this->stringOf($r));
       return $r;
     }
@@ -166,7 +166,7 @@
      * @param   &remote.UserTransaction tran
      * @param   bool
      */
-    public function rollback(&$tran) {
+    public function rollback($tran) {
       $this->cat && $this->cat->infof(
         '>>> %s(%s:%d) ROLLBACK %s',
         $this->getClassName(),
@@ -174,7 +174,7 @@
         $this->_sock->port,
         $this->stringOf($tran)
       );
-      $r= &$this->sendPacket(REMOTE_MSG_TRAN_OP, pack('N', REMOTE_TRAN_ROLLBACK));
+      $r= $this->sendPacket(REMOTE_MSG_TRAN_OP, pack('N', REMOTE_TRAN_ROLLBACK));
       $this->cat && $this->cat->infof('<<< %s', $this->stringOf($r));
       return $r;
     }
@@ -186,7 +186,7 @@
      * @param   &remote.UserTransaction tran
      * @param   bool
      */
-    public function commit(&$tran) {
+    public function commit($tran) {
       $this->cat && $this->cat->infof(
         '>>> %s(%s:%d) COMMIT %s',
         $this->getClassName(),
@@ -194,7 +194,7 @@
         $this->_sock->port,
         $this->stringOf($tran)
       );
-      $r= &$this->sendPacket(REMOTE_MSG_TRAN_OP, pack('N', REMOTE_TRAN_COMMIT));
+      $r= $this->sendPacket(REMOTE_MSG_TRAN_OP, pack('N', REMOTE_TRAN_COMMIT));
       $this->cat && $this->cat->infof('<<< %s', $this->stringOf($r));
       return $r;
     }
@@ -209,7 +209,7 @@
      * @param   mixed[] args
      * @return  &mixed
      */
-    public function &invoke($oid, $method, $args) {
+    public function invoke($oid, $method, $args) {
       $this->cat && $this->cat->infof(
         '>>> %s(%s:%d) %d::%s(%s)',
         $this->getClassName(),
@@ -219,7 +219,7 @@
         $method,
         $this->stringOf($args)
       );
-      $r= &$this->sendPacket(
+      $r= $this->sendPacket(
         REMOTE_MSG_CALL, 
         pack('NN', 0, $oid),
         array(
@@ -241,7 +241,7 @@
      * @throws  remote.RemoteException for server errors
      * @throws  lang.Error for unrecoverable errors
      */
-    public function &sendPacket($type, $data= '', $bytes= array()) {
+    public function sendPacket($type, $data= '', $bytes= array()) {
       $bsize= sizeof($bytes);
       
       // Calculate packet length
@@ -282,18 +282,18 @@
       }
 
       // Perform actions based on response type
-      $ctx= array('handler' => &$this);
+      $ctx= array('handler' => $this);
       try {
         switch ($header['type']) {
           case REMOTE_MSG_VALUE:
-            $data= &ByteCountedString::readFrom($this->_sock);
+            $data= ByteCountedString::readFrom($this->_sock);
             $this->cat && $this->cat->debug('<<< Response:', addcslashes($data, "\0..\37!@\177..\377"));
             return $this->serializer->valueOf(new SerializedData($data), $ctx);
 
           case REMOTE_MSG_EXCEPTION:
-            $data= &ByteCountedString::readFrom($this->_sock);
+            $data= ByteCountedString::readFrom($this->_sock);
             $this->cat && $this->cat->debug('<<< Response:', addcslashes($data, "\0..\37!@\177..\377"));
-            $reference= &$this->serializer->valueOf(new SerializedData($data), $ctx);
+            $reference= $this->serializer->valueOf(new SerializedData($data), $ctx);
             if (is('RemoteException', $reference)) {
               throw($reference);
             } else if (is('ExceptionReference', $reference)) {
@@ -309,7 +309,7 @@
             throw(new RemoteException($message, new Error($message)));
 
           default:
-            $data= &$this->readBytes($header['length']);   // Read all left-over bytes
+            $data= $this->readBytes($header['length']);   // Read all left-over bytes
             $this->cat && $this->cat->debug('<<< Response:', addcslashes($data, "\0..\37!@\177..\377"));
             $this->_sock->close();
             throw(new Error('Unknown message type'));
@@ -341,8 +341,8 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setTrace(&$cat) {
-      $this->cat= &$cat;
+    public function setTrace($cat) {
+      $this->cat= $cat;
     }
 
   } 
Index: ../../../skeleton/remote/protocol/IntegerMapping.class.php
===================================================================
--- ../../../skeleton/remote/protocol/IntegerMapping.class.php	(revision 8952)
+++ ../../../skeleton/remote/protocol/IntegerMapping.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @param   array<string, mixed> context default array()
      * @return  &mixed
      */
-    public function &valueOf(&$serializer, &$serialized, $context= array()) {
+    public function valueOf($serializer, $serialized, $context= array()) {
       $value= new Integer($serialized->consumeWord());
       return $value;
     }
@@ -37,7 +37,7 @@
      * @param   array<string, mixed> context default array()
      * @return  string
      */
-    public function representationOf(&$serializer, &$value, $context= array()) {
+    public function representationOf($serializer, $value, $context= array()) {
       return 'i:'.$value->value.';';
     }
     
@@ -47,7 +47,7 @@
      * @access  public
      * @return  &lang.XPClass
      */
-    public function &handledClass() {
+    public function handledClass() {
       return XPClass::forName('lang.types.Integer');
     }
   } 
Index: ../../../skeleton/remote/protocol/Serializer.class.php
===================================================================
--- ../../../skeleton/remote/protocol/Serializer.class.php	(revision 8952)
+++ ../../../skeleton/remote/protocol/Serializer.class.php	(working copy)
@@ -75,7 +75,7 @@
      * @return  string
      * @throws  lang.FormatException if an error is encountered in the format 
      */  
-    public function representationOf(&$var, $ctx= array()) {
+    public function representationOf($var, $ctx= array()) {
       switch (gettype($var)) {
         case 'NULL':    return 'N;';
         case 'boolean': return 'b:'.($var ? 1 : 0).';';
@@ -89,7 +89,7 @@
           }
           return $s.'}';
         case 'object': {
-          if (FALSE !== ($m= &$this->mappingFor($var))) {
+          if (FALSE !== ($m= $this->mappingFor($var))) {
             return $m->representationOf($this, $var, $ctx);
           }
           
@@ -117,7 +117,7 @@
      * @param   &lang.Object var
      * @return  &mixed FALSE in case no mapper could be found, &remote.protocol.SerializerMapping otherwise
      */
-    public function &mappingFor(&$var) {
+    public function mappingFor($var) {
       if (!is('lang.Generic', $var)) return FALSE;
       
       // Check the mapping-cache for an entry for this object's class
@@ -129,7 +129,7 @@
       // tree of the object's class to the class being handled by the mapping.
       $cinfo= array();
       foreach (array_keys($this->mappings) as $token) {
-        $class= &$this->mappings[$token]->handledClass();
+        $class= $this->mappings[$token]->handledClass();
         if (!is($class->getName(), $var)) continue;
 
         $distance= 0;
@@ -137,10 +137,10 @@
 
           // Check for direct match
           if ($class->getName() != $var->getClassName()) $distance++;
-        } while (0 < $distance && NULL !== ($class= &$class->getParentclass()));
+        } while (0 < $distance && NULL !== ($class= $class->getParentclass()));
 
         // Register distance to object's class in cinfo
-        $cinfo[$distance]= &$this->mappings[$token];
+        $cinfo[$distance]= $this->mappings[$token];
 
         if (isset($cinfo[0])) break;
       }
@@ -151,10 +151,10 @@
       ksort($cinfo, SORT_NUMERIC);
       
       // First class is best class
-      $handlerClass= &$cinfo[key($cinfo)];
+      $handlerClass= $cinfo[key($cinfo)];
 
       // Remember this, so we can take shortcut next time
-      $this->_classMapping[$var->getClassName()]= &$cinfo[key($cinfo)];
+      $this->_classMapping[$var->getClassName()]= $cinfo[key($cinfo)];
       return $this->_classMapping[$var->getClassName()];
     }
 
@@ -167,13 +167,13 @@
      * @return  &remote.protocol.SerializerMapping mapping
      * @throws  lang.IllegalArgumentException if the given argument is not a SerializerMapping
      */
-    public function &mapping($token, &$mapping) {
+    public function mapping($token, $mapping) {
       if (NULL !== $mapping) {
         if (!is('SerializerMapping', $mapping)) throw(new IllegalArgumentException(
           'Given argument is not a SerializerMapping ('.xp::typeOf($mapping).')'
         ));
 
-        $this->mappings[$token]= &$mapping;
+        $this->mappings[$token]= $mapping;
         $this->_classMapping= array();
       }
       
@@ -216,7 +216,7 @@
      * @throws  lang.ClassNotFoundException if a class cannot be found
      * @throws  lang.FormatException if an error is encountered in the format 
      */  
-    public function &valueOf(&$serialized, $context= array()) {
+    public function valueOf($serialized, $context= array()) {
       static $types= NULL;
       
       if (!$types) $types= array(
@@ -268,7 +268,7 @@
           $serialized->offset++;  // Opening "{"
           for ($i= 0; $i < $size; $i++) {
             $key= $this->valueOf($serialized, $context);
-            $a[$key]= &$this->valueOf($serialized, $context);
+            $a[$key]= $this->valueOf($serialized, $context);
           }
           $serialized->offset++;  // Closing "}"
           return $a;
@@ -280,7 +280,7 @@
           $serialized->offset++;  // Opening "{"
           for ($i= 0; $i < $size; $i++) {
             $member= $this->valueOf($serialized, $context);
-            $instance->{$member}= &$this->valueOf($serialized, $context);
+            $instance->{$member}= $this->valueOf($serialized, $context);
           }
           $serialized->offset++; // Closing "}"
           return $instance;
@@ -289,26 +289,26 @@
         case 'O': {     // generic objects
           $name= $serialized->consumeString();
           try {
-            $class= &XPClass::forName($this->packageMapping($name));
+            $class= XPClass::forName($this->packageMapping($name));
           } catch (ClassNotFoundException $e) {
             $instance= new UnknownRemoteObject($name);
             $size= $serialized->consumeSize();
             $serialized->offset++;  // Opening "{"
             for ($i= 0; $i < $size; $i++) {
               $member= $this->valueOf($serialized, $context);
-              $members[$member]= &$this->valueOf($serialized, $context);
+              $members[$member]= $this->valueOf($serialized, $context);
             }
             $serialized->offset++; // Closing "}"
             $instance->__members= $members;
             return $instance;
           }
 
-          $instance= &$class->newInstance();
+          $instance= $class->newInstance();
           $size= $serialized->consumeSize();
           $serialized->offset++;  // Opening "{"
           for ($i= 0; $i < $size; $i++) {
             $member= $this->valueOf($serialized, $context);
-            $instance->{$member}= &$this->valueOf($serialized, $context);
+            $instance->{$member}= $this->valueOf($serialized, $context);
           }
           $serialized->offset++; // Closing "}"
           return $instance;
@@ -328,7 +328,7 @@
         }
 
         default: {      // default, check if we have a mapping
-          if (!($mapping= &$this->mapping($token, $m= NULL))) {
+          if (!($mapping= $this->mapping($token, $m= NULL))) {
             throw(new FormatException(
               'Cannot deserialize unknown type "'.$token.'" ('.$serialized->toString().')'
             ));
Index: ../../../skeleton/remote/protocol/ExceptionMapping.class.php
===================================================================
--- ../../../skeleton/remote/protocol/ExceptionMapping.class.php	(revision 8952)
+++ ../../../skeleton/remote/protocol/ExceptionMapping.class.php	(working copy)
@@ -23,26 +23,40 @@
      * @param   array<string, mixed> context default array()
      * @return  &mixed
      */
-    public function &valueOf(&$serializer, &$serialized, $context= array()) {
+    public function valueOf($serializer, $serialized, $context= array()) {
       try {
-        $class= &XPClass::forName($serializer->exceptionName($serialized->consumeString()));
+<<<<<<< .mine
+        $class= XPClass::forName($serialized->consumeString());
+=======
+        $class= XPClass::forName($serializer->exceptionName($serialized->consumeString()));
+<<<<<<< .mine
+>>>>>>> .r8717
+      } if (catch('ClassNotFoundException', $e)) {
+        return throw($e);
+=======
       } catch (ClassNotFoundException $e) {
         throw($e);
+>>>>>>> .r8952
       }
 
       $size= $serialized->consumeSize();
       $serialized->offset++;  // Opening "{"
       $data= array();
       for ($i= 0; $i < $size; $i++) {
+<<<<<<< .mine
+        $member= $this->valueOf($serialized, $context);
+        $data[$member]= $this->valueOf($serialized, $context);
+=======
         $member= $serializer->valueOf($serialized, $context);
-        $data[$member]= &$serializer->valueOf($serialized, $context);
+        $data[$member]= $serializer->valueOf($serialized, $context);
+>>>>>>> .r8717
       }
       $serialized->offset++; // Closing "}"
       
-      $instance= &$class->newInstance($data['message']);
+      $instance= $class->newInstance($data['message']);
       unset($data['message']);
       foreach (array_keys($data) as $name) {
-        $instance->{$name}= &$data[$name];
+        $instance->{$name}= $data[$name];
       }
 
       return $instance;
@@ -57,8 +71,8 @@
      * @param   array<string, mixed> context default array()
      * @return  string
      */
-    public function representationOf(&$serializer, &$value, $context= array()) {
-      $trace= &$value->getStackTrace();
+    public function representationOf($serializer, $value, $context= array()) {
+      $trace= $value->getStackTrace();
       
       if (FALSE !== ($token= array_search($value->getClassName(), $serializer->exceptions, TRUE))) {
       
@@ -88,7 +102,7 @@
      * @access  public
      * @return  &lang.XPClass
      */
-    public function &handledClass() {
+    public function handledClass() {
       return XPClass::forName('lang.Throwable');
     }
   } 
Index: ../../../skeleton/remote/protocol/StackTraceElementMapping.class.php
===================================================================
--- ../../../skeleton/remote/protocol/StackTraceElementMapping.class.php	(revision 8952)
+++ ../../../skeleton/remote/protocol/StackTraceElementMapping.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @param   array<string, mixed> context default array()
      * @return  &mixed
      */
-    public function &valueOf(&$serializer, &$serialized, $context= array()) {
+    public function valueOf($serializer, $serialized, $context= array()) {
       $size= $serialized->consumeSize();
       $details= array();
       $serialized->offset++;  // Opening "{"
@@ -53,7 +53,7 @@
      * @param   array<string, mixed> context default array()
      * @return  string
      */
-    public function representationOf(&$serializer, &$value, $context= array()) {
+    public function representationOf($serializer, $value, $context= array()) {
       return 't:4:{'.
         's:4:"file";'.$serializer->representationOf($value->file).
         's:5:"class";'.$serializer->representationOf($value->class).
@@ -68,7 +68,7 @@
      * @access  public
      * @return  &lang.XPClass
      */
-    public function &handledClass() {
+    public function handledClass() {
       return XPClass::forName('lang.StackTraceElement');
     }
   } 
Index: ../../../skeleton/remote/protocol/ShortMapping.class.php
===================================================================
--- ../../../skeleton/remote/protocol/ShortMapping.class.php	(revision 8952)
+++ ../../../skeleton/remote/protocol/ShortMapping.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @param   array<string, mixed> context default array()
      * @return  &mixed
      */
-    public function &valueOf(&$serializer, &$serialized, $context= array()) {
+    public function valueOf($serializer, $serialized, $context= array()) {
       $value= new Short($serialized->consumeWord());
       return $value;
     }
@@ -37,7 +37,7 @@
      * @param   array<string, mixed> context default array()
      * @return  string
      */
-    public function representationOf(&$serializer, &$value, $context= array()) {
+    public function representationOf($serializer, $value, $context= array()) {
       return 'S:'.$value->value.';';
     }
     
@@ -47,7 +47,7 @@
      * @access  public
      * @return  &lang.XPClass
      */
-    public function &handledClass() {
+    public function handledClass() {
       return XPClass::forName('lang.types.Short');
     }
   } 
Index: ../../../skeleton/remote/protocol/LongMapping.class.php
===================================================================
--- ../../../skeleton/remote/protocol/LongMapping.class.php	(revision 8952)
+++ ../../../skeleton/remote/protocol/LongMapping.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @param   array<string, mixed> context default array()
      * @return  &mixed
      */
-    public function &valueOf(&$serializer, &$serialized, $context= array()) {
+    public function valueOf($serializer, $serialized, $context= array()) {
       $value= new Long($serialized->consumeWord());
       return $value;
     }
@@ -37,7 +37,7 @@
      * @param   array<string, mixed> context default array()
      * @return  string
      */
-    public function representationOf(&$serializer, &$value, $context= array()) {
+    public function representationOf($serializer, $value, $context= array()) {
       return 'l:'.$value->value.';';
     }
     
@@ -47,7 +47,7 @@
      * @access  public
      * @return  &lang.XPClass
      */
-    public function &handledClass() {
+    public function handledClass() {
       return XPClass::forName('lang.types.Long');
     }
   } 
Index: ../../../skeleton/remote/protocol/ByteCountedString.class.php
===================================================================
--- ../../../skeleton/remote/protocol/ByteCountedString.class.php	(revision 8952)
+++ ../../../skeleton/remote/protocol/ByteCountedString.class.php	(working copy)
@@ -59,7 +59,7 @@
      * @param   &io.Stream stream
      * @param   int chunksize default BCS_DEFAULT_CHUNK_SIZE
      */
-    public function writeTo(&$stream, $chunksize= BCS_DEFAULT_CHUNK_SIZE) {
+    public function writeTo($stream, $chunksize= BCS_DEFAULT_CHUNK_SIZE) {
       $length= strlen($this->string);
       $offset= 0;
 
@@ -82,7 +82,7 @@
      * @param   int length
      * @return  string
      */
-    public static function readFully(&$stream, $length) {
+    public static function readFully($stream, $length) {
       $return= '';
       while (strlen($return) < $length) {
         if (0 == strlen($buf= $stream->readBinary($length - strlen($return)))) return;
@@ -99,7 +99,7 @@
      * @param   &io.Stream stream
      * @return  string
      */
-    public static function readFrom(&$stream) {
+    public static function readFrom($stream) {
       $s= '';
       do {
         if (FALSE === ($ctl= unpack('nlength/cnext', ByteCountedString::readFully($stream, 3)))) return;
Index: ../../../skeleton/remote/protocol/ByteMapping.class.php
===================================================================
--- ../../../skeleton/remote/protocol/ByteMapping.class.php	(revision 8952)
+++ ../../../skeleton/remote/protocol/ByteMapping.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @param   array<string, mixed> context default array()
      * @return  &mixed
      */
-    public function &valueOf(&$serializer, &$serialized, $context= array()) {
+    public function valueOf($serializer, $serialized, $context= array()) {
       $value= new Byte($serialized->consumeWord());
       return $value;
     }
@@ -37,7 +37,7 @@
      * @param   array<string, mixed> context default array()
      * @return  string
      */
-    public function representationOf(&$serializer, &$value, $context= array()) {
+    public function representationOf($serializer, $value, $context= array()) {
       return 'B:'.$value->value.';';
     }
     
@@ -47,7 +47,7 @@
      * @access  public
      * @return  &lang.XPClass
      */
-    public function &handledClass() {
+    public function handledClass() {
       return XPClass::forName('lang.types.Byte');
     }
   } 
Index: ../../../skeleton/remote/protocol/FloatMapping.class.php
===================================================================
--- ../../../skeleton/remote/protocol/FloatMapping.class.php	(revision 8952)
+++ ../../../skeleton/remote/protocol/FloatMapping.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @param   array<string, mixed> context default array()
      * @return  &mixed
      */
-    public function &valueOf(&$serializer, &$serialized, $context= array()) {
+    public function valueOf($serializer, $serialized, $context= array()) {
       $value= new Float($serialized->consumeWord());
       return $value;
     }
@@ -37,7 +37,7 @@
      * @param   array<string, mixed> context default array()
      * @return  string
      */
-    public function representationOf(&$serializer, &$value, $context= array()) {
+    public function representationOf($serializer, $value, $context= array()) {
       return 'f:'.$value->value.';';
     }
     
@@ -47,7 +47,7 @@
      * @access  public
      * @return  &lang.XPClass
      */
-    public function &handledClass() {
+    public function handledClass() {
       return XPClass::forName('lang.types.Float');
     }
   } 
Index: ../../../skeleton/remote/reflect/BeanDescription.class.php
===================================================================
--- ../../../skeleton/remote/reflect/BeanDescription.class.php	(revision 8952)
+++ ../../../skeleton/remote/reflect/BeanDescription.class.php	(working copy)
@@ -46,8 +46,8 @@
      * @access  public
      * @param   lang.ArrayList<remote.reflect.InterfaceDescription> interfaces
      */
-    public function setInterfaces(&$interfaces) {
-      $this->interfaces= &$interfaces;
+    public function setInterfaces($interfaces) {
+      $this->interfaces= $interfaces;
     }
 
     /**
@@ -56,7 +56,7 @@
      * @access  public
      * @return  lang.ArrayList<remote.reflect.InterfaceDescription>
      */
-    public function &getInterfaces() {
+    public function getInterfaces() {
       return $this->interfaces;
     }
     
Index: ../../../skeleton/remote/reflect/DescriptionList.class.php
===================================================================
--- ../../../skeleton/remote/reflect/DescriptionList.class.php	(revision 8952)
+++ ../../../skeleton/remote/reflect/DescriptionList.class.php	(working copy)
@@ -41,7 +41,7 @@
      * @param   string name
      * @return  &remote.reflect.BeanDescription or NULL if nothing is found
      */
-    public function &bean($name) {
+    public function bean($name) {
       if (!isset($this->beans[$name])) {
         return xp::null();
       }
Index: ../../../skeleton/remote/reflect/MethodDescription.class.php
===================================================================
--- ../../../skeleton/remote/reflect/MethodDescription.class.php	(revision 8952)
+++ ../../../skeleton/remote/reflect/MethodDescription.class.php	(working copy)
@@ -74,8 +74,8 @@
      * @access  public
      * @param   lang.ArrayList<string> parameterTypes
      */
-    public function setParameterTypes(&$parameterTypes) {
-      $this->parameterTypes= &$parameterTypes;
+    public function setParameterTypes($parameterTypes) {
+      $this->parameterTypes= $parameterTypes;
     }
 
     /**
@@ -84,7 +84,7 @@
      * @access  public
      * @return  lang.ArrayList<string>
      */
-    public function &getParameterTypes() {
+    public function getParameterTypes() {
       return $this->parameterTypes;
     }
 
@@ -94,8 +94,8 @@
      * @access  public
      * @param   lang.ArrayList<string> roles
      */
-    public function setRoles(&$roles) {
-      $this->roles= &$roles;
+    public function setRoles($roles) {
+      $this->roles= $roles;
     }
 
     /**
@@ -104,7 +104,7 @@
      * @access  public
      * @return  lang.ArrayList<string>
      */
-    public function &getRoles() {
+    public function getRoles() {
       return $this->roles;
     }
 
@@ -179,7 +179,7 @@
         $this->roles->values ? '@Security(roles= ['.implode(', ', $this->roles->values).']) ' : '',
         $this->typeString($this->returnType),
         $this->name,
-        implode(', ', array_map(array(&$this, 'typeString'), $this->parameterTypes->values))
+        implode(', ', array_map(array($this, 'typeString'), $this->parameterTypes->values))
       );
     }
   }
Index: ../../../skeleton/remote/reflect/InterfaceDescription.class.php
===================================================================
--- ../../../skeleton/remote/reflect/InterfaceDescription.class.php	(revision 8952)
+++ ../../../skeleton/remote/reflect/InterfaceDescription.class.php	(working copy)
@@ -43,8 +43,8 @@
      * @access  public
      * @param   lang.ArrayList<remote.reflect.MethodDescription> methods
      */
-    public function setMethods(&$methods) {
-      $this->methods= &$methods;
+    public function setMethods($methods) {
+      $this->methods= $methods;
     }
 
     /**
@@ -53,7 +53,7 @@
      * @access  public
      * @return  lang.ArrayList<remote.reflect.MethodDescription>
      */
-    public function &getMethods() {
+    public function getMethods() {
       return $this->methods;
     }
 
Index: ../../../skeleton/remote/Remote.class.php
===================================================================
--- ../../../skeleton/remote/Remote.class.php	(revision 8952)
+++ ../../../skeleton/remote/Remote.class.php	(working copy)
@@ -61,10 +61,10 @@
      * @return  &remote.Remote
      * @throws  remote.RemoteException in case of setup failure
      */
-    public static function &forName($dsn) {
+    public static function forName($dsn) {
       static $instances= array();
       
-      $pool= &HandlerInstancePool::getInstance();
+      $pool= HandlerInstancePool::getInstance();
       $list= explode(',', $dsn);
       shuffle($list);
       foreach ($list as $key) {
@@ -74,7 +74,7 @@
         $e= $instance= NULL;
         try {
           $instance= new Remote();
-          $instance->_handler= &$pool->acquire($key, TRUE);
+          $instance->_handler= $pool->acquire($key, TRUE);
         } catch (RemoteException $e) {
           continue;   // try next
         } catch (Exception $e) {
@@ -83,7 +83,7 @@
         }
 
         // Success, cache instance and return
-        $instances[$key]= &$instance;
+        $instances[$key]= $instance;
         return $instance;
       }
 
@@ -100,7 +100,7 @@
      * @throws  remote.NameNotFoundException in case the given name could not be found
      * @throws  remote.RemoteException for any other error
      */
-    public function &lookup($name) {
+    public function lookup($name) {
       return $this->_handler->lookup($name);
     }
 
@@ -111,9 +111,9 @@
      * @param   &remote.UserTransaction tran
      * @return  &remote.UserTransaction
      */
-    public function &begin(&$tran) {
+    public function begin($tran) {
       $this->_handler->begin($tran);
-      $tran->_handler= &$this->_handler;
+      $tran->_handler= $this->_handler;
       return $tran;
     }
   }
Index: ../../../skeleton/remote/HandlerInstancePool.class.php
===================================================================
--- ../../../skeleton/remote/HandlerInstancePool.class.php	(revision 8952)
+++ ../../../skeleton/remote/HandlerInstancePool.class.php	(working copy)
@@ -51,7 +51,7 @@
      * @access  public
      * @return  &remote.HandlerInstancePool
      */
-    public static function &getInstance() {
+    public static function getInstance() {
       static $instance= NULL;
       
       if (!isset($instance)) $instance= new HandlerInstancePool();
@@ -66,7 +66,7 @@
      * @param   &remote.protocol.ProtocolHandler instance
      * @return  &remote.protocol.ProtocolHandler the pooled instance
      */
-    public function &pool(&$url, &$instance) {
+    public function pool($url, $instance) {
       $this->pool->put($url, $instance);
       return $instance;
     }
@@ -79,19 +79,19 @@
      * @return  &remote.protocol.ProtocolHandler
      * @throws  remote.protocol.UnknownProtocolException
      */
-    public function &acquire($key, $initialize= FALSE) {
+    public function acquire($key, $initialize= FALSE) {
       $url= new URL($key);
       if ($this->pool->containsKey($url)) {
-        $instance= &$this->pool->get($url);
+        $instance= $this->pool->get($url);
       } else {
         sscanf($url->getScheme(), '%[^+]+%s', $type, $option);
         try {
-          $class= &HandlerFactory::handlerFor($type);
+          $class= HandlerFactory::handlerFor($type);
         } catch (Exception $e) {
           throw($e);
         }
 
-        $instance= &$this->pool($url, $class->newInstance($option));
+        $instance= $this->pool($url, $class->newInstance($option));
       }
 
       $initialize && $instance->initialize($url);
Index: ../../../skeleton/remote/beans/HomeInterface.class.php
===================================================================
--- ../../../skeleton/remote/beans/HomeInterface.class.php	(revision 8952)
+++ ../../../skeleton/remote/beans/HomeInterface.class.php	(working copy)
@@ -19,6 +19,6 @@
      * @access  public
      * @return  &remote.beans.Bean
      */
-    public function &create();
+    public function create();
   }
 ?>
Index: ../../../skeleton/remote/RemoteInvocationHandler.class.php
===================================================================
--- ../../../skeleton/remote/RemoteInvocationHandler.class.php	(revision 8952)
+++ ../../../skeleton/remote/RemoteInvocationHandler.class.php	(working copy)
@@ -27,10 +27,10 @@
      * @param   &ProtocolHandler handler
      * @return  &RemoteInvocationHandler
      */
-    public static function &newInstance($oid, &$handler) {
+    public static function newInstance($oid, $handler) {
       with ($i= new RemoteInvocationHandler()); {
         $i->oid= $oid;
-        $i->handler= &$handler;
+        $i->handler= $handler;
       }
 
       return $i;
@@ -46,7 +46,7 @@
      * @param   mixed* args an array of arguments
      * @return  mixed
      */
-    public function invoke(&$proxy, $method, $args) { 
+    public function invoke($proxy, $method, $args) { 
       return $this->handler->invoke($this->oid, $method, $args);
     }
   
Index: ../../../skeleton/remote/ClassReference.class.php
===================================================================
--- ../../../skeleton/remote/ClassReference.class.php	(revision 8952)
+++ ../../../skeleton/remote/ClassReference.class.php	(working copy)
@@ -41,7 +41,7 @@
      * @param   lang.ClassLoader cl default NULL
      * @return  &lang.XPClass
      */
-    public function &referencedClass($cl= NULL) {
+    public function referencedClass($cl= NULL) {
       return XPClass::forName($this->classname, $cl);
     }
 
Index: ../../../skeleton/sapi/synchronized.sapi.php
===================================================================
--- ../../../skeleton/sapi/synchronized.sapi.php	(revision 8952)
+++ ../../../skeleton/sapi/synchronized.sapi.php	(working copy)
@@ -8,7 +8,7 @@
   //     Convert a pathname and a project identifier to a System V IPC key
   if (!function_exists('ftok')) { function ftok($pathname, $id) {
     if (!($s= stat($pathname))) return -1;
-    return sprintf('%u', ord($id{0}) << 24 | ($s['dev'] & 0xFF) << 16 | $s['ino'] & 0xFFFF);
+    return sprintf('%u', ord($id{0}) << 24 | ($s['dev']  0xFF) << 16 | $s['ino']  0xFFFF);
   }}
   // }}}
 
@@ -41,6 +41,6 @@
     // Bails out
   }
   shmop_write($shm, getmypid(), 0x0);
-  $_SERVER['sync']= &$shm;
+  $_SERVER['sync']= $shm;
   register_shutdown_function('__unlock');
 ?>
Index: ../../../skeleton/sapi/soap/service.sapi.php
===================================================================
--- ../../../skeleton/sapi/soap/service.sapi.php	(revision 8952)
+++ ../../../skeleton/sapi/soap/service.sapi.php	(working copy)
@@ -13,8 +13,8 @@
   
     // {{{ internal string fault(&lang.Throwable exception, string code)
     //     Convert an exception to XML
-    function fault(&$exception, $code) {
-      $answer= &new SOAPMessage();
+    function fault($exception, $code) {
+      $answer= new SOAPMessage();
       $answer->create();
 
       foreach ($exception->getStackTrace() as $element) {
@@ -48,7 +48,7 @@
       }
 
       // Check for uncaught exceptions
-      if ($exceptions= &xp::registry('exceptions')) {
+      if ($exceptions= xp::registry('exceptions')) {
         return sapisoapservice::fault(
           $exceptions[key($exceptions)],
           'xp.uncaughtexception'
Index: ../../../skeleton/sapi/gui/gtk.sapi.php
===================================================================
--- ../../../skeleton/sapi/gui/gtk.sapi.php	(revision 8952)
+++ ../../../skeleton/sapi/gui/gtk.sapi.php	(working copy)
@@ -17,12 +17,12 @@
 
       // Check for fatal errors
       if (FALSE !== ($p= strpos($buf, EPREPEND_IDENTIFIER))) {
-        $e= &new Error(str_replace(EPREPEND_IDENTIFIER, '', substr($buf, $p)));
+        $e= new Error(str_replace(EPREPEND_IDENTIFIER, '', substr($buf, $p)));
         return '[sapi::gtk] Uncaught error: '.$e->toString();
       }
 
       // Check for uncaught exceptions
-      if ($exceptions= &xp::registry('exceptions')) {
+      if ($exceptions= xp::registry('exceptions')) {
         return '[sapi::gtk] Uncaught exception: '.$exceptions[key($exceptions)]->toString();
       }
 
@@ -35,7 +35,7 @@
   
   // {{{ void run (&org.gnome.GtkApplication app)
   //     Runs a GTK app
-  function run(&$app) {
+  function run($app) {
     try {
       $app->init();
     } catch(GuiException $e) {
Index: ../../../skeleton/sapi/xmlrpc/service.sapi.php
===================================================================
--- ../../../skeleton/sapi/xmlrpc/service.sapi.php	(revision 8952)
+++ ../../../skeleton/sapi/xmlrpc/service.sapi.php	(working copy)
@@ -13,8 +13,8 @@
   
     // {{{ internal string fault(&lang.Throwable exception, string code)
     //     Convert an exception to XML
-    function fault(&$exception, $code) {
-      $answer= &new XmlRpcMessage();
+    function fault($exception, $code) {
+      $answer= new XmlRpcMessage();
       $answer->create('Server', 'Error');
 
       $answer->setFault($code, $exception->toString());
@@ -39,7 +39,7 @@
       }
 
       // Check for uncaught exceptions
-      if ($exceptions= &xp::registry('exceptions')) {
+      if ($exceptions= xp::registry('exceptions')) {
         return sapixmlrpcservice::fault(
           $exceptions[key($exceptions)],
           'xp.uncaughtexception'
Index: ../../../skeleton/sapi/class.sapi.php
===================================================================
--- ../../../skeleton/sapi/class.sapi.php	(revision 8952)
+++ ../../../skeleton/sapi/class.sapi.php	(working copy)
@@ -8,7 +8,7 @@
   // {{{ void runnable(void)
   //     Syntax: class Test extends Object { ... } runnable();
   function runnable() {
-    $p= &new ParamString();
+    $p= new ParamString();
     $class= xp::reflect(basename($p->value(0), '.class.php'));
 
     $target= array($class, 'main');
Index: ../../../skeleton/sapi/scriptlet/development.sapi.php
===================================================================
--- ../../../skeleton/sapi/scriptlet/development.sapi.php	(revision 8952)
+++ ../../../skeleton/sapi/scriptlet/development.sapi.php	(working copy)
@@ -11,8 +11,8 @@
   
     // {{{ void run(&scriptlet.HttpScriptlet scriptlet)
     //     Runs a scriptlet and prints XML tree for debug
-    public static function run(&$scriptlet) {
-      $runner= &new ScriptletRunner(SCRIPTLET_SHOW_STACKTRACE|SCRIPTLET_SHOW_XML|SCRIPTLET_SHOW_ERRORS);
+    public static function run($scriptlet) {
+      $runner= new ScriptletRunner(SCRIPTLET_SHOW_STACKTRACE|SCRIPTLET_SHOW_XML|SCRIPTLET_SHOW_ERRORS);
       $runner->run($scriptlet);
     }
     // }}}
Index: ../../../skeleton/sapi/scriptlet/production.sapi.php
===================================================================
--- ../../../skeleton/sapi/scriptlet/production.sapi.php	(revision 8952)
+++ ../../../skeleton/sapi/scriptlet/production.sapi.php	(working copy)
@@ -11,7 +11,7 @@
   
     // {{{ void run(&scriptlet.HttpScriptlet scriptlet)
     //     Runs a scriptlet and prints XML tree for production
-    public static function run(&$scriptlet) {
+    public static function run($scriptlet) {
       $runner= new ScriptletRunner(0x000);
       $runner->run($scriptlet);
     }
Index: ../../../skeleton/sapi/scriptlet/ScriptletRunner.class.php
===================================================================
--- ../../../skeleton/sapi/scriptlet/ScriptletRunner.class.php	(revision 8952)
+++ ../../../skeleton/sapi/scriptlet/ScriptletRunner.class.php	(working copy)
@@ -38,9 +38,9 @@
      * @param   &scriptlet.xml.XMLScriptletResponse response
      * @param   &lang.Exception e
      */
-    public function except(&$response, &$e) {
-      $class= &$this->getClass();
-      $loader= &$class->getClassLoader();
+    public function except($response, $e) {
+      $class= $this->getClass();
+      $loader= $class->getClassLoader();
       
       $response->setContent(str_replace(
         '<xp:value-of select="reason"/>',
@@ -58,12 +58,12 @@
      * @access  public
      * @param   &scriptlet.HttpScriptlet scriptlet
      */
-    public function run(&$scriptlet) {
+    public function run($scriptlet) {
       try {
         $scriptlet->init();
-        $response= &$scriptlet->process();
+        $response= $scriptlet->process();
       } catch (HttpScriptletException $e) {
-        $response= &$e->getResponse();
+        $response= $e->getResponse();
         $this->except($response, $e);
       }
 
Index: ../../../skeleton/xml/Node.class.php
===================================================================
--- ../../../skeleton/xml/Node.class.php	(revision 8952)
+++ ../../../skeleton/xml/Node.class.php	(working copy)
@@ -65,7 +65,7 @@
      * @param   string name default 'array'
      * @return  &xml.Node
      */
-    public static function &fromArray($a, $name= 'array') {
+    public static function fromArray($a, $name= 'array') {
       $n= new Node($name);
       $sname= rtrim($name, 's');
       foreach (array_keys($a) as $field) {
@@ -96,12 +96,12 @@
      * @param   string name default NULL
      * @return  &xml.Node
      */
-    public static function &fromObject($obj, $name= NULL) {
+    public static function fromObject($obj, $name= NULL) {
       if (!method_exists($obj, '__sleep')) {
         $vars= get_object_vars($obj);
       } else {
         $vars= array();
-        foreach ($obj->__sleep() as $var) $vars[$var]= &$obj->{$var};
+        foreach ($obj->__sleep() as $var) $vars[$var]= $obj->{$var};
       }
       return Node::fromArray(
         $vars, 
@@ -317,14 +317,14 @@
      * @return  &xml.Node added child
      * @throws  lang.IllegalArgumentException
      */
-    public function &addChild(&$child) {
+    public function addChild($child) {
       if (!is('Node', $child)) {
         throw(new IllegalArgumentException(
           'Parameter child must be an xml.Node (given: '.xp::typeOf($child).')'
         ));
       }
 
-      $this->children[]= &$child;
+      $this->children[]= $child;
       return $child;
     }
   }
Index: ../../../skeleton/xml/dom/Document.class.php
===================================================================
--- ../../../skeleton/xml/dom/Document.class.php	(revision 8952)
+++ ../../../skeleton/xml/dom/Document.class.php	(working copy)
@@ -31,11 +31,11 @@
      * @param   int max default -1
      * @return  xml.Node[]
      */
-    public function _getElementsByTagName(&$node, $tagname, $max= -1) {
+    public function _getElementsByTagName($node, $tagname, $max= -1) {
       $r= array();
       foreach (array_keys($node->children) as $key) {
         if ($tagname == $node->children[$key]->getName()) {
-          $r[]= &$node->children[$key];
+          $r[]= $node->children[$key];
           if ($max > 0 && sizeof($r) >= $max) return $r;
         }
         if (!empty($node->children[$key]->children)) {
@@ -58,14 +58,14 @@
      * @param   int max
      * @return  xml.Node[]
      */
-    public function _getElementsByAttribute(&$node, $attribute, $name, $max) {
+    public function _getElementsByAttribute($node, $attribute, $name, $max) {
       $r= array();
       foreach (array_keys($node->children) as $key) {
         if (
           ($node->children[$key]->hasAttribute($attribute)) &&
           ($name == $node->children[$key]->getAttribute($attribute))
         ) {
-          $r[]= &$node->children[$key];
+          $r[]= $node->children[$key];
           if ($max > 0 && sizeof($r) >= $max) return $r;
         }
         if (!empty($node->children[$key]->children)) {
@@ -110,7 +110,7 @@
      * @param   string id
      * @return  &xml.Node
      */
-    public function &getElementById($id) {
+    public function getElementById($id) {
       return $this->_getElementsByAttribute($this->root, 'id', $id, 1);
     }
     
@@ -121,7 +121,7 @@
      * @param   string name
      * @return  &xml.Node node
      */
-    public function &createElement($name) {
+    public function createElement($name) {
       return new $this->nodeType($name);
     }
     
@@ -132,7 +132,7 @@
      * @access  public
      * @return  &xml.Node
      */
-    public function &getDocumentElement() {
+    public function getDocumentElement() {
       return $this->root;
     }
     
@@ -144,7 +144,7 @@
      * @param   string string
      * @return  &xml.dom.Document
      */
-    public static function &fromString($string) {
+    public static function fromString($string) {
       return parent::fromString($string, __CLASS__);
     }
 
@@ -157,7 +157,7 @@
      * @param   &xml.File file
      * @return  &xml.dom.Document
      */
-    public static function &fromFile(&$file) {
+    public static function fromFile($file) {
       return parent::fromFile($file, __CLASS__);
     }
   }
Index: ../../../skeleton/xml/Stylesheet.class.php
===================================================================
--- ../../../skeleton/xml/Stylesheet.class.php	(revision 8952)
+++ ../../../skeleton/xml/Stylesheet.class.php	(working copy)
@@ -55,7 +55,7 @@
      * @param   string encoding default NULL
      */
     public function setOutputMethod($method, $indent= TRUE, $encoding= NULL) {
-      with ($n= &$this->root->addChild(new Node('xsl:output'))); {
+      with ($n= $this->root->addChild(new Node('xsl:output'))); {
         $n->setAttribute('method', $method);
         $n->setAttribute('encoding', $encoding ? $encoding : $this->getEncoding());
         $n->setAttribute('indent', $indent ? 'yes' : 'no');
@@ -69,8 +69,8 @@
      * @param   string import
      * @return  &xml.Node the added node
      */
-    public function &addImport($import) {
-      with ($n= &$this->root->addChild(new Node('xsl:import'))); {
+    public function addImport($import) {
+      with ($n= $this->root->addChild(new Node('xsl:import'))); {
         $n->setAttribute('href', $import);
       }
       return $n;
@@ -83,8 +83,8 @@
      * @param   string include
      * @return  &xml.Node the added node
      */
-    public function &addInclude($include) {
-      with ($n= &$this->root->addChild(new Node('xsl:include'))); {
+    public function addInclude($include) {
+      with ($n= $this->root->addChild(new Node('xsl:include'))); {
         $n->setAttribute('href', $include);
       }
       return $n;
@@ -97,8 +97,8 @@
      * @param   string import
      * @return  &xml.Node the added node
      */
-    public function &addParam($name) {
-      with ($n= &$this->root->addChild(new Node('xsl:param'))); {
+    public function addParam($name) {
+      with ($n= $this->root->addChild(new Node('xsl:param'))); {
         $n->setAttribute('name', $name);
       }
       return $n;
@@ -111,8 +111,8 @@
      * @param   string import
      * @return  &xml.Node the added node
      */
-    public function &addVariable($name) {
-      with ($n= &$this->root->addChild(new Node('xsl:variable'))); {
+    public function addVariable($name) {
+      with ($n= $this->root->addChild(new Node('xsl:variable'))); {
         $n->setAttribute('name', $name);
       }
       return $n;
@@ -126,7 +126,7 @@
      * @param   string string
      * @return  &xml.Stylesheet
      */
-    public static function &fromString($string) {
+    public static function fromString($string) {
       return parent::fromString($string, __CLASS__);
     }
 
@@ -139,7 +139,7 @@
      * @param   &xml.File file
      * @return  &xml.Stylesheet
      */
-    public static function &fromFile(&$file) {
+    public static function fromFile($file) {
       return parent::fromFile($file, __CLASS__);
     }
   }
Index: ../../../skeleton/xml/meta/Marshaller.class.php
===================================================================
--- ../../../skeleton/xml/meta/Marshaller.class.php	(revision 8952)
+++ ../../../skeleton/xml/meta/Marshaller.class.php	(working copy)
@@ -43,7 +43,7 @@
      * @param   &lang.XPClass class
      * @param   &xml.Node node
      */
-    public static function recurse(&$instance, &$class, &$node) {
+    public static function recurse($instance, $class, $node) {
       foreach ($class->getMethods() as $method) {
         if (!$method->hasAnnotation('xmlfactory', 'element')) continue;
         
@@ -74,16 +74,16 @@
         //
         // - For objects, add a new node and invoke the recurse() method
         //   on it.
-        $result= &$method->invoke($instance);
+        $result= $method->invoke($instance);
         if (is_scalar($result) || NULL === $result) {
           $node->addChild(new Node($element, $result));
         } else if (is_array($result)) {
-          $child= &$node->addChild(new Node($element));
+          $child= $node->addChild(new Node($element));
           foreach ($result as $key => $val) {
             $child->addChild(new Node($key, $val));
           }
         } else if (is('lang.Collection', $result)) {
-          $elementClass= &$result->getElementClass();
+          $elementClass= $result->getElementClass();
           foreach ($result->values() as $value) {
             Marshaller::recurse($value, $elementClass, $node->addChild(new Node($element)));
           }
@@ -102,8 +102,8 @@
      * @param   xml.QName qname default NULL
      * @return  string xml
      */
-    public static function marshal(&$instance, $qname= NULL) {
-      $class= &$instance->getClass();
+    public static function marshal($instance, $qname= NULL) {
+      $class= $instance->getClass();
 
       // Create XML tree and root node. Use the information provided by the
       // qname argument if existant, use the class` non-qualified (and 
Index: ../../../skeleton/xml/meta/Unmarshaller.class.php
===================================================================
--- ../../../skeleton/xml/meta/Unmarshaller.class.php	(revision 8952)
+++ ../../../skeleton/xml/meta/Unmarshaller.class.php	(working copy)
@@ -38,7 +38,7 @@
      * @param   &php.DomElement element
      * @return  string
      */
-    public static function contentOf(&$element) {
+    public static function contentOf($element) {
       switch ($element->type) {
         case 1:   // Nodeset
           return empty($element->nodeset) ? NULL : utf8_decode($element->nodeset[0]->get_content());
@@ -69,20 +69,20 @@
      * @throws  lang.ClassNotFoundException
      * @throws  xml.XPathException
      */
-    public static function &recurse(&$xpath, &$context, $classname) {
+    public static function recurse($xpath, $context, $classname) {
       try {
-        $class= &XPClass::forName($classname);
+        $class= XPClass::forName($classname);
       } catch (ClassNotFoundException $e) {
         throw($e);
       }
 
-      $instance= &$class->newInstance();
+      $instance= $class->newInstance();
       foreach ($class->getMethods() as $method) {
         if (!$method->hasAnnotation('xmlmapping', 'element')) continue;
 
         // Perform XPath query
         try {
-          $result= &$xpath->query($method->getAnnotation('xmlmapping', 'element'), $context);
+          $result= $xpath->query($method->getAnnotation('xmlmapping', 'element'), $context);
         } catch (XPathException $e) {
           throw($e);
         }
@@ -119,7 +119,7 @@
               $xpath, 
               $node, 
               call_user_func_array(
-                array(&$instance, $method->getAnnotation('xmlmapping', 'factory')), 
+                array($instance, $method->getAnnotation('xmlmapping', 'factory')), 
                 $factoryArgs
               )
             ));
@@ -164,7 +164,7 @@
      * @throws  lang.ClassNotFoundException
      * @throws  xml.XMLFormatException
      */
-    public static function &unmarshal($xml, $classname) {
+    public static function unmarshal($xml, $classname) {
       try {
         $doc= new DOMDocument();
         $doc->loadXML($xml);
Index: ../../../skeleton/xml/Tree.class.php
===================================================================
--- ../../../skeleton/xml/Tree.class.php	(revision 8952)
+++ ../../../skeleton/xml/Tree.class.php	(working copy)
@@ -60,7 +60,7 @@
      * @param   &xml.Node child 
      * @return  &xml.Node the added child
      */   
-    public function &addChild(&$child) {
+    public function addChild($child) {
       return $this->root->addChild($child);
     }
 
@@ -78,7 +78,7 @@
      * @return  &xml.Tree
      * @throws  xml.XMLFormatException in case of a parser error
      */
-    public static function &fromString($string, $c= __CLASS__) {
+    public static function fromString($string, $c= __CLASS__) {
       $parser= new XMLParser();
       $tree= new $c();
       try {
@@ -107,7 +107,7 @@
      * @throws  xml.XMLFormatException in case of a parser error
      * @throws  io.IOException in case reading the file fails
      */ 
-    public static function &fromFile(&$file, $c= __CLASS__) {
+    public static function fromFile($file, $c= __CLASS__) {
       $parser= new XMLParser();
       $tree= new $c();
       
@@ -142,12 +142,12 @@
 
       $element= new $this->nodeType($name, NULL, $attrs);
       if (!isset($this->_cnt)) {
-        $this->root= &$element;
-        $this->_objs[1]= &$element;
+        $this->root= $element;
+        $this->_objs[1]= $element;
         $this->_cnt= 1;
       } else {
         $this->_cnt++;
-        $this->_objs[$this->_cnt]= &$element;
+        $this->_objs[$this->_cnt]= $element;
       }
     }
    
@@ -161,9 +161,9 @@
      */
     public function onEndElement($parser, $name) {
       if ($this->_cnt > 1) {
-        $node= &$this->_objs[$this->_cnt];
+        $node= $this->_objs[$this->_cnt];
         $node->content= $this->_cdata;
-        $parent= &$this->_objs[$this->_cnt- 1];
+        $parent= $this->_objs[$this->_cnt- 1];
         $parent->addChild($node);
         $this->_cdata= '';
       }
Index: ../../../skeleton/xml/parser/XMLParser.class.php
===================================================================
--- ../../../skeleton/xml/parser/XMLParser.class.php	(revision 8952)
+++ ../../../skeleton/xml/parser/XMLParser.class.php	(working copy)
@@ -46,8 +46,8 @@
      * @access  public
      * @param   &xml.parser.ParserCallback callback
      */
-    public function setCallback(&$callback) {
-      $this->callback= &$callback;
+    public function setCallback($callback) {
+      $this->callback= $callback;
     }
 
     /**
Index: ../../../skeleton/xml/XSLProcessor.class.php
===================================================================
--- ../../../skeleton/xml/XSLProcessor.class.php	(revision 8952)
+++ ../../../skeleton/xml/XSLProcessor.class.php	(working copy)
@@ -205,10 +205,10 @@
      * @throws  xml.TransformerException
      */
     public function run($buffers= array()) {
-      if (NULL != $this->buffer[1]) $buffers['/_xml']= &$this->buffer[1];
-      if (NULL != $this->stylesheet[1]) $buffers['/_xsl']= &$this->stylesheet[1];
+      if (NULL != $this->buffer[1]) $buffers['/_xml']= $this->buffer[1];
+      if (NULL != $this->stylesheet[1]) $buffers['/_xsl']= $this->stylesheet[1];
       
-      xslt_set_error_handler($this->processor, array(&$this, '_traperror'));
+      xslt_set_error_handler($this->processor, array($this, '_traperror'));
       $this->output= xslt_process(
         $this->processor, 
         $this->buffer[0],
Index: ../../../skeleton/xml/rdf/RDFNewsFeed.class.php
===================================================================
--- ../../../skeleton/xml/rdf/RDFNewsFeed.class.php	(revision 8952)
+++ ../../../skeleton/xml/rdf/RDFNewsFeed.class.php	(working copy)
@@ -108,7 +108,7 @@
       $publisher= '', 
       $rights= ''
     ) {
-      if (NULL === $date) $date= &Date::now();
+      if (NULL === $date) $date= Date::now();
       
       $this->channel->title= $title;
       $this->channel->link= $link;
@@ -119,7 +119,7 @@
       $this->channel->publisher= $publisher;
       $this->channel->copyright= $rights;
      
-      $node= &Node::fromArray(array(
+      $node= Node::fromArray(array(
         'title'         => $title,
         'link'          => $link,
         'description'   => $description,
@@ -129,12 +129,12 @@
         'dc:publisher'  => $publisher,
         'dc:rights'     => $rights
       ), 'channel');
-      $items= &$node->addChild(new Node('items'));
+      $items= $node->addChild(new Node('items'));
 
-      $this->channel->node= &$node;
-      $this->channel->sequence= &$items->addChild(new Node('rdf:Seq'));
+      $this->channel->node= $node;
+      $this->channel->sequence= $items->addChild(new Node('rdf:Seq'));
 
-      $this->root->children[0]= &$node;
+      $this->root->children[0]= $node;
     }
     
     /**
@@ -150,13 +150,13 @@
       $this->image->url= $url;
       $this->image->title= $title;
 
-      $node= &Node::fromArray(array(
+      $node= Node::fromArray(array(
         'title'         => $title,
         'url'           => $url,
         'link'          => $link
       ), 'image');
-      if (!isset($this->image->node)) $node= &$this->root->addChild($node);
-      $this->image->node= &$node;
+      if (!isset($this->image->node)) $node= $this->root->addChild($node);
+      $this->image->node= $node;
     }
     
     /**
@@ -167,7 +167,7 @@
      * @param   string str
      * @return  &xml.rdf.RDFNewsfeed
      */
-    public static function &fromString($str) {
+    public static function fromString($str) {
       return parent::fromString($str, __CLASS__);
     }
 
@@ -179,7 +179,7 @@
      * @param   &io.File file
      * @return  &xml.rdf.RDFNewsfeed
      */
-    public static function &fromFile($file) {
+    public static function fromFile($file) {
       return parent::fromFile($file, __CLASS__);
     }
     
@@ -193,7 +193,7 @@
      * @param   string util.Date default NULL date defaulting to current date/time
      * @return  object the added item
      */
-    public function &addItem($title, $link, $description= '', $date= NULL) {
+    public function addItem($title, $link, $description= '', $date= NULL) {
       if (NULL === $date) {
         $date= isset($this->channel->date) ? $this->channel->date : new Date(time());
       }
@@ -203,15 +203,15 @@
       $item->link= $link;
       $item->description= $description;
       
-      $node= &Node::fromArray(array(
+      $node= Node::fromArray(array(
         'title'         => $title,
         'link'          => $link,
         'description'   => $description,
         'dc:date'       => $date->toString('Y-m-d\TH:i:s')
       ), 'item');
       $node->setAttribute('rdf:about', $link);
-      $item->node= &$this->root->addChild($node);
-      $this->items[]= &$item;
+      $item->node= $this->root->addChild($node);
+      $this->items[]= $item;
       $this->channel->sequence->addChild(new Node('rdf:li', NULL, array('rdf:resource' => $link)));
       
       return $item;
@@ -254,18 +254,18 @@
 
         case '/rdf:rdf/channel/': 
         case '/rss/channel/':
-          $this->channel->node= &$this->_objs[$this->_cnt];
+          $this->channel->node= $this->_objs[$this->_cnt];
           break;
           
         case '/rdf:rdf/image/': 
         case '/rss/image/':
-          $this->image->node= &$this->_objs[$this->_cnt];
+          $this->image->node= $this->_objs[$this->_cnt];
           break;
           
         case '/rdf:rdf/item/': 
         case '/rss/channel/item/':
           $this->items[]= new stdClass();
-          $this->items[sizeof($this->items)- 1]->node= &$this->_objs[$this->_cnt];
+          $this->items[sizeof($this->items)- 1]->node= $this->_objs[$this->_cnt];
           break;
       }
     }          
Index: ../../../skeleton/security/crypto/PublicKey.class.php
===================================================================
--- ../../../skeleton/security/crypto/PublicKey.class.php	(revision 8952)
+++ ../../../skeleton/security/crypto/PublicKey.class.php	(working copy)
@@ -22,7 +22,7 @@
      * @return  &security.crypto.PublicKey
      * @throws  security.crypto.CryptoException if the operation fails
      */
-    public static function &fromString($string) {
+    public static function fromString($string) {
       if (!is_resource($_hdl= openssl_pkey_get_public($string))) {
         throw(new CryptoException(
           'Could not read public key', OpenSslUtil::getErrors()
Index: ../../../skeleton/security/crypto/CryptoKey.class.php
===================================================================
--- ../../../skeleton/security/crypto/CryptoKey.class.php	(revision 8952)
+++ ../../../skeleton/security/crypto/CryptoKey.class.php	(working copy)
@@ -45,7 +45,7 @@
      * @param   string string
      * @return  &security.crypto.CryptoKey
      */
-    public static function &fromString($string) { }
+    public static function fromString($string) { }
     
     /**
      * Encrypt data using this key
Index: ../../../skeleton/security/crypto/PrivateKey.class.php
===================================================================
--- ../../../skeleton/security/crypto/PrivateKey.class.php	(revision 8952)
+++ ../../../skeleton/security/crypto/PrivateKey.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @return  &security.crypto.PrivateKey
      * @throws  security.crypto.CryptoException if the operation fails
      */
-    public static function &fromString($str, $passphrase= NULL) {
+    public static function fromString($str, $passphrase= NULL) {
       if (!is_resource($_hdl= openssl_pkey_get_private($str, $passphrase))) {
         throw(new CryptoException(
           'Could not read private key', OpenSslUtil::getErrors()
Index: ../../../skeleton/security/auth/HtpasswdAuthenticator.class.php
===================================================================
--- ../../../skeleton/security/auth/HtpasswdAuthenticator.class.php	(revision 8952)
+++ ../../../skeleton/security/auth/HtpasswdAuthenticator.class.php	(working copy)
@@ -27,8 +27,8 @@
      * @access  public
      * @param   &io.File file
      */
-    public function __construct(&$file) {
-      $this->_file= &$file;
+    public function __construct($file) {
+      $this->_file= $file;
     }
     
     /**
Index: ../../../skeleton/security/auth/LdapAuthenticator.class.php
===================================================================
--- ../../../skeleton/security/auth/LdapAuthenticator.class.php	(revision 8952)
+++ ../../../skeleton/security/auth/LdapAuthenticator.class.php	(working copy)
@@ -27,8 +27,8 @@
      * @param   &peer.ldap.LDAPClient lc
      * @param   string basedn
      */
-    public function __construct(&$lc, $basedn) {
-      $this->lc= &$lc;
+    public function __construct($lc, $basedn) {
+      $this->lc= $lc;
       $this->basedn= $basedn;
     }
   
Index: ../../../skeleton/security/auth/PropertyAuthenticator.class.php
===================================================================
--- ../../../skeleton/security/auth/PropertyAuthenticator.class.php	(revision 8952)
+++ ../../../skeleton/security/auth/PropertyAuthenticator.class.php	(working copy)
@@ -21,8 +21,8 @@
      * @access  public
      * @param   &util.Properties users
      */    
-    public function __construct(&$prop) {
-      $this->users= &$prop;
+    public function __construct($prop) {
+      $this->users= $prop;
 
     }
     
Index: ../../../skeleton/security/checksum/MD5.class.php
===================================================================
--- ../../../skeleton/security/checksum/MD5.class.php	(revision 8952)
+++ ../../../skeleton/security/checksum/MD5.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @param   string str
      * @return  &security.checksum.MD5
      */
-    public static function &fromString($str) {
+    public static function fromString($str) {
       return new MD5(md5($str));
     }
 
@@ -35,7 +35,7 @@
      * @param   &io.File file
      * @return  &security.checksum.MD5
      */
-    public static function &fromFile(&$file) {
+    public static function fromFile($file) {
       return new MD5(md5_file($file->uri));
     }
   }
Index: ../../../skeleton/security/checksum/CRC32.class.php
===================================================================
--- ../../../skeleton/security/checksum/CRC32.class.php	(revision 8952)
+++ ../../../skeleton/security/checksum/CRC32.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @param   string str
      * @return  &security.checksum.CRC32
      */
-    public static function &fromString($str) {
+    public static function fromString($str) {
       return new CRC32(crc32($str));
     }
 
@@ -35,7 +35,7 @@
      * @param   &io.File file
      * @return  &security.checksum.CRC32
      */
-    public static function &fromFile(&$file) {
+    public static function fromFile($file) {
       try {
         $file->open(FILE_MODE_READ);
         $data= $file->read($file->size());
Index: ../../../skeleton/security/checksum/SHA1.class.php
===================================================================
--- ../../../skeleton/security/checksum/SHA1.class.php	(revision 8952)
+++ ../../../skeleton/security/checksum/SHA1.class.php	(working copy)
@@ -23,7 +23,7 @@
      * @param   string str
      * @return  &security.checksum.SHA1
      */
-    public static function &fromString($str) {
+    public static function fromString($str) {
       return new SHA1(sha1($str));
     }
 
@@ -35,7 +35,7 @@
      * @param   &io.File file
      * @return  &security.checksum.SHA1
      */
-    public static function &fromFile(&$file) {
+    public static function fromFile($file) {
       return new SHA1(sha1_file($file->uri));
     }
   }
Index: ../../../skeleton/security/checksum/HMAC_MD5.class.php
===================================================================
--- ../../../skeleton/security/checksum/HMAC_MD5.class.php	(revision 8952)
+++ ../../../skeleton/security/checksum/HMAC_MD5.class.php	(working copy)
@@ -45,7 +45,7 @@
      * @param   string key default NULL
      * @return  &security.checksum.HMAC_MD5
      */
-    public function &fromString($str, $key= NULL) {
+    public function fromString($str, $key= NULL) {
       return new HMAC_MD5(HMAC_MD5::hash($str, $key));
     }
 
@@ -57,7 +57,7 @@
      * @param   string key default NULL
      * @return  &security.checksum.HMAC_MD5
      */
-    public function &fromFile(&$file, $key= NULL) {
+    public function fromFile($file, $key= NULL) {
       try {
         $file->open(FILE_MODE_READ);
         $str= $file->read($file->size());
Index: ../../../skeleton/security/checksum/CRC16.class.php
===================================================================
--- ../../../skeleton/security/checksum/CRC16.class.php	(revision 8952)
+++ ../../../skeleton/security/checksum/CRC16.class.php	(working copy)
@@ -22,12 +22,12 @@
      * @param   string str
      * @return  &security.checksum.CRC16
      */
-    public static function &fromString($str) {
+    public static function fromString($str) {
       $sum= 0xFFFF;
       for ($x= 0, $s= strlen ($str); $x < $s; $x++) {
         $sum= $sum ^ ord($str{$x});
         for ($i= 0; $i < 8; $i++) {
-          $sum= (0x0001 == ($sum & 0x0001)
+          $sum= (0x0001 == ($sum  0x0001)
             ? ($sum >> 1) ^ 0xA001
             : $sum >> 1
           );
@@ -44,7 +44,7 @@
      * @param   &io.File file
      * @return  &security.checksum.CRC16
      */
-    public static function &fromFile(&$file) {
+    public static function fromFile($file) {
       try {
         $file->open(FILE_MODE_READ);
         $data= $file->read($file->size());
Index: ../../../skeleton/security/checksum/Checksum.class.php
===================================================================
--- ../../../skeleton/security/checksum/Checksum.class.php	(revision 8952)
+++ ../../../skeleton/security/checksum/Checksum.class.php	(working copy)
@@ -54,7 +54,7 @@
      * @param   string str
      * @return  &security.checksum.Checksum
      */
-    public static function &fromString($str) { }
+    public static function fromString($str) { }
 
     /**
      * Create a new checksum from a file object. Override this
@@ -65,7 +65,7 @@
      * @param   &io.File file
      * @return  &security.checksum.Checksum
      */
-    public static function &fromFile(&$file) { }
+    public static function fromFile($file) { }
     
     /**
      * Retrieve the checksum's value
@@ -84,7 +84,7 @@
      * @param   &security.checksum.Checksum sum
      * @return  bool TRUE if these checksums match
      */
-    public function verify(&$sum) {
+    public function verify($sum) {
       return $this->value === $sum->value;
     }
   }
Index: ../../../skeleton/security/sasl/DigestChallenge.class.php
===================================================================
--- ../../../skeleton/security/sasl/DigestChallenge.class.php	(revision 8952)
+++ ../../../skeleton/security/sasl/DigestChallenge.class.php	(working copy)
@@ -53,7 +53,7 @@
      * @return  &security.sasl.DigestChallenge
      * @throws  lang.FormatException
      */
-    public static function &fromString($s) {
+    public static function fromString($s) {
       with ($challenge= new DigestChallenge()); {
         $s.= ',';
         while ($p= strpos($s, '=')) {
@@ -122,7 +122,7 @@
      * @return  &security.sasl.DigestResponse
      * @throws  lang.FormatException
      */
-    public function &responseFor($qop, $user, $pass, $authzid= NULL) {
+    public function responseFor($qop, $user, $pass, $authzid= NULL) {
       if (!$this->hasQop($qop)) {
         throw(new FormatException('Challenge does not contains DC_QOP_AUTH'));
       }
Index: ../../../skeleton/security/Policy.class.php
===================================================================
--- ../../../skeleton/security/Policy.class.php	(revision 8952)
+++ ../../../skeleton/security/Policy.class.php	(working copy)
@@ -44,8 +44,8 @@
      * @param   &security.Permission p
      * @return  &security.Permission the added permission
      */
-    public function &addPermission(&$p) {
-      $this->permissions[]= &$p;
+    public function addPermission($p) {
+      $this->permissions[]= $p;
       return $p;
     }
     
@@ -71,7 +71,7 @@
      * @param   &io.Stream stream
      * @return  &security.Policy policy
      */
-    public static function &fromFile(&$stream) {
+    public static function fromFile($stream) {
       static $errors= array(
         PF_ST_EPARSE    => 'Parse error', 
         PF_ST_EGRANT    => 'Grant syntax error',
@@ -184,7 +184,7 @@
               }
               
               try {
-                $permission= &XPClass::forName($class);
+                $permission= XPClass::forName($class);
               } catch (ClassNotFoundException $e) {
                 $state= PF_ST_EREFLECT;
                 $message= $e->message;
Index: ../../../skeleton/security/cert/CSR.class.php
===================================================================
--- ../../../skeleton/security/cert/CSR.class.php	(revision 8952)
+++ ../../../skeleton/security/cert/CSR.class.php	(working copy)
@@ -53,7 +53,7 @@
      * @param   &security.Principal principal
      * @param   &security.KeyPair keypair
      */
-    public function __construct(&$principal, &$keypair) {
+    public function __construct($principal, $keypair) {
       $this->_res= openssl_csr_new(array(
         'countryName'               => $principal->getCountryName(),
         'stateOrProvinceName'       => $principal->getStateOrProvinceName(),
@@ -90,7 +90,7 @@
      * @param   mixed cacert default NULL
      * @return  &security.cert.X509Certificate
      */
-    public function &sign(&$keypair, $days= 365, $cacert= NULL) {
+    public function sign($keypair, $days= 365, $cacert= NULL) {
       if (FALSE === ($x509= openssl_csr_sign($this->_res, $cacert, $keypair->_res, $days))) {
         trigger_error(implode("\n  @", OpenSslUtil::getErrors()), E_USER_NOTICE);
         throw(new CertificateException('Cannot sign certificate'));
Index: ../../../skeleton/security/cert/X509Certificate.class.php
===================================================================
--- ../../../skeleton/security/cert/X509Certificate.class.php	(revision 8952)
+++ ../../../skeleton/security/cert/X509Certificate.class.php	(working copy)
@@ -109,7 +109,7 @@
      * @access  public
      * @return  &util.Date
      */
-    public function &getNotBefore() {
+    public function getNotBefore() {
       return new Date($this->_info['validFrom_time_t']);
     }
     
@@ -119,7 +119,7 @@
      * @access  public
      * @return  &util.Date
      */
-    public function &getNotAfter() {
+    public function getNotAfter() {
       return new Date($this->_info['validTo_time_t']);
     }
     
@@ -129,7 +129,7 @@
      * @access  public
      * @return  &security.Principal
      */
-    public function &getIssuerDN() {
+    public function getIssuerDN() {
       return new Principal($this->_info['issuer']);
     }
     
@@ -139,7 +139,7 @@
      * @access  public
      * @return  &security.Principal
      */
-    public function &getSubjectDN() {
+    public function getSubjectDN() {
       return new Principal($this->_info['subject']);
     }
     
@@ -213,7 +213,7 @@
      * @return  &security.cert.X509Certificate
      * @throws  security.cert.CertificateException
      */
-    public static function &fromString($str) {
+    public static function fromString($str) {
       if (!is_resource($_res= openssl_x509_read($str))) {
         throw(new CertificateException(
           'Could not read certificate', OpenSslUtil::getErrors()
@@ -236,7 +236,7 @@
      * @param   &security.crypto.PrivateKey privatekey
      * @return  bool
      */
-    public function checkPrivateKey(&$privatekey) {
+    public function checkPrivateKey($privatekey) {
       return openssl_x509_check_private_key($this->_res, $privatekey->getHandle());
     }
     
@@ -247,7 +247,7 @@
      * @access  public
      * @return  &security.crypto.PublicKey
      */
-    public function &getPublicKey() {
+    public function getPublicKey() {
       return PublicKey::fromString($this->export());
     }
   
Index: ../../../skeleton/security/KeyPair.class.php
===================================================================
--- ../../../skeleton/security/KeyPair.class.php	(revision 8952)
+++ ../../../skeleton/security/KeyPair.class.php	(working copy)
@@ -56,7 +56,7 @@
      * @param   int bits default 1024
      * @return  &security.KeyPair
      */
-    public function &generate($algorithm= 'md5', $type= OPENSSL_KEYTYPE_RSA, $bits= 1024) {
+    public function generate($algorithm= 'md5', $type= OPENSSL_KEYTYPE_RSA, $bits= 1024) {
       if (FALSE === ($res= openssl_pkey_new(array(
         'digest_alg'        => $algorithm,
         'private_key_type'  => $type,
@@ -93,7 +93,7 @@
      * @access  public
      * @return  &security.crypto.PrivateKey
      */
-    public function &getPrivateKey() {
+    public function getPrivateKey() {
       return new PrivateKey(openssl_pkey_get_private($this->export(NULL)));
     }
   }
Index: ../../../skeleton/io/EmbeddedFile.class.php
===================================================================
--- ../../../skeleton/io/EmbeddedFile.class.php	(revision 8952)
+++ ../../../skeleton/io/EmbeddedFile.class.php	(working copy)
@@ -29,9 +29,9 @@
      * @return  mixed
      */
     public function __construct($filename) {
-      $vfm= &VirtualFileManager::getInstance();
-      if (FALSE !== ($s= &$vfm->getByFilename($filename))) {
-        $this->_stream= &$s;
+      $vfm= VirtualFileManager::getInstance();
+      if (FALSE !== ($s= $vfm->getByFilename($filename))) {
+        $this->_stream= $s;
       } else {
         $this->_stream= new File();
       }
@@ -49,7 +49,7 @@
       if (!isset($this->_stream->{$name}))
         return FALSE;
         
-      $value= &$this->_stream->{$name};
+      $value= $this->_stream->{$name};
       return $value;
     }
 
@@ -60,8 +60,8 @@
      * @param   string name
      * @param   &mixed value
      */    
-    public function __set($name, &$value) {
-      $this->_stream->{$name}= &$value;
+    public function __set($name, $value) {
+      $this->_stream->{$name}= $value;
     }
 
     /**
@@ -74,7 +74,7 @@
      * @return  boolean
      */    
     public function __call($method, $params) {
-      $return= call_user_func_array(array(&$this->_stream, $method), $params);
+      $return= call_user_func_array(array($this->_stream, $method), $params);
       return $return;
     }
   } overload('EmbeddedFile');
Index: ../../../skeleton/io/dba/DBAFile.class.php
===================================================================
--- ../../../skeleton/io/dba/DBAFile.class.php	(revision 8952)
+++ ../../../skeleton/io/dba/DBAFile.class.php	(working copy)
@@ -127,7 +127,7 @@
      * @return  &io.dba.DBAIterator
      * @see     xp://io.dba.DBAIterator
      */
-    public function &iterator() {
+    public function iterator() {
       return new DBAIterator($this->_fd);
     }
     
Index: ../../../skeleton/io/dba/DBAIterator.class.php
===================================================================
--- ../../../skeleton/io/dba/DBAIterator.class.php	(revision 8952)
+++ ../../../skeleton/io/dba/DBAIterator.class.php	(working copy)
@@ -64,7 +64,7 @@
      * @return  &mixed
      * @throws  util.NoSuchElementException when there are no more elements
      */
-    public function &next() {
+    public function next() {
       if (!is_string($this->_key)) {
         throw(new NoSuchElementException('No more elements'));
       }
Index: ../../../skeleton/io/EncapsedStream.class.php
===================================================================
--- ../../../skeleton/io/EncapsedStream.class.php	(revision 8952)
+++ ../../../skeleton/io/EncapsedStream.class.php	(working copy)
@@ -28,12 +28,12 @@
      * @param   int size
      * @throws  lang.IllegalStateException when stream is not yet opened
      */
-    public function __construct(&$super, $offset, $size) {
+    public function __construct($super, $offset, $size) {
       if (!$super->isOpen()) throw(new IllegalStateException(
         'Super-stream must be opened in EncapsedStream'
       ));
       
-      $this->_super= &$super;
+      $this->_super= $super;
       $this->_offset= $offset;
       $this->_size= $size;
     }
Index: ../../../skeleton/io/FileUtil.class.php
===================================================================
--- ../../../skeleton/io/FileUtil.class.php	(revision 8952)
+++ ../../../skeleton/io/FileUtil.class.php	(working copy)
@@ -26,7 +26,7 @@
      * @throws  io.IOException
      * @throws  io.FileNotFoundException
      */
-    public static function getContents(&$file) {
+    public static function getContents($file) {
       $file->open(FILE_MODE_READ);
       $data= $file->read($file->size());
       $file->close();
@@ -47,7 +47,7 @@
      * @return  int filesize
      * @throws  io.IOException
      */
-    public static function setContents(&$file, $data) {
+    public static function setContents($file, $data) {
       $file->open(FILE_MODE_WRITE);
       $file->write($data);
       $file->close();
Index: ../../../skeleton/io/SpoolDirectory.class.php
===================================================================
--- ../../../skeleton/io/SpoolDirectory.class.php	(revision 8952)
+++ ../../../skeleton/io/SpoolDirectory.class.php	(working copy)
@@ -70,7 +70,7 @@
      * @return  &io.File opened spool file
      * @throws  io.IOException if file could not be created
      */    
-    public function &createSpoolEntry($abstract= NULL) {
+    public function createSpoolEntry($abstract= NULL) {
       if (NULL === $abstract)
         $abstract= date ('Y-m-d-H-i-s'.md5 (microtime()));
       else
@@ -94,7 +94,7 @@
      * @return  bool success
      * @throws  io.IOException if file could not be closed and moved.
      */    
-    public function enqueueSpoolEntry(&$f) {
+    public function enqueueSpoolEntry($f) {
       try {
         $f->close();
         $f->move ($this->_hTodo->getURI().DIRECTORY_SEPARATOR.$f->getFileName());
@@ -112,7 +112,7 @@
      * @return  &io.File spoolfile next spoolfile. Its opened in read/write mode.
      * @throws  io.IOException if an error occurs
      */    
-    public function &getNextSpoolEntry() {
+    public function getNextSpoolEntry() {
       try {
         if (FALSE !== ($entry= $this->_hTodo->getEntry())) {
           $f= new File ($this->_hTodo->getURI().DIRECTORY_SEPARATOR.$entry);
@@ -133,7 +133,7 @@
      * @return  bool success
      * @throws  io.IOException if file could not be closed and moved.
      */
-    public function finishSpoolEntry(&$f) {
+    public function finishSpoolEntry($f) {
       try {
         $f->close();
         $f->move ($this->_hDone->getURI().DIRECTORY_SEPARATOR.$f->getFileName());
@@ -152,7 +152,7 @@
      * @return  bool success
      * @throws  io.IOException if file could not be closed and moved.
      */    
-    public function failSpoolEntry(&$f) {
+    public function failSpoolEntry($f) {
       try {
         $f->close();
         $f->move ($this->_hError->getURI().DIRECTORY_SEPARATOR.$f->getFileName());
Index: ../../../skeleton/io/sys/StdStream.class.php
===================================================================
--- ../../../skeleton/io/sys/StdStream.class.php	(revision 8952)
+++ ../../../skeleton/io/sys/StdStream.class.php	(working copy)
@@ -27,7 +27,7 @@
      * @param   resource handle one of STDIN | STDOUT | STDERR
      * @return  &io.File
      */
-    public static function &get($handle) {
+    public static function get($handle) {
       static $f= array();
       
       if (!isset($f[$handle])) {
Index: ../../../skeleton/io/sys/ShmSegment.class.php
===================================================================
--- ../../../skeleton/io/sys/ShmSegment.class.php	(revision 8952)
+++ ../../../skeleton/io/sys/ShmSegment.class.php	(working copy)
@@ -50,7 +50,7 @@
      * @access  private
      * @return  &mixed data
      */
-    public function &_get() {
+    public function _get() {
       $h= shm_attach($this->spot);
       $data= shm_get_var($h, $this->name);
       shm_detach($h);
@@ -76,7 +76,7 @@
      * @return  &mixed data
      * @throws  io.IOException in case an error occurs
      */
-    public function &get() {
+    public function get() {
       if (FALSE === ($data= $this->_get())) {
         throw(new IOException('Could not read segment '.$this->name));
       }
@@ -93,7 +93,7 @@
      * @return  bool success
      * @throws  io.IOException in case an error occurs
      */
-    public function put(&$val, $permissions= 0666) {
+    public function put($val, $permissions= 0666) {
       $v= array($val);
       $h= shm_attach($this->spot, (strlen(serialize($v)) + 44) * 2, $permissions);
       $ret= shm_put_var($h, $this->name, $v);
Index: ../../../skeleton/io/sys/IPCQueue.class.php
===================================================================
--- ../../../skeleton/io/sys/IPCQueue.class.php	(revision 8952)
+++ ../../../skeleton/io/sys/IPCQueue.class.php	(working copy)
@@ -147,7 +147,7 @@
       $this->stat= msg_stat_queue($this->id);
       
       // is a message in queue ?
-      if (0 == $this->stat['msg_qnum'] && ($flags & MSG_IPC_NOWAIT)) {
+      if (0 == $this->stat['msg_qnum'] && ($flags  MSG_IPC_NOWAIT)) {
         return FALSE;
       }
       
Index: ../../../skeleton/io/sys/Semaphore.class.php
===================================================================
--- ../../../skeleton/io/sys/Semaphore.class.php	(revision 8952)
+++ ../../../skeleton/io/sys/Semaphore.class.php	(working copy)
@@ -42,7 +42,7 @@
      * @return  &io.sys.Semaphore a semaphore
      * @throws  io.IOException
      */
-    public static function &get($key, $maxAquire= 1, $permissions= 0666) {
+    public static function get($key, $maxAquire= 1, $permissions= 0666) {
       static $semaphores= array();
       
       if (!isset($semaphores[$key])) {
@@ -54,7 +54,7 @@
           throw(new IOException('Could not get semaphore '.$key));
         }
         
-        $semaphores[$key]= &$s;
+        $semaphores[$key]= $s;
       }
       
       return $semaphores[$key];
Index: ../../../skeleton/io/collections/FileElement.class.php
===================================================================
--- ../../../skeleton/io/collections/FileElement.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/FileElement.class.php	(working copy)
@@ -52,7 +52,7 @@
      * @access  public
      * @return  &util.Date
      */
-    public function &createdAt() {
+    public function createdAt() {
       return new Date(filectime($this->uri));
     }
 
@@ -62,7 +62,7 @@
      * @access  public
      * @return  &util.Date
      */
-    public function &lastAccessed() {
+    public function lastAccessed() {
       return new Date(fileatime($this->uri));
     }
 
@@ -72,7 +72,7 @@
      * @access  public
      * @return  &util.Date
      */
-    public function &lastModified() {
+    public function lastModified() {
       return new Date(filemtime($this->uri));
     }
     
Index: ../../../skeleton/io/collections/FileCollection.class.php
===================================================================
--- ../../../skeleton/io/collections/FileCollection.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/FileCollection.class.php	(working copy)
@@ -64,7 +64,7 @@
      * @access  public
      * @return  &io.collection.IOElement
      */
-    public function &next() { 
+    public function next() { 
       do {
         if (FALSE === ($entry= readdir($this->_hd))) return NULL;
       } while ('.' == $entry || '..' == $entry);
@@ -103,7 +103,7 @@
      * @access  public
      * @return  &util.Date
      */
-    public function &createdAt() {
+    public function createdAt() {
       return new Date(filectime($this->uri));
     }
 
@@ -113,7 +113,7 @@
      * @access  public
      * @return  &util.Date
      */
-    public function &lastAccessed() {
+    public function lastAccessed() {
       return new Date(fileatime($this->uri));
     }
 
@@ -123,7 +123,7 @@
      * @access  public
      * @return  &util.Date
      */
-    public function &lastModified() {
+    public function lastModified() {
       return new Date(filemtime($this->uri));
     }
 
Index: ../../../skeleton/io/collections/CollectionComposite.class.php
===================================================================
--- ../../../skeleton/io/collections/CollectionComposite.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/CollectionComposite.class.php	(working copy)
@@ -72,9 +72,9 @@
      * @access  public
      * @return  &io.collection.IOElement
      */
-    public function &next() {
+    public function next() {
       do { 
-        if (NULL !== ($element= &$this->collections[$this->_current]->next())) return $element;
+        if (NULL !== ($element= $this->collections[$this->_current]->next())) return $element;
         
         // End of current collection, close it and continue with next collection
         // In case the end of collections has been reached, return NULL
Index: ../../../skeleton/io/collections/IOElement.class.php
===================================================================
--- ../../../skeleton/io/collections/IOElement.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/IOElement.class.php	(working copy)
@@ -35,7 +35,7 @@
      * @access  public
      * @return  &util.Date
      */
-    public function &createdAt();
+    public function createdAt();
 
     /**
      * Retrieve this element's last-accessed date and time
@@ -43,7 +43,7 @@
      * @access  public
      * @return  &util.Date
      */
-    public function &lastAccessed();
+    public function lastAccessed();
 
     /**
      * Retrieve this element's last-modified date and time
@@ -51,7 +51,7 @@
      * @access  public
      * @return  &util.Date
      */
-    public function &lastModified();
+    public function lastModified();
 
   }
 ?>
Index: ../../../skeleton/io/collections/iterate/NameMatchesFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/NameMatchesFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/NameMatchesFilter.class.php	(working copy)
@@ -33,7 +33,7 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) {
+    public function accept($element) {
       return (bool)preg_match($this->pattern, basename($element->getURI()));
     }
 
Index: ../../../skeleton/io/collections/iterate/SizeEqualsFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/SizeEqualsFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/SizeEqualsFilter.class.php	(working copy)
@@ -20,7 +20,7 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) {
+    public function accept($element) {
       return $element->getSize() == $this->size;
     }
   }
Index: ../../../skeleton/io/collections/iterate/IOCollectionIterator.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/IOCollectionIterator.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/IOCollectionIterator.class.php	(working copy)
@@ -39,8 +39,8 @@
      * @param   &io.collections.IOCollection collection
      * @param   bool recursive default FALSE whether to recurse into subdirectories
      */
-    public function __construct(&$collection, $recursive= FALSE) {
-      $this->collections= array(&$collection);
+    public function __construct($collection, $recursive= FALSE) {
+      $this->collections= array($collection);
       $this->collections[0]->open();
       $this->recursive= $recursive;
     }
@@ -53,7 +53,7 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function acceptElement(&$element) {
+    public function acceptElement($element) {
       return TRUE;
     }
     
@@ -71,7 +71,7 @@
       do {
         // End of collection, pop off stack and continue if there are more, 
         // returning otherwise
-        $this->_element= &$this->collections[0]->next();
+        $this->_element= $this->collections[0]->next();
         if (NULL === $this->_element) {
           $this->collections[0]->close();
           array_shift($this->collections);
@@ -99,7 +99,7 @@
      * @return  &io.collections.IOElement
      * @throws  util.NoSuchElementException when there are no more elements
      */
-    public function &next() {
+    public function next() {
       if (!$this->hasNext()) {
         throw(new NoSuchElementException('No more  entries'));
       }
Index: ../../../skeleton/io/collections/iterate/ExtensionEqualsFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/ExtensionEqualsFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/ExtensionEqualsFilter.class.php	(working copy)
@@ -32,7 +32,7 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) {
+    public function accept($element) {
       return $this->extension == substr($element->getURI(), -1 * strlen($this->extension));
     }
 
Index: ../../../skeleton/io/collections/iterate/CreatedAfterFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/CreatedAfterFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/CreatedAfterFilter.class.php	(working copy)
@@ -20,8 +20,8 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) { 
-      return ($cmp= &$element->createdAt()) && $cmp->isAfter($this->date);
+    public function accept($element) { 
+      return ($cmp= $element->createdAt()) && $cmp->isAfter($this->date);
     }
   }
 ?>
Index: ../../../skeleton/io/collections/iterate/AbstractSizeComparisonFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/AbstractSizeComparisonFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/AbstractSizeComparisonFilter.class.php	(working copy)
@@ -33,7 +33,7 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) { }
+    public function accept($element) { }
 
     /**
      * Creates a string representation of this iterator
Index: ../../../skeleton/io/collections/iterate/NegationOfFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/NegationOfFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/NegationOfFilter.class.php	(working copy)
@@ -21,7 +21,7 @@
      * @access  public
      * @param   io.collections.iterate.IterationFilter filter
      */
-    public function __construct(&$filter) {
+    public function __construct($filter) {
       $this->filter= $filter;
     }
   
@@ -32,7 +32,7 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) {
+    public function accept($element) {
       return !$this->filter->accept($element);
     }
 
Index: ../../../skeleton/io/collections/iterate/CreatedBeforeFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/CreatedBeforeFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/CreatedBeforeFilter.class.php	(working copy)
@@ -20,8 +20,8 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) { 
-      return ($cmp= &$element->createdAt()) && $cmp->isBefore($this->date);
+    public function accept($element) { 
+      return ($cmp= $element->createdAt()) && $cmp->isBefore($this->date);
     }
   }
 ?>
Index: ../../../skeleton/io/collections/iterate/CollectionFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/CollectionFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/CollectionFilter.class.php	(working copy)
@@ -20,7 +20,7 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) {
+    public function accept($element) {
       return is('io.collections.IOCollection', $element);
     }
 
Index: ../../../skeleton/io/collections/iterate/NameEqualsFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/NameEqualsFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/NameEqualsFilter.class.php	(working copy)
@@ -32,7 +32,7 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) {
+    public function accept($element) {
       return $this->compare == basename($element->getURI());
     }
 
Index: ../../../skeleton/io/collections/iterate/AccessedAfterFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/AccessedAfterFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/AccessedAfterFilter.class.php	(working copy)
@@ -20,8 +20,8 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) { 
-      return ($cmp= &$element->lastAccessed()) && $cmp->isAfter($this->date);
+    public function accept($element) { 
+      return ($cmp= $element->lastAccessed()) && $cmp->isAfter($this->date);
     }
   }
 ?>
Index: ../../../skeleton/io/collections/iterate/AbstractDateComparisonFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/AbstractDateComparisonFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/AbstractDateComparisonFilter.class.php	(working copy)
@@ -21,8 +21,8 @@
      * @access  public
      * @param   &util.Date date
      */
-    public function __construct(&$date) {
-      $this->date= &$date;
+    public function __construct($date) {
+      $this->date= $date;
     }
     
     /**
@@ -33,7 +33,7 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) { }
+    public function accept($element) { }
 
     /**
      * Creates a string representation of this iterator
Index: ../../../skeleton/io/collections/iterate/AccessedBeforeFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/AccessedBeforeFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/AccessedBeforeFilter.class.php	(working copy)
@@ -20,8 +20,8 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) { 
-      return ($cmp= &$element->lastAccessed()) && $cmp->isBefore($this->date);
+    public function accept($element) { 
+      return ($cmp= $element->lastAccessed()) && $cmp->isBefore($this->date);
     }
   }
 ?>
Index: ../../../skeleton/io/collections/iterate/AllOfFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/AllOfFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/AllOfFilter.class.php	(working copy)
@@ -31,7 +31,7 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) {
+    public function accept($element) {
       for ($i= 0; $i < $this->_size; $i++) {
       
         // The first filter that does not accept the element => we won't accept the element
Index: ../../../skeleton/io/collections/iterate/IterationFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/IterationFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/IterationFilter.class.php	(working copy)
@@ -19,7 +19,7 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element);
+    public function accept($element);
   
   }
 ?>
Index: ../../../skeleton/io/collections/iterate/ModifiedAfterFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/ModifiedAfterFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/ModifiedAfterFilter.class.php	(working copy)
@@ -20,8 +20,8 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) { 
-      return ($cmp= &$element->lastModified()) && $cmp->isAfter($this->date);
+    public function accept($element) { 
+      return ($cmp= $element->lastModified()) && $cmp->isAfter($this->date);
     }
   }
 ?>
Index: ../../../skeleton/io/collections/iterate/ModifiedBeforeFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/ModifiedBeforeFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/ModifiedBeforeFilter.class.php	(working copy)
@@ -20,8 +20,8 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) { 
-      return ($cmp= &$element->lastModified()) && $cmp->isBefore($this->date);
+    public function accept($element) { 
+      return ($cmp= $element->lastModified()) && $cmp->isBefore($this->date);
     }
   }
 ?>
Index: ../../../skeleton/io/collections/iterate/AbstractCombinedFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/AbstractCombinedFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/AbstractCombinedFilter.class.php	(working copy)
@@ -37,7 +37,7 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) { }
+    public function accept($element) { }
 
     /**
      * Creates a string representation of this iterator
Index: ../../../skeleton/io/collections/iterate/SizeBiggerThanFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/SizeBiggerThanFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/SizeBiggerThanFilter.class.php	(working copy)
@@ -20,7 +20,7 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) {
+    public function accept($element) {
       return $element->getSize() > $this->size;
     }
   }
Index: ../../../skeleton/io/collections/iterate/SizeSmallerThanFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/SizeSmallerThanFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/SizeSmallerThanFilter.class.php	(working copy)
@@ -20,7 +20,7 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) {
+    public function accept($element) {
       return $element->getSize() < $this->size;
     }
   }
Index: ../../../skeleton/io/collections/iterate/FilteredIOCollectionIterator.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/FilteredIOCollectionIterator.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/FilteredIOCollectionIterator.class.php	(working copy)
@@ -42,9 +42,9 @@
      * @param   &io.collections.iterate.Filter filter
      * @param   bool recursive default FALSE whether to recurse into subdirectories
      */
-    public function __construct(&$collection, &$filter, $recursive= FALSE) {
+    public function __construct($collection, $filter, $recursive= FALSE) {
       parent::__construct($collection, $recursive);
-      $this->filter= &$filter;
+      $this->filter= $filter;
     }
     
     /**
@@ -54,7 +54,7 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function acceptElement(&$element) {
+    public function acceptElement($element) {
       return $this->filter->accept($element);
     }
     
Index: ../../../skeleton/io/collections/iterate/RegexFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/RegexFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/RegexFilter.class.php	(working copy)
@@ -34,7 +34,7 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) {
+    public function accept($element) {
       return (bool)preg_match($this->pattern, $element->getURI());
     }
   
Index: ../../../skeleton/io/collections/iterate/AnyOfFilter.class.php
===================================================================
--- ../../../skeleton/io/collections/iterate/AnyOfFilter.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/iterate/AnyOfFilter.class.php	(working copy)
@@ -31,7 +31,7 @@
      * @param   &io.collections.IOElement element
      * @return  bool
      */
-    public function accept(&$element) {
+    public function accept($element) {
       for ($i= 0; $i < $this->_size; $i++) {
       
         // The first filter that accepts the element => we accept the element
Index: ../../../skeleton/io/collections/IOCollection.class.php
===================================================================
--- ../../../skeleton/io/collections/IOCollection.class.php	(revision 8952)
+++ ../../../skeleton/io/collections/IOCollection.class.php	(working copy)
@@ -34,7 +34,7 @@
      * @access  public
      * @return  &io.collection.IOElement
      */
-    public function &next();
+    public function next();
 
     /**
      * Close this collection
Index: ../../../skeleton/rdbms/DBAdapter.class.php
===================================================================
--- ../../../skeleton/rdbms/DBAdapter.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/DBAdapter.class.php	(working copy)
@@ -21,8 +21,8 @@
      * @access  public
      * @param   &rdbms.DBConnection conn a database connection
      */
-    public function __construct(&$conn) {
-      $this->conn= &$conn;
+    public function __construct($conn) {
+      $this->conn= $conn;
       
     }
 
Index: ../../../skeleton/rdbms/ResultIterator.class.php
===================================================================
--- ../../../skeleton/rdbms/ResultIterator.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/ResultIterator.class.php	(working copy)
@@ -27,8 +27,8 @@
      * @param   string identifier
      * @see     xp://rdbms.Peer#iteratorFor
      */
-    public function __construct(&$rs, $identifier) {
-      $this->_rs= &$rs;
+    public function __construct($rs, $identifier) {
+      $this->_rs= $rs;
       $this->_identifier= $identifier;
     }
   
@@ -47,7 +47,7 @@
       // pointer every time we call it.
       if ($this->_record) return TRUE;
 
-      $this->_record= &$this->_rs->next();
+      $this->_record= $this->_rs->next();
       return !empty($this->_record);
     }
     
@@ -58,9 +58,9 @@
      * @return  &rdbms.DataSet
      * @throws  util.NoSuchElementException when there are no more elements
      */
-    public function &next() {
+    public function next() {
       if (NULL === $this->_record) {
-        $this->_record= &$this->_rs->next();
+        $this->_record= $this->_rs->next();
         // Fall through
       }
       if (FALSE === $this->_record) {
Index: ../../../skeleton/rdbms/Peer.class.php
===================================================================
--- ../../../skeleton/rdbms/Peer.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/Peer.class.php	(working copy)
@@ -118,7 +118,7 @@
      * @param   string identifier
      * @return  &rdbms.Peer
      */
-    public function &getInstance($identifier) {
+    public function getInstance($identifier) {
       static $instance= array();
       
       if (!isset($instance[$identifier])) {
@@ -134,7 +134,7 @@
      * @param   string fully qualified class name
      * @return  &rdbms.Peer
      */
-    public function &forName($classname) {
+    public function forName($classname) {
       return Peer::getInstance(xp::reflect($classname));
     }
 
@@ -145,7 +145,7 @@
      * @param   &lang.Object instance
      * @return  &rdbms.Peer
      */
-    public function &forInstance(&$instance) {
+    public function forInstance($instance) {
       return Peer::getInstance(get_class($instance));
     }
     
@@ -156,9 +156,9 @@
      * @param   &rdbms.Transaction transaction
      * @return  &rdbms.Transaction
      */
-    public function &begin(&$transaction) {
-      $cm= &ConnectionManager::getInstance();
-      $db= &$cm->getByHost($this->connection, 0);
+    public function begin($transaction) {
+      $cm= ConnectionManager::getInstance();
+      $db= $cm->getByHost($this->connection, 0);
 
       return $db->begin($transaction);
     }
@@ -190,10 +190,10 @@
      * @return  rdbms.DataSet[]
      * @throws  rdbms.SQLException in case an error occurs
      */
-    public function doSelect(&$criteria, $max= 0) {
-      $cm= &ConnectionManager::getInstance();  
+    public function doSelect($criteria, $max= 0) {
+      $cm= ConnectionManager::getInstance();  
       try {
-        $q= &$criteria->executeSelect($cm->getByHost($this->connection, 0), $this);
+        $q= $criteria->executeSelect($cm->getByHost($this->connection, 0), $this);
       } catch (SQLException $e) {
         throw($e);
       }
@@ -214,7 +214,7 @@
      * @return  &rdbms.DataSet
      * @throws  lang.IllegalArgumentException
      */    
-    public function &objectFor($record) {
+    public function objectFor($record) {
       if (array_keys($this->types) != array_keys($record)) {
         throw(new IllegalArgumentException(
           'Record not compatible with '.$this->identifier.' class'
@@ -231,10 +231,10 @@
      * @return  &rdbms.ResultIterator
      * @see     xp://rdbms.ResultIterator
      */
-    public function &iteratorFor(&$criteria) {
-      $cm= &ConnectionManager::getInstance();  
+    public function iteratorFor($criteria) {
+      $cm= ConnectionManager::getInstance();  
       try {
-        $q= &$criteria->executeSelect($cm->getByHost($this->connection, 0), $this);
+        $q= $criteria->executeSelect($cm->getByHost($this->connection, 0), $this);
       } catch (SQLException $e) {
         throw($e);
       }
@@ -254,10 +254,10 @@
      * @return  rdbms.DataSet[]
      * @throws  rdbms.SQLException in case an error occurs
      */
-    public function doJoin(&$peer, &$join, &$criteria, $max= 0) {
-      $cm= &ConnectionManager::getInstance();  
+    public function doJoin($peer, $join, $criteria, $max= 0) {
+      $cm= ConnectionManager::getInstance();  
       try {
-        $db= &$cm->getByHost($this->connection, 0);
+        $db= $cm->getByHost($this->connection, 0);
         
         $columns= $map= $qualified= array();
         foreach (array_keys($this->types) as $colunn) {
@@ -271,7 +271,7 @@
         }
         
         $where= $criteria->toSQL($db, array_merge($this->types, $peer->types, $qualified));
-        $q= &$db->query(
+        $q= $db->query(
           'select %c from %c %c, %c %c%c%c',
           $columns,
           $this->table,
@@ -291,7 +291,7 @@
         
         $o= new $this->identifier(array_slice($record, 0, sizeof($this->types)));
         $o->{$peer->identifier}= new $peer->identifier(array_slice($record, sizeof($this->types)));
-        $r[]= &$o;
+        $r[]= $o;
       }
       return $r;
     }
@@ -307,9 +307,9 @@
      */
     public function doInsert($values) {
       $id= NULL;
-      $cm= &ConnectionManager::getInstance();
+      $cm= ConnectionManager::getInstance();
       try {
-        $db= &$cm->getByHost($this->connection, 0);
+        $db= $cm->getByHost($this->connection, 0);
 
         // Build the insert command
         $sql= $db->prepare(
@@ -344,10 +344,10 @@
      * @return  int number of affected rows
      * @throws  rdbms.SQLException in case an error occurs
      */
-    public function doUpdate($values, &$criteria) {
-      $cm= &ConnectionManager::getInstance();  
+    public function doUpdate($values, $criteria) {
+      $cm= ConnectionManager::getInstance();  
       try {
-        $db= &$cm->getByHost($this->connection, 0);
+        $db= $cm->getByHost($this->connection, 0);
 
         // Build the update command
         $sql= '';
@@ -378,10 +378,10 @@
      * @return  int number of affected rows
      * @throws  rdbms.SQLException in case an error occurs
      */  
-    public function doDelete(&$criteria) {
-      $cm= &ConnectionManager::getInstance();  
+    public function doDelete($criteria) {
+      $cm= ConnectionManager::getInstance();  
       try {
-        $db= &$cm->getByHost($this->connection, 0);
+        $db= $cm->getByHost($this->connection, 0);
 
         // Send it
         $affected= $db->delete(
Index: ../../../skeleton/rdbms/sybase/SybaseIOObserver.class.php
===================================================================
--- ../../../skeleton/rdbms/sybase/SybaseIOObserver.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/sybase/SybaseIOObserver.class.php	(working copy)
@@ -22,8 +22,8 @@
      * @param   string argument
      */
     public function __construct($arg) {
-      $log= &Logger::getInstance();
-      $this->cat= &$log->getCategory($arg);
+      $log= Logger::getInstance();
+      $this->cat= $log->getCategory($arg);
     }
 
     /**
@@ -59,7 +59,7 @@
      * @param   mixed argument
      * @return  &rdbms.sybase.SybaseIOObserver
      */
-    public static function &instanceFor($arg) {
+    public static function instanceFor($arg) {
       return new SybaseIOObserver($arg);
     }
     
@@ -70,14 +70,14 @@
      * @param   &mixed observable
      * @param   &mixed dbevent
      */
-    public function update(&$obs, $arg= NULL) {
+    public function update($obs, $arg= NULL) {
       if (!is('rdbms.DBEvent', $arg)) return;
       
       // Passthrough event to appropriate function, if existant
       if (method_exists($this, 'on'.$arg->getName())) {
         call_user_func_array(
-          array(&$this, 'on'.$arg->getName()),
-          array(&$obs, &$arg)
+          array($this, 'on'.$arg->getName()),
+          array($obs, $arg)
         );
       }
     }
@@ -89,10 +89,10 @@
      * @param   &mixed observable
      * @param   &mixed dbevent
      */
-    public function onConnect(&$obs, &$arg) {
+    public function onConnect($obs, $arg) {
       if (0 <= version_compare(phpversion(), '4.3.5')) {
         ini_set('sybct.min_server_severity', 0);
-        sybase_set_message_handler(array(&$this, '_msghandler'), $obs->handle);
+        sybase_set_message_handler(array($this, '_msghandler'), $obs->handle);
       } else {
         $this->cat->warn($this->getClassName().': Unsupported PHP version detected (requires 4.3.5)');
       }
@@ -110,7 +110,7 @@
      * @param   &mixed observable
      * @param   &mixed dbevent
      */
-    public function onQuery(&$obs, &$arg) {
+    public function onQuery($obs, $arg) {
       
       // Add query to cache
       $this->queries[]= $arg->getArgument();
@@ -123,13 +123,13 @@
      * @param   &mixed observable
      * @param   &mixed dbevent
      */
-    public function onQueryEnd(&$obs, &$arg) {
+    public function onQueryEnd($obs, $arg) {
       $this->cat->info($this->getClassName().'::onQueryEnd() Query was:', (sizeof($this->queries) == 1 ? $this->queries[0] : $this->queries));
-      $result= &$arg->getArgument();
+      $result= $arg->getArgument();
       
       $sc= 0; $reads= 0;
       foreach (array_keys($this->messages) as $idx) {
-        $msg= &$this->messages[$idx];
+        $msg= $this->messages[$idx];
         switch ($msg['msgnumber']) {
           case 3615: {
             $split= sscanf($msg['text'], 'Table: %s scan count %d, logical reads: (regular=%d apf=%d total=%d), physical reads: (regular=%d apf=%d total=%d), apf IOs used=%d');
Index: ../../../skeleton/rdbms/sybase/SybaseConnection.class.php
===================================================================
--- ../../../skeleton/rdbms/sybase/SybaseConnection.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/sybase/SybaseConnection.class.php	(working copy)
@@ -45,7 +45,7 @@
       if (is_resource($this->handle)) return TRUE;  // Already connected
       if (!$reconnect && (FALSE === $this->handle)) return FALSE;    // Previously failed connecting
 
-      if ($this->flags & DB_PERSISTENT) {
+      if ($this->flags  DB_PERSISTENT) {
         $this->handle= sybase_pconnect(
           $this->dsn->getHost(), 
           $this->dsn->getUser(), 
@@ -128,7 +128,7 @@
      * @return  mixed identity value
      */
     public function identity() { 
-      if (!($r= &$this->query('select @@identity as i'))) {
+      if (!($r= $this->query('select @@identity as i'))) {
         return FALSE;
       }
       $i= $r->next('i');
@@ -147,7 +147,7 @@
     public function insert() { 
       $args= func_get_args();
       $args[0]= 'insert '.$args[0];
-      if (!($r= call_user_func_array(array(&$this, 'query'), $args))) {
+      if (!($r= call_user_func_array(array($this, 'query'), $args))) {
         return FALSE;
       }
       
@@ -166,7 +166,7 @@
     public function update() {
       $args= func_get_args();
       $args[0]= 'update '.$args[0];
-      if (!($r= &call_user_func_array(array(&$this, 'query'), $args))) {
+      if (!($r= call_user_func_array(array($this, 'query'), $args))) {
         return FALSE;
       }
       
@@ -184,7 +184,7 @@
     public function delete() { 
       $args= func_get_args();
       $args[0]= 'delete '.$args[0];
-      if (!($r= &call_user_func_array(array(&$this, 'query'), $args))) {
+      if (!($r= call_user_func_array(array($this, 'query'), $args))) {
         return FALSE;
       }
       
@@ -202,7 +202,7 @@
     public function select() { 
       $args= func_get_args();
       $args[0]= 'select '.$args[0];
-      if (!($r= &call_user_func_array(array(&$this, 'query'), $args))) {
+      if (!($r= call_user_func_array(array($this, 'query'), $args))) {
         return FALSE;
       }
       
@@ -220,12 +220,12 @@
      * @return  &rdbms.sybase.SybaseResultSet or FALSE to indicate failure
      * @throws  rdbms.SQLException
      */
-    public function &query() { 
+    public function query() { 
       $args= func_get_args();
-      $sql= call_user_func_array(array(&$this, 'prepare'), $args);
+      $sql= call_user_func_array(array($this, 'prepare'), $args);
 
       if (!is_resource($this->handle)) {
-        if (!($this->flags & DB_AUTOCONNECT)) throw(new SQLStateException('Not connected'));
+        if (!($this->flags  DB_AUTOCONNECT)) throw(new SQLStateException('Not connected'));
         try {
           $c= $this->connect();
         } catch (SQLException $e) {
@@ -237,8 +237,8 @@
       }
       
       $this->_obs && $this->notifyObservers(new DBEvent(__FUNCTION__, $sql));
-      if ($this->flags & DB_UNBUFFERED) {
-        $result= sybase_unbuffered_query($sql, $this->handle, $this->flags & DB_STORE_RESULT);
+      if ($this->flags  DB_UNBUFFERED) {
+        $result= sybase_unbuffered_query($sql, $this->handle, $this->flags  DB_STORE_RESULT);
       } else {
         $result= sybase_query($sql, $this->handle);
       }
@@ -284,11 +284,11 @@
      * @param   &rdbms.Transaction transaction
      * @return  &rdbms.Transaction
      */
-    public function &begin(&$transaction) {
+    public function begin($transaction) {
       if (FALSE === $this->query('begin transaction xp_%c', $transaction->name)) {
         return FALSE;
       }
-      $transaction->db= &$this;
+      $transaction->db= $this;
       return $transaction;
     }
     
@@ -300,7 +300,7 @@
      * @return  mixed state
      */
     public function transtate($name) { 
-      if (FALSE === ($r= &$this->query('select @@transtate as transtate'))) {
+      if (FALSE === ($r= $this->query('select @@transtate as transtate'))) {
         return FALSE;
       }
       return $r->next('transtate');
Index: ../../../skeleton/rdbms/sybase/SybaseShowplanObserver.class.php
===================================================================
--- ../../../skeleton/rdbms/sybase/SybaseShowplanObserver.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/sybase/SybaseShowplanObserver.class.php	(working copy)
@@ -22,8 +22,8 @@
      * @param   string argument
      */
     public function __construct($arg) {
-      $log= &Logger::getInstance();
-      $this->cat= &$log->getCategory($arg);
+      $log= Logger::getInstance();
+      $this->cat= $log->getCategory($arg);
       $this->messagecodes= array_merge(
         range(3612,3615),
         range(6201,6299),
@@ -65,7 +65,7 @@
      * @param   mixed argument
      * @return  &rdbms.sybase.SybaseShowplanObserver
      */
-    public static function &instanceFor($arg) {
+    public static function instanceFor($arg) {
       return new SybaseShowplanObserver($arg);
     }
     
@@ -76,14 +76,14 @@
      * @param   &mixed observable
      * @param   &mixed dbevent
      */
-    public function update(&$obs, $arg= NULL) {
+    public function update($obs, $arg= NULL) {
       if (!is('rdbms.DBEvent', $arg)) return;
       
       // Passthrough event to appropriate function, if existant
       if (method_exists($this, 'on'.$arg->getName())) {
         call_user_func_array(
-          array(&$this, 'on'.$arg->getName()),
-          array(&$obs, &$arg)
+          array($this, 'on'.$arg->getName()),
+          array($obs, $arg)
         );
       }
     }
@@ -95,10 +95,10 @@
      * @param   &mixed observable
      * @param   &mixed dbevent
      */
-    public function onConnect(&$obs, &$arg) {
+    public function onConnect($obs, $arg) {
       if (0 <= version_compare(phpversion(), '4.3.5')) {
         ini_set('sybct.min_server_severity', 0);
-        sybase_set_message_handler(array(&$this, '_msghandler'), $obs->handle);
+        sybase_set_message_handler(array($this, '_msghandler'), $obs->handle);
       } else {
         $this->cat->warn($this->getClassName().': Unsupported PHP version detected (requires 4.3.5)');
       }
@@ -116,7 +116,7 @@
      * @param   &mixed observable
      * @param   &mixed dbevent
      */
-    public function onQuery(&$obs, &$arg) {
+    public function onQuery($obs, $arg) {
       
       // Add query to cache
       $this->queries[]= $arg->getArgument();
@@ -129,7 +129,7 @@
      * @param   &mixed observable
      * @param   &mixed dbevent
      */
-    public function onQueryEnd(&$obs, &$arg) {
+    public function onQueryEnd($obs, $arg) {
       $this->cat->info($this->getClassName().'::onQueryEnd() Query was:', (sizeof($this->queries) == 1 ? $this->queries[0] : $this->queries));
 
       $showplan= '';
Index: ../../../skeleton/rdbms/sybase/SybaseDBAdapter.class.php
===================================================================
--- ../../../skeleton/rdbms/sybase/SybaseDBAdapter.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/sybase/SybaseDBAdapter.class.php	(working copy)
@@ -22,7 +22,7 @@
      * @access  public
      * @param   &Object conn database connection
      */
-    public function __construct(&$conn) {
+    public function __construct($conn) {
       $this->map= array(
         'binary'        => DB_ATTRTYPE_BINARY, 
         'bit'           => DB_ATTRTYPE_BIT,      
@@ -65,7 +65,7 @@
     public function getDatabases() {
       $dbs= array();
       try {
-        $q= &$this->conn->query('select name from master..sysdatabases');
+        $q= $this->conn->query('select name from master..sysdatabases');
         while ($name= $q->next('name')) {
           $dbs[]= $name;
         }
@@ -101,7 +101,7 @@
       $t= new DBTable($table);
       
       // Get the table's attributes
-      $q= &$this->conn->query('
+      $q= $this->conn->query('
         select 
           c.name, 
           t.name as type, 
@@ -126,7 +126,7 @@
           $record['name'], 
           $this->map[$record['type']],
           $record['ident'],
-          ($record['status'] & 8), 
+          ($record['status']  8), 
           $record['length'], 
           $record['prec'], 
           $record['scale']
@@ -137,7 +137,7 @@
       // This query is taken in part from sp_help (part of core sps from
       // SQL Server/11.0.3.3 ESD#6/P-FREE/Linux Intel/Linux 2.2.14 
       // i686/1/OPT/Fri Mar 17 15:45:30 CET 2000)
-      $q= &$this->conn->query('
+      $q= $this->conn->query('
         declare @i int
         declare @id int
         declare @last int
@@ -193,14 +193,14 @@
       $keys= NULL;
       while ($record= $q->next()) {
         if ($keys != $record['keys']) {
-          $index= &$t->addIndex(new DBIndex(
+          $index= $t->addIndex(new DBIndex(
             $record['name'],
             explode(',', $record['keys'])
           ));
           $keys= $record['keys'];
         }
         if (2 == $record['number']) $index->unique= TRUE;
-        if ($record['status'] & 2048) $index->primary= TRUE;
+        if ($record['status']  2048) $index->primary= TRUE;
       }
       
       return $t;
@@ -228,12 +228,12 @@
         $this->prepareTemporaryIndexesTable();
         
         // Get all tables
-        $q= &$this->conn->query(
+        $q= $this->conn->query(
           'select o.name from %c..sysobjects o where o.type = "U"  -- User table',
           $database
         );
         if ($q) while ($record= $q->next()) {
-          $t[]= &$this->dbTableObjectFor($record['name']);
+          $t[]= $this->dbTableObjectFor($record['name']);
         }
         
       } catch (SQLException $e) {
@@ -256,7 +256,7 @@
     public function getTable($table) {
       try {
         $this->prepareTemporaryIndexesTable();
-        $t= &$this->dbTableObjectFor($table);
+        $t= $this->dbTableObjectFor($table);
       } catch (SQLException $e) {
         delete($t);
       } finally(); {
Index: ../../../skeleton/rdbms/sybase/SybaseResultSet.class.php
===================================================================
--- ../../../skeleton/rdbms/sybase/SybaseResultSet.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/sybase/SybaseResultSet.class.php	(working copy)
@@ -66,7 +66,7 @@
       foreach (array_keys($row) as $key) {
         if (NULL === $row[$key] || !isset($this->fields[$key])) continue;
         if ('datetime' == $this->fields[$key]) {
-          $row[$key]= &Date::fromString($row[$key]);
+          $row[$key]= Date::fromString($row[$key]);
         }
       }
       
Index: ../../../skeleton/rdbms/DBObserver.class.php
===================================================================
--- ../../../skeleton/rdbms/DBObserver.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/DBObserver.class.php	(working copy)
@@ -21,6 +21,6 @@
      * @param   mixed argument
      * @return  &rdbms.DBObserver
      */
-    public static function &instanceFor($arg);
+    public static function instanceFor($arg);
   }
 ?>
Index: ../../../skeleton/rdbms/Criteria.class.php
===================================================================
--- ../../../skeleton/rdbms/Criteria.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/Criteria.class.php	(working copy)
@@ -40,7 +40,7 @@
      */
     public function __construct($criterion= NULL) {
       if (is('rdbms.criterion.Criterion', $criterion)) {
-        $this->conditions[]= &$criterion;
+        $this->conditions[]= $criterion;
       } else if (is_array($criterion)) {
         $this->conditions[]= new SimpleExpression($criterion[0], $criterion[1], $criterion[2]);
         for ($i= 1, $n= func_num_args(); $i < $n; $i++) {
@@ -74,7 +74,7 @@
      */
     public function add($criterion, $value= NULL, $comparison= EQUAL) {
       if (is('rdbms.criterion.Criterion', $criterion)) {
-        $this->conditions[]= &$criterion;
+        $this->conditions[]= $criterion;
       } else {
         $this->conditions[]= new SimpleExpression($criterion, $value, $comparison);        
       }
@@ -137,7 +137,7 @@
      * @return  string
      * @throws  rdbms.SQLStateException
      */
-    public function toSQL(&$db, $types) {
+    public function toSQL($db, $types) {
       $sql= '';
       
       // Process conditions
@@ -177,7 +177,7 @@
      * @param   &rdbms.Peer peer
      * @return  &rdbms.ResultSet
      */
-    public function executeSelect(&$conn, &$peer) {
+    public function executeSelect($conn, $peer) {
       return $conn->query(
         'select %c from %c%c', 
         array_keys($peer->types),
Index: ../../../skeleton/rdbms/DBConnection.class.php
===================================================================
--- ../../../skeleton/rdbms/DBConnection.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/DBConnection.class.php	(working copy)
@@ -36,8 +36,8 @@
      * @access  public
      * @param   &rdbms.DSN dsn
      */
-    public function __construct(&$dsn) { 
-      $this->dsn= &$dsn;
+    public function __construct($dsn) { 
+      $this->dsn= $dsn;
       $this->flags= $dsn->getFlags();
       $this->setTimeout($dsn->getProperty('timeout', 0));   // 0 means no timeout
       
@@ -50,8 +50,8 @@
       // Add observers
       foreach (array_keys($obs) as $observer) {
         try {
-          $class= &XPClass::forName($observer);
-          $inst= &call_user_func(array(xp::reflect($class->getName()), 'instanceFor'), $obs[$observer]);
+          $class= XPClass::forName($observer);
+          $inst= call_user_func(array(xp::reflect($class->getName()), 'instanceFor'), $obs[$observer]);
         } catch (ClassNotFoundException $e) {
           throw ($e);
         }
@@ -206,7 +206,7 @@
      * @param   mixed* args
      * @return  &rdbms.ResultSet
      */
-    public function &query() { }
+    public function query() { }
     
     /**
      * Begin a transaction
@@ -215,7 +215,7 @@
      * @param   &rdbms.DBTransaction transaction
      * @return  &rdbms.DBTransaction
      */
-    public function &begin(&$transaction) { }
+    public function begin($transaction) { }
     
     /**
      * Retrieve transaction state
Index: ../../../skeleton/rdbms/DataSet.class.php
===================================================================
--- ../../../skeleton/rdbms/DataSet.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/DataSet.class.php	(working copy)
@@ -99,7 +99,7 @@
       if (is_array($params)) {
         foreach (array_keys($params) as $key) {
           $k= substr(strrchr('#'.$key, '#'), 1);
-          $this->{$k}= &$params[$key];
+          $this->{$k}= $params[$key];
         }
         $this->_new= FALSE;
       }
@@ -112,7 +112,7 @@
      * @access  public
      * @return  &rdbms.Peer
      */
-    public function &getPeer() { }
+    public function getPeer() { }
 
     /**
      * Changes a value by a specified key and returns the previous value.
@@ -122,10 +122,10 @@
      * @param   &mixed value
      * @return  &mixed previous value
      */
-    public function &_change($key, &$value) {
-      $this->_changed[$key]= &$value;
-      $previous= &$this->{$key};
-      $this->{$key}= &$value;
+    public function _change($key, $value) {
+      $this->_changed[$key]= $value;
+      $previous= $this->{$key};
+      $this->{$key}= $value;
       return $previous;
     }
     
@@ -172,7 +172,7 @@
      * @return  string
      */
     public function toString() {
-      $peer= &$this->getPeer();
+      $peer= $this->getPeer();
             
       // Retrieve types from peer and figure out the maximum length 
       // of a key which will be used for the key "column". The minimum
@@ -209,7 +209,7 @@
      * @throws  rdbms.SQLException in case an error occurs
      */  
     public function doInsert() {
-      $peer= &$this->getPeer();
+      $peer= $this->getPeer();
       if ($id= $peer->doInsert($this->_changed)) {
       
         // Set identity value if requested. We do not use the _change()
@@ -230,8 +230,8 @@
      * @return  int number of affected rows
      * @throws  rdbms.SQLException in case an error occurs
      */  
-    public function doUpdate(&$criteria) {
-      $peer= &$this->getPeer();
+    public function doUpdate($criteria) {
+      $peer= $this->getPeer();
       $affected= $peer->doUpdate($this->_changed, $criteria);
       $this->_changed= array();
       return $affected;
@@ -246,8 +246,8 @@
      * @return  int number of affected rows
      * @throws  rdbms.SQLException in case an error occurs
      */  
-    public function doDelete(&$criteria) {
-      $peer= &$this->getPeer();
+    public function doDelete($criteria) {
+      $peer= $this->getPeer();
       $affected= $peer->doDelete($criteria);
       $this->_changed= array();
       return $affected;
@@ -281,7 +281,7 @@
     public function update() {
       if (empty($this->_changed)) return 0;
 
-      $peer= &$this->getPeer();
+      $peer= $this->getPeer();
       if (empty($peer->primary)) {
         throw(new SQLStateException('No primary key'));
       }
@@ -304,7 +304,7 @@
      * @throws  rdbms.SQLException
      */
     public function save() {
-      $peer= &$this->getPeer();
+      $peer= $this->getPeer();
       
       try {
         $this->_new ? $this->insert() : $this->update();
@@ -325,7 +325,7 @@
      * @throws  rdbms.SQLException
      */
     public function delete() { 
-      $peer= &$this->getPeer();
+      $peer= $this->getPeer();
       if (empty($peer->primary)) {
         throw(new SQLStateException('No primary key'));
       }
Index: ../../../skeleton/rdbms/DriverManager.class.php
===================================================================
--- ../../../skeleton/rdbms/DriverManager.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/DriverManager.class.php	(working copy)
@@ -37,7 +37,7 @@
      * @access  public
      * @return  &rdbms.DriverManager
      */
-    public static function &getInstance() {
+    public static function getInstance() {
       static $instance= NULL;
       
       if (!$instance) $instance= new DriverManager();
@@ -59,9 +59,9 @@
      * @param   string name identifier
      * @param   &lang.XPClass class
      */
-    public static function register($name, &$class) {
-      $i= &DriverManager::getInstance();
-      $i->drivers[$name]= &$class;
+    public static function register($name, $class) {
+      $i= DriverManager::getInstance();
+      $i->drivers[$name]= $class;
     }
     
     /**
@@ -73,7 +73,7 @@
      * @return  &rdbms.DBConnection
      * @throws  rdbms.DriverNotSupportedException
      */
-    public static function &getConnection($str) {
+    public static function getConnection($str) {
       static $builtin= array(
         'sybase'   => 'rdbms.sybase.SybaseConnection',
         'mysql'    => 'rdbms.mysql.MySQLConnection',
@@ -84,12 +84,12 @@
       
       $dsn= new DSN($str);
       $id= $dsn->getDriver();
-      $i= &DriverManager::getInstance();
+      $i= DriverManager::getInstance();
       
       // Lookup driver by identifier. If it's one
       if (!isset($i->drivers[$id])) {
         try {
-          $i->drivers[$id]= &XPClass::forName($builtin[$id]);
+          $i->drivers[$id]= XPClass::forName($builtin[$id]);
         } catch (ClassNotFoundException $e) {
           throw(new DriverNotSupportedException(
             'No driver registered for '.$id.': '.$e->getMessage()
Index: ../../../skeleton/rdbms/DBEvent.class.php
===================================================================
--- ../../../skeleton/rdbms/DBEvent.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/DBEvent.class.php	(working copy)
@@ -50,8 +50,8 @@
      * @access  public
      * @param   &lang.Object arg
      */
-    public function setArgument(&$arg) {
-      $this->arg= &$arg;
+    public function setArgument($arg) {
+      $this->arg= $arg;
     }
 
     /**
@@ -60,7 +60,7 @@
      * @access  public
      * @return  &lang.Object
      */
-    public function &getArgument() {
+    public function getArgument() {
       return $this->arg;
     }
     
Index: ../../../skeleton/rdbms/SQLConnectException.class.php
===================================================================
--- ../../../skeleton/rdbms/SQLConnectException.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/SQLConnectException.class.php	(working copy)
@@ -22,9 +22,9 @@
      * @param   string message
      * @param   &rdbms.DSN dsn
      */
-    public function __construct($message, &$dsn) {
+    public function __construct($message, $dsn) {
       parent::__construct($message);
-      $this->dsn= &$dsn;
+      $this->dsn= $dsn;
     }
 
     /**
@@ -33,7 +33,7 @@
      * @access  public
      * @return  &rdbms.DSN
      */
-    public function &getDsn() {
+    public function getDsn() {
       return $this->dsn;
     }
 
Index: ../../../skeleton/rdbms/ConnectionManager.class.php
===================================================================
--- ../../../skeleton/rdbms/ConnectionManager.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/ConnectionManager.class.php	(working copy)
@@ -26,7 +26,7 @@
      * @access  public
      * @return  &rdbms.ConnectionManager
      */
-    public static function &getInstance() {
+    public static function getInstance() {
       static $instance= NULL;
       
       if (!$instance) $instance= new ConnectionManager();
@@ -50,11 +50,11 @@
      * @return  bool
      * @throws  rdbms.DriverNotSupportedException
      */
-    public function configure(&$properties) {
+    public function configure($properties) {
       $section= $properties->getFirstSection();
       if ($section) do {
         try {
-          $conn= &DriverManager::getConnection($properties->readString($section, 'dsn'));
+          $conn= DriverManager::getConnection($properties->readString($section, 'dsn'));
         } catch (DriverNotSupportedException $e) {
           throw($e);
         }
@@ -89,12 +89,12 @@
      * @param   string hostAlias default NULL
      * @param   string userAlias default NULL
      */
-    public function &register(&$conn, $hostAlias= NULL, $userAlias= NULL) {
+    public function register($conn, $hostAlias= NULL, $userAlias= NULL) {
       $host= (NULL == $hostAlias) ? $conn->dsn->getHost() : $hostAlias;
       $user= (NULL == $userAlias) ? $conn->dsn->getUser() : $userAlias;
       
       if (!isset($this->pool[$user.'@'.$host])) {
-        $this->pool[$user.'@'.$host]= &$conn;
+        $this->pool[$user.'@'.$host]= $conn;
       }
       
       return $conn;
@@ -108,7 +108,7 @@
      * @return  &rdbms.DBConnection
      * @throws  rdbms.ConnectionNotRegisteredException in case there's no connection for these names
      */
-    public function &get($host, $user) {
+    public function get($host, $user) {
       if (!isset($this->pool[$user.'@'.$host])) {
         throw(new ConnectionNotRegisteredException(
           'No connections registered for '.$user.'@'.$host
@@ -125,11 +125,11 @@
      * @return  &rdbms.DBConnection
      * @throws  rdbms.ConnectionNotRegisteredException in case there's no connection for these names
      */
-    public function &getByHost($hostName, $num= -1) {
+    public function getByHost($hostName, $num= -1) {
       $results= array();
       foreach (array_keys($this->pool) as $id) {
         list ($user, $host)= explode('@', $id);
-        if ($hostName == $host) $results[]= &$this->pool[$id];
+        if ($hostName == $host) $results[]= $this->pool[$id];
       }
       if (sizeof($results) < 1) {
         throw(new ConnectionNotRegisteredException(
Index: ../../../skeleton/rdbms/pgsql/PostgreSQLResultSet.class.php
===================================================================
--- ../../../skeleton/rdbms/pgsql/PostgreSQLResultSet.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/pgsql/PostgreSQLResultSet.class.php	(working copy)
@@ -67,7 +67,7 @@
           case 'date':
           case 'time':
           case 'timestamp':
-            $row[$key]= &Date::fromString($row[$key]);
+            $row[$key]= Date::fromString($row[$key]);
             break;
 
           case 'bool':
Index: ../../../skeleton/rdbms/pgsql/PostgreSQLConnection.class.php
===================================================================
--- ../../../skeleton/rdbms/pgsql/PostgreSQLConnection.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/pgsql/PostgreSQLConnection.class.php	(working copy)
@@ -40,7 +40,7 @@
       if ($this->dsn->getUser()) $cs.= ' user='.$this->dsn->getUser();
       if ($this->dsn->getPassword()) $cs.= ' password='.$this->dsn->getPassword();
 
-      if ($this->flags & DB_PERSISTENT) {
+      if ($this->flags  DB_PERSISTENT) {
         $this->handle= pg_pconnect($cs);
       } else {
         $this->handle= pg_connect($cs);
@@ -110,7 +110,7 @@
      * @return  mixed identity value
      */
     public function identity($field) {
-      $q= &$this->query('select currval(%s) as id', $field);
+      $q= $this->query('select currval(%s) as id', $field);
       $id= $q ? $q->next('id') : NULL;
       $this->_obs && $this->notifyObservers(new DBEvent(__FUNCTION__, $id));
       return $id;
@@ -127,7 +127,7 @@
     public function insert() { 
       $args= func_get_args();
       $args[0]= 'insert '.$args[0];
-      if (!($r= &call_user_func_array(array(&$this, 'query'), $args))) {
+      if (!($r= call_user_func_array(array($this, 'query'), $args))) {
         return FALSE;
       }
 
@@ -145,7 +145,7 @@
     public function update() {
       $args= func_get_args();
       $args[0]= 'update '.$args[0];
-      if (!($r= &call_user_func_array(array(&$this, 'query'), $args))) {
+      if (!($r= call_user_func_array(array($this, 'query'), $args))) {
         return FALSE;
       }
       
@@ -163,7 +163,7 @@
     public function delete() { 
       $args= func_get_args();
       $args[0]= 'delete '.$args[0];
-      if (!($r= &call_user_func_array(array(&$this, 'query'), $args))) {
+      if (!($r= call_user_func_array(array($this, 'query'), $args))) {
         return FALSE;
       }
       
@@ -181,7 +181,7 @@
     public function select() { 
       $args= func_get_args();
       $args[0]= 'select '.$args[0];
-      if (!($r= &call_user_func_array(array(&$this, 'query'), $args))) {
+      if (!($r= call_user_func_array(array($this, 'query'), $args))) {
         return FALSE;
       }
       
@@ -198,12 +198,12 @@
      * @return  &rdbms.pgsql.PostgreSQLResultSet or FALSE to indicate failure
      * @throws  rdbms.SQLException
      */
-    public function &query() { 
+    public function query() { 
       $args= func_get_args();
-      $sql= call_user_func_array(array(&$this, 'prepare'), $args);
+      $sql= call_user_func_array(array($this, 'prepare'), $args);
 
       if (!is_resource($this->handle)) {
-        if (!($this->flags & DB_AUTOCONNECT)) throw(new SQLStateException('Not connected'));
+        if (!($this->flags  DB_AUTOCONNECT)) throw(new SQLStateException('Not connected'));
         try {
           $c= $this->connect();
         }
@@ -244,11 +244,11 @@
      * @param   &rdbms.Transaction transaction
      * @return  &rdbms.Transaction
      */
-    public function &begin(&$transaction) {
+    public function begin($transaction) {
       if (FALSE === $this->query('begin transaction')) {
         return FALSE;
       }
-      $transaction->db= &$this;
+      $transaction->db= $this;
       return $transaction;
     }
     
Index: ../../../skeleton/rdbms/DBTable.class.php
===================================================================
--- ../../../skeleton/rdbms/DBTable.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/DBTable.class.php	(working copy)
@@ -36,7 +36,7 @@
      * @param   string name
      * @return  &rdbms.DBTable a table object
      */
-    public function &getByName(&$adapter, $name) {
+    public function getByName($adapter, $name) {
       return $adapter->getTable($name);
     }
 
@@ -48,7 +48,7 @@
      * @param   string database
      * @return  &rdbms.DBTable[] an array of table objects
      */
-    public function &getByDatabase(&$adapter, $database) {
+    public function getByDatabase($adapter, $database) {
       return $adapter->getTables($database);
     }
 
@@ -59,7 +59,7 @@
      * @return  &rdbms.DBAttribute an attribute
      * @see     getNextAttribute
      */
-    public function &getFirstAttribute() {
+    public function getFirstAttribute() {
       reset($this->attributes);
       return current($this->attributes);
     }
@@ -79,7 +79,7 @@
      * @access  public
      * @return  &rdbms.DBAttribute an attribute or FALSE if none more exist
      */
-    public function &getNextAttribute() {
+    public function getNextAttribute() {
       return next($this->attributes);
     }
 
@@ -90,8 +90,8 @@
      * @param   &rdbms.DBAttribute attr the attribute to add
      * @return  &rdbms.DBAttribute the added attribute
      */
-    public function &addAttribute(&$attr) {
-      $this->attributes[]= &$attr;
+    public function addAttribute($attr) {
+      $this->attributes[]= $attr;
       return $attr;
     }
 
@@ -102,8 +102,8 @@
      * @param   &rdbms.DBIndex index the index to add
      * @return  &rdbms.DBIndex the added index
      */
-    public function &addIndex(&$index) {
-      $this->indexes[]= &$index;
+    public function addIndex($index) {
+      $this->indexes[]= $index;
       return $index;
     }
 
@@ -114,7 +114,7 @@
      * @return  &rdbms.DBIndex an index
      * @see     getNextIndex
      */
-    public function &getFirstIndex() {
+    public function getFirstIndex() {
       reset($this->indexes);
       return current($this->indexes);
     }
@@ -126,7 +126,7 @@
      * @return  &rdbms.DBIndex an index or FALSE to indicate there are none left
      * @see     getNextIndex
      */
-    public function &getNextIndex() {
+    public function getNextIndex() {
       return next($this->indexes);
     }
 
Index: ../../../skeleton/rdbms/Statement.class.php
===================================================================
--- ../../../skeleton/rdbms/Statement.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/Statement.class.php	(working copy)
@@ -58,13 +58,13 @@
      * @param   &rdbms.Peer peer
      * @return  &rdbms.ResultSet
      */
-    public function &executeSelect(&$conn, &$peer) {
+    public function executeSelect($conn, $peer) {
       $this->arguments[0]= preg_replace(
         '/object\(([^\)]+)\)/i', 
         '$1.'.implode(', $1.', array_keys($peer->types)),
         $this->arguments[0]
       );
-      return $conn->query(call_user_func_array(array(&$conn, 'prepare'), $this->arguments));
+      return $conn->query(call_user_func_array(array($conn, 'prepare'), $this->arguments));
     }
 
   } 
Index: ../../../skeleton/rdbms/criterion/Restrictions.class.php
===================================================================
--- ../../../skeleton/rdbms/criterion/Restrictions.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/criterion/Restrictions.class.php	(working copy)
@@ -28,7 +28,7 @@
      * @param   mixed[] values
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public static function &in($field, $values) {
+    public static function in($field, $values) {
       return new SimpleExpression($field, $values, IN);
     }
 
@@ -41,7 +41,7 @@
      * @param   mixed[] values
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public static function &notIn($field, $values) {
+    public static function notIn($field, $values) {
       return new SimpleExpression($field, $values, NOT_IN);
     }
 
@@ -54,7 +54,7 @@
      * @param   mixed value
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public static function &like($field, $value) {
+    public static function like($field, $value) {
       return new SimpleExpression($field, $value, LIKE);
     }
 
@@ -68,7 +68,7 @@
      * @param   mixed value
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public static function &ilike($field, $value) {
+    public static function ilike($field, $value) {
       return new SimpleExpression($field, sql_regcase($value), LIKE);
     }
         
@@ -81,7 +81,7 @@
      * @param   mixed value
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public static function &equal($field, $value) {
+    public static function equal($field, $value) {
       return new SimpleExpression($field, $value, EQUAL);
     }
 
@@ -94,7 +94,7 @@
      * @param   mixed value
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public static function &notEqual($field, $value) {
+    public static function notEqual($field, $value) {
       return new SimpleExpression($field, $value, NOT_EQUAL);
     }
 
@@ -107,7 +107,7 @@
      * @param   mixed value
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public static function &lessThan($field, $value) {
+    public static function lessThan($field, $value) {
       return new SimpleExpression($field, $value, LESS_THAN);
     }
 
@@ -120,7 +120,7 @@
      * @param   mixed value
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public static function &greaterThan($field, $value) {
+    public static function greaterThan($field, $value) {
       return new SimpleExpression($field, $value, GREATER_THAN);
     }
 
@@ -133,7 +133,7 @@
      * @param   mixed value
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public static function &lessThanOrEqualTo($field, $value) {
+    public static function lessThanOrEqualTo($field, $value) {
       return new SimpleExpression($field, $value, LESS_EQUAL);
     }
 
@@ -146,7 +146,7 @@
      * @param   mixed value
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public static function &greaterThanOrEqualTo($field, $value) {
+    public static function greaterThanOrEqualTo($field, $value) {
       return new SimpleExpression($field, $value, GREATER_EQUAL);
     }
 
@@ -160,7 +160,7 @@
      * @param   mixed hi
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public static function &between($field, $lo, $hi) {
+    public static function between($field, $lo, $hi) {
       return new BetweenExpression($field, $lo, $hi);
     }
 
@@ -174,8 +174,8 @@
      * @param   &rdbms.criterion.Criterion*
      * @return  &rdbms.criterion.LogicalExpression
      */
-    public static function &anyOf(&$first, &$second) {
-      $args= array(&$first, &$second);
+    public static function anyOf($first, $second) {
+      $args= array($first, $second);
       for ($i= 2, $n= func_num_args(); $i < $n; $i++) {
         $args[]= func_get_arg($i);
       }
@@ -192,8 +192,8 @@
      * @param   &rdbms.criterion.Criterion*
      * @return  &rdbms.criterion.LogicalExpression
      */
-    public static function &allOf(&$first, &$second) {
-      $args= array(&$first, &$second);
+    public static function allOf($first, $second) {
+      $args= array($first, $second);
       for ($i= 2, $n= func_num_args(); $i < $n; $i++) {
         $args[]= func_get_arg($i);
       }
@@ -208,7 +208,7 @@
      * @param   &rdbms.criterion.Criterion expression
      * @return  &rdbms.criterion.NegationExpression
      */
-    public static function &not(&$expression) {
+    public static function not($expression) {
       return new NegationExpression($expression);
     }
   }
Index: ../../../skeleton/rdbms/criterion/SimpleExpression.class.php
===================================================================
--- ../../../skeleton/rdbms/criterion/SimpleExpression.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/criterion/SimpleExpression.class.php	(working copy)
@@ -58,7 +58,7 @@
       );
 
       $this->field= $field;
-      $this->value= &$value;
+      $this->value= $value;
 
       // Automatically convert '= NULL' to 'is NULL', former is not valid ANSI-SQL
       if (NULL === $value && isset($nullMapping[$op])) {
@@ -76,7 +76,7 @@
      * @return  string
      * @throws  rdbms.SQLStateException
      */
-    public function asSql(&$conn, $types) { 
+    public function asSql($conn, $types) { 
       if (!isset($types[$this->field])) {
         throw(new SQLStateException('Field "'.$this->field.'" unknown'));
       }
Index: ../../../skeleton/rdbms/criterion/BetweenExpression.class.php
===================================================================
--- ../../../skeleton/rdbms/criterion/BetweenExpression.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/criterion/BetweenExpression.class.php	(working copy)
@@ -27,8 +27,8 @@
      */
     public function __construct($field, $lo, $hi) {
       $this->field= $field;
-      $this->lo= &$lo;
-      $this->hi= &$hi;
+      $this->lo= $lo;
+      $this->hi= $hi;
     }
   
     /**
@@ -40,7 +40,7 @@
      * @return  string
      * @throws  rdbms.SQLStateException
      */
-    public function asSql(&$conn, $types) { 
+    public function asSql($conn, $types) { 
       if (!isset($types[$this->field])) {
         throw(new SQLStateException('Field "'.$this->field.'" unknown'));
       }
Index: ../../../skeleton/rdbms/criterion/LogicalExpression.class.php
===================================================================
--- ../../../skeleton/rdbms/criterion/LogicalExpression.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/criterion/LogicalExpression.class.php	(working copy)
@@ -40,7 +40,7 @@
      * @return  string
      * @throws  rdbms.SQLStateException
      */
-    public function asSql(&$conn, $types) { 
+    public function asSql($conn, $types) { 
       $sql= '';
       for ($i= 0, $s= sizeof($this->criterions); $i < $s; $i++) {
         $sql.= $this->criterions[$i]->asSql($conn, $types).' '.$this->op.' ';
Index: ../../../skeleton/rdbms/criterion/Criterion.class.php
===================================================================
--- ../../../skeleton/rdbms/criterion/Criterion.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/criterion/Criterion.class.php	(working copy)
@@ -23,6 +23,6 @@
      * @return  string
      * @throws  rdbms.SQLStateException
      */
-    public function asSql(&$conn, $types);
+    public function asSql($conn, $types);
   }
 ?>
Index: ../../../skeleton/rdbms/criterion/Property.class.php
===================================================================
--- ../../../skeleton/rdbms/criterion/Property.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/criterion/Property.class.php	(working copy)
@@ -33,7 +33,7 @@
      * @param   string name
      * @return  &rdbms.criterion.Property
      */
-    public static function &forName($name) {
+    public static function forName($name) {
       static $instances= array();
       
       if (!isset($instances[$name])) {
@@ -49,7 +49,7 @@
      * @param   mixed[] values
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public function &in($values) {
+    public function in($values) {
       return Restrictions::in($this->name, $values);
     }
 
@@ -60,7 +60,7 @@
      * @param   mixed[] values
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public function &notIn($values) {
+    public function notIn($values) {
       return Restrictions::notIn($this->name, $values);
     }
 
@@ -71,7 +71,7 @@
      * @param   mixed value
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public function &like($value) {
+    public function like($value) {
       return Restrictions::like($this->name, $value);
     }
 
@@ -83,7 +83,7 @@
      * @param   mixed value
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public function &ilike($value) {
+    public function ilike($value) {
       return Restrictions::ilike($this->name, $value);
     }
         
@@ -94,7 +94,7 @@
      * @param   mixed value
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public function &equal($value) {
+    public function equal($value) {
       return Restrictions::equal($this->name, $value);
     }
 
@@ -105,7 +105,7 @@
      * @param   mixed value
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public function &notEqual($value) {
+    public function notEqual($value) {
       return Restrictions::notEqual($this->name, $value);
     }
 
@@ -116,7 +116,7 @@
      * @param   mixed value
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public function &lessThan($value) {
+    public function lessThan($value) {
       return Restrictions::lessThan($this->name, $value);
     }
 
@@ -127,7 +127,7 @@
      * @param   mixed value
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public function &greaterThan($value) {
+    public function greaterThan($value) {
       return Restrictions::greaterThan($this->name, $value);
     }
 
@@ -138,7 +138,7 @@
      * @param   mixed value
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public function &lessThanOrEqualTo($value) {
+    public function lessThanOrEqualTo($value) {
       return Restrictions::lessThanOrEqualTo($this->name, $value);
     }
 
@@ -149,7 +149,7 @@
      * @param   mixed value
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public function &greaterThanOrEqualTo($value) {
+    public function greaterThanOrEqualTo($value) {
       return Restrictions::greaterThanOrEqualTo($this->name, $value);
     }
 
@@ -161,7 +161,7 @@
      * @param   mixed hi
      * @return  &rdbms.criterion.SimpleExpression
      */
-    public function &between($lo, $hi) {
+    public function between($lo, $hi) {
       return Restrictions::between($this->name, $lo, $hi);
     }
   }
Index: ../../../skeleton/rdbms/criterion/NegationExpression.class.php
===================================================================
--- ../../../skeleton/rdbms/criterion/NegationExpression.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/criterion/NegationExpression.class.php	(working copy)
@@ -21,8 +21,8 @@
      * @access  public
      * @param   &rdbms.criterion.Criterion criterion
      */
-    public function __construct(&$criterion) {
-      $this->criterion= &$criterion;
+    public function __construct($criterion) {
+      $this->criterion= $criterion;
     }
   
     /**
@@ -34,7 +34,7 @@
      * @return  string
      * @throws  rdbms.SQLStateException
      */
-    public function asSql(&$conn, $types) { 
+    public function asSql($conn, $types) { 
       return $conn->prepare('not (%c)', $this->criterion->asSql($conn, $types));
     }
 
Index: ../../../skeleton/rdbms/sqlite/SQLiteConnection.class.php
===================================================================
--- ../../../skeleton/rdbms/sqlite/SQLiteConnection.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/sqlite/SQLiteConnection.class.php	(working copy)
@@ -79,7 +79,7 @@
       if (is_resource($this->handle)) return TRUE;  // Already connected
       if (!$reconnect && (FALSE === $this->handle)) return FALSE;    // Previously failed connecting
 
-      if ($this->flags & DB_PERSISTENT) {
+      if ($this->flags  DB_PERSISTENT) {
         $this->handle= sqlite_open(
           $this->dsn->getUser().'.'.$this->dsn->getHost(), 
           0666,
@@ -99,7 +99,7 @@
       
       $this->_obs && $this->notifyObservers(new DBEvent(__FUNCTION__, $reconnect));
 
-      sqlite_create_function($this->handle, 'cast', array(&$this, '_cast'), 2);
+      sqlite_create_function($this->handle, 'cast', array($this, '_cast'), 2);
       return TRUE;
     }
     
@@ -220,7 +220,7 @@
     public function insert() { 
       $args= func_get_args();
       $args[0]= 'insert '.$args[0];
-      if (!($r= call_user_func_array(array(&$this, 'query'), $args))) {
+      if (!($r= call_user_func_array(array($this, 'query'), $args))) {
         return FALSE;
       }
       
@@ -239,7 +239,7 @@
     public function update() {
       $args= func_get_args();
       $args[0]= 'update '.$args[0];
-      if (!($r= call_user_func_array(array(&$this, 'query'), $args))) {
+      if (!($r= call_user_func_array(array($this, 'query'), $args))) {
         return FALSE;
       }
       
@@ -257,7 +257,7 @@
     public function delete() { 
       $args= func_get_args();
       $args[0]= 'delete '.$args[0];
-      if (!($r= call_user_func_array(array(&$this, 'query'), $args))) {
+      if (!($r= call_user_func_array(array($this, 'query'), $args))) {
         return FALSE;
       }
       
@@ -275,7 +275,7 @@
     public function select() { 
       $args= func_get_args();
       $args[0]= 'select '.$args[0];
-      if (!($r= call_user_func_array(array(&$this, 'query'), $args))) {
+      if (!($r= call_user_func_array(array($this, 'query'), $args))) {
         return FALSE;
       }
       
@@ -292,12 +292,12 @@
      * @return  &rdbms.mysql.MySQLResultSet or FALSE to indicate failure
      * @throws  rdbms.SQLException
      */
-    public function &query() { 
+    public function query() { 
       $args= func_get_args();
       $sql= $this->_prepare($args);
 
       if (!is_resource($this->handle)) {
-        if (!($this->flags & DB_AUTOCONNECT)) throw(new SQLStateException('Not connected'));
+        if (!($this->flags  DB_AUTOCONNECT)) throw(new SQLStateException('Not connected'));
         try {
           $c= $this->connect();
         } catch (SQLException $e) {
@@ -310,8 +310,8 @@
       
       $this->_obs && $this->notifyObservers(new DBEvent(__FUNCTION__, $sql));
 
-      if ($this->flags & DB_UNBUFFERED) {
-        $result= sqlite_unbuffered_query($sql, $this->handle, $this->flags & DB_STORE_RESULT);
+      if ($this->flags  DB_UNBUFFERED) {
+        $result= sqlite_unbuffered_query($sql, $this->handle, $this->flags  DB_STORE_RESULT);
       } else {
         $result= sqlite_query($sql, $this->handle);
       }
@@ -343,7 +343,7 @@
      * @param   &rdbms.Transaction transaction
      * @return  &rdbms.Transaction
      */
-    public function &begin($transaction) {
+    public function begin($transaction) {
       if (FALSE === $this->query('begin transaction xp_%c', $transaction->name)) {
         return FALSE;
       }
Index: ../../../skeleton/rdbms/mysql/MySQLConnection.class.php
===================================================================
--- ../../../skeleton/rdbms/mysql/MySQLConnection.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/mysql/MySQLConnection.class.php	(working copy)
@@ -42,7 +42,7 @@
      * @access  public
      * @param   &rdbms.DSN dsn
      */
-    public function __construct(&$dsn) { 
+    public function __construct($dsn) { 
       parent::__construct($dsn);
       $this->formatter= new StatementFormatter();
       $this->formatter->setEscape('"');
@@ -65,7 +65,7 @@
       if (is_resource($this->handle)) return TRUE;  // Already connected
       if (!$reconnect && (FALSE === $this->handle)) return FALSE;    // Previously failed connecting
 
-      if ($this->flags & DB_PERSISTENT) {
+      if ($this->flags  DB_PERSISTENT) {
         $this->handle= mysql_pconnect(
           $this->dsn->getHost(), 
           $this->dsn->getUser(), 
@@ -173,7 +173,7 @@
     public function insert() { 
       $args= func_get_args();
       $args[0]= 'insert '.$args[0];
-      if (!($r= call_user_func_array(array(&$this, 'query'), $args))) {
+      if (!($r= call_user_func_array(array($this, 'query'), $args))) {
         return FALSE;
       }
       
@@ -192,7 +192,7 @@
     public function update() {
       $args= func_get_args();
       $args[0]= 'update '.$args[0];
-      if (!($r= &call_user_func_array(array(&$this, 'query'), $args))) {
+      if (!($r= call_user_func_array(array($this, 'query'), $args))) {
         return FALSE;
       }
       
@@ -210,7 +210,7 @@
     public function delete() { 
       $args= func_get_args();
       $args[0]= 'delete '.$args[0];
-      if (!($r= &call_user_func_array(array(&$this, 'query'), $args))) {
+      if (!($r= call_user_func_array(array($this, 'query'), $args))) {
         return FALSE;
       }
       
@@ -228,7 +228,7 @@
     public function select() { 
       $args= func_get_args();
       $args[0]= 'select '.$args[0];
-      if (!($r= &call_user_func_array(array(&$this, 'query'), $args))) {
+      if (!($r= call_user_func_array(array($this, 'query'), $args))) {
         return FALSE;
       }
       
@@ -245,12 +245,12 @@
      * @return  &rdbms.mysql.MySQLResultSet or FALSE to indicate failure
      * @throws  rdbms.SQLException
      */
-    public function &query() { 
+    public function query() { 
       $args= func_get_args();
-      $sql= call_user_func_array(array(&$this, 'prepare'), $args);
+      $sql= call_user_func_array(array($this, 'prepare'), $args);
 
       if (!is_resource($this->handle)) {
-        if (!($this->flags & DB_AUTOCONNECT)) throw(new SQLStateException('Not connected'));
+        if (!($this->flags  DB_AUTOCONNECT)) throw(new SQLStateException('Not connected'));
         try {
           $c= $this->connect();
         }
@@ -264,8 +264,8 @@
       
       $this->_obs && $this->notifyObservers(new DBEvent(__FUNCTION__, $sql));
 
-      if ($this->flags & DB_UNBUFFERED) {
-        $result= mysql_unbuffered_query($sql, $this->handle, $this->flags & DB_STORE_RESULT);
+      if ($this->flags  DB_UNBUFFERED) {
+        $result= mysql_unbuffered_query($sql, $this->handle, $this->flags  DB_STORE_RESULT);
       } else {
         $result= mysql_query($sql, $this->handle);
       }
@@ -308,9 +308,9 @@
      * @param   &rdbms.Transaction transaction
      * @return  &rdbms.Transaction
      */
-    public function &begin(&$transaction) {
+    public function begin($transaction) {
       if (!$this->query('begin')) return FALSE;
-      $transaction->db= &$this;
+      $transaction->db= $this;
       return $transaction;
     }
     
Index: ../../../skeleton/rdbms/mysql/MySQLDBAdapter.class.php
===================================================================
--- ../../../skeleton/rdbms/mysql/MySQLDBAdapter.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/mysql/MySQLDBAdapter.class.php	(working copy)
@@ -20,7 +20,7 @@
      * @access  public
      * @param   &Object conn database connection
      */
-    public function __construct(&$conn) {
+    public function __construct($conn) {
       $this->map= array(
         'varchar'    => DB_ATTRTYPE_VARCHAR,
         'int'        => DB_ATTRTYPE_INT,
@@ -44,7 +44,7 @@
     public function getDatabases() {
       $dbs= array();
       try {
-        $q= &$this->conn->query('show databases');
+        $q= $this->conn->query('show databases');
         while ($name= $q->next('name')) {
           $dbs[]= $name;
         }
@@ -65,9 +65,9 @@
     public function getTables($database) {
       $t= array();
       try {
-        $q= &$this->conn->query('show tables');
+        $q= $this->conn->query('show tables');
         while ($table= $q->next()) {
-          $t[]= &$this->getTable($table[key($table)]);
+          $t[]= $this->getTable($table[key($table)]);
         }
       } catch (SQLException $e) {
         throw($e);
@@ -101,7 +101,7 @@
         // | changedby   | varchar(16)  |      |     |                     |                |
         // +-------------+--------------+------+-----+---------------------+----------------+
         // 8 rows in set (0.00 sec)
-        $q= &$this->conn->query('describe %c', $table);
+        $q= $this->conn->query('describe %c', $table);
         while ($record= $q->next()) {
           preg_match('#^([a-z]+)(\(([0-9]+)\))?#', $record['Type'], $regs);
           
@@ -125,10 +125,10 @@
         // | contract |          1 | contract_id   |            1 | contract_id | A         |           6 |     NULL | NULL   |         |
         // | contract |          1 | contract_id   |            2 | user_id     | A         |           6 |     NULL | NULL   |         |
         // +----------+------------+---------------+--------------+-------------+-----------+-------------+----------+--------+---------+
-        $q= &$this->conn->query('show keys from %c', $table);
+        $q= $this->conn->query('show keys from %c', $table);
         while ($record= $q->next()) {
           if ($record['Key_name'] != $key) {
-            $index= &$t->addIndex(new DBIndex(
+            $index= $t->addIndex(new DBIndex(
               $record['Key_name'],
               array()
             ));
Index: ../../../skeleton/rdbms/mysql/MySQLResultSet.class.php
===================================================================
--- ../../../skeleton/rdbms/mysql/MySQLResultSet.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/mysql/MySQLResultSet.class.php	(working copy)
@@ -83,7 +83,7 @@
               
           case 'datetime':
           case 'date':          
-            $row[$key]= &Date::fromString($row[$key]);
+            $row[$key]= Date::fromString($row[$key]);
             break;
             
           case 'int':
Index: ../../../skeleton/rdbms/util/DBXmlGenerator.class.php
===================================================================
--- ../../../skeleton/rdbms/util/DBXmlGenerator.class.php	(revision 8952)
+++ ../../../skeleton/rdbms/util/DBXmlGenerator.class.php	(working copy)
@@ -39,7 +39,7 @@
      * @param   string database
      * @return  &rdbms.util.DBXmlGenerator object
      */    
-    public static function &createFromTable(&$table, $dbhost, $database) {
+    public static function createFromTable($table, $dbhost, $database) {
       if (!is('DBTable', $table)) {
         throw(new IllegalArgumentException('Argument table is not a DBTable object'));
       }
@@ -48,14 +48,14 @@
       $g->doc->root->setAttribute('created_at', date('r'));
       $g->doc->root->setAttribute('created_by', System::getProperty('user.name'));
       
-      $t= &$g->doc->root->addChild(new Node('table', NULL, array(
+      $t= $g->doc->root->addChild(new Node('table', NULL, array(
         'name'     => $table->name,
         'dbhost'   => $dbhost,
         'database' => $database
       )));
       
       // Attributes
-      if ($attr= &$table->getFirstAttribute()) do {
+      if ($attr= $table->getFirstAttribute()) do {
         $t->addChild(new Node('attribute', NULL, array(
           'name'     => trim($attr->getName()),
           'type'     => $attr->getTypeString(),
@@ -63,11 +63,11 @@
           'typename' => $attr->typeName(),
           'nullable' => $attr->isNullable() ? 'true' : 'false',
         )));
-      } while ($attr= &$table->getNextAttribute());
+      } while ($attr= $table->getNextAttribute());
 
       // Attributes
-      if ($index= &$table->getFirstIndex()) do {
-        $n= &$t->addChild(new Node('index', NULL, array(
+      if ($index= $table->getFirstIndex()) do {
+        $n= $t->addChild(new Node('index', NULL, array(
           'name'    => trim($index->getName()),
           'unique'  => $index->isUnique() ? 'true' : 'false',
           'primary' => $index->isPrimaryKey() ? 'true' : 'false',
@@ -75,7 +75,7 @@
         foreach ($index->getKeys() as $key) {
           $n->addChild(new Node('key', $key));
         }
-      } while ($index= &$table->getNextIndex());
+      } while ($index= $table->getNextIndex());
       
       return $g;
     }
Index: ../../../skeleton/scriptlet/xml/XMLScriptletResponse.class.php
===================================================================
--- ../../../skeleton/scriptlet/xml/XMLScriptletResponse.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/xml/XMLScriptletResponse.class.php	(working copy)
@@ -41,7 +41,7 @@
      * @param   xml.XSLProcessor processor
      */
     public function __construct($processor= NULL) {
-      $this->processor= &$processor;
+      $this->processor= $processor;
       $this->document= new OutputDocument();
     }
 
@@ -51,8 +51,8 @@
      * @access  public
      * @param   &xml.IXSLProcessor processor
      */
-    public function setProcessor(&$processor) {
-      $this->processor= &$processor;
+    public function setProcessor($processor) {
+      $this->processor= $processor;
     }
 
     /**
@@ -61,7 +61,7 @@
      * @access  public
      * @return  &xml.IXSLProcessor processor
      */
-    public function &getProcessor() {
+    public function getProcessor() {
       return $this->processor;
     }
 
@@ -131,14 +131,14 @@
      * @param   string name name
      * @param   &mixed val
      */
-    public function addFormValue($name, &$val) {
+    public function addFormValue($name, $val) {
       if (!is_array($val)) $val= array($val);
 
       foreach (array_keys($val) as $k) {
         if (is_array($val[$k])) {
-          $c= &Node::fromArray($val[$k], 'param');
+          $c= Node::fromArray($val[$k], 'param');
         } else if (is_object($val[$k])) {
-          $c= &Node::fromObject($val[$k], 'param');
+          $c= Node::fromObject($val[$k], 'param');
         } else {
           $c= new Node('param', $val[$k]);
         }
@@ -167,9 +167,9 @@
      */
     public function addFormError($checker, $type, $field= '*', $info= NULL) {
       if (is_array($info)) {
-        $c= &Node::fromArray($info, 'error');
+        $c= Node::fromArray($info, 'error');
       } else if (is_object($info)) {
-        $c= &Node::fromObject($info, 'error');
+        $c= Node::fromObject($info, 'error');
       } else {
         $c= new Node('error', $info);
       }
@@ -193,7 +193,7 @@
      * @return  &xml.Node added node
      * @throws  lang.IllegalArgumentException
      */
-    public function &addFormResult(&$node) {
+    public function addFormResult($node) {
       if (
         ('formerrors' == $node->name) ||
         ('formvalues' == $node->name)
@@ -317,7 +317,7 @@
         throw(new HttpScriptletException($e->getMessage(), HTTP_INTERNAL_SERVER_ERROR));
       }
       
-      $this->content= &$this->processor->output();
+      $this->content= $this->processor->output();
       
       return TRUE;
     }
Index: ../../../skeleton/scriptlet/xml/XMLScriptlet.class.php
===================================================================
--- ../../../skeleton/scriptlet/xml/XMLScriptlet.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/xml/XMLScriptlet.class.php	(working copy)
@@ -58,7 +58,7 @@
      * @param   string base default ''
      */
     public function __construct($base= '') {
-      $this->processor= &$this->_processor();
+      $this->processor= $this->_processor();
       $this->processor->setBase($base);
     }
     
@@ -68,7 +68,7 @@
      * @access  protected
      * @return  &xml.XSLProcessor
      */
-    public function &_processor() {
+    public function _processor() {
       return new XSLProcessor();
     }
     
@@ -79,7 +79,7 @@
      * @return  &scriptlet.xml.XMLScriptletResponse
      * @see     xp://scriptlet.HttpScriptlet#_response
      */
-    public function &_response() {
+    public function _response() {
       $response= new XMLScriptletResponse();
       $response->setProcessor($this->processor);
       return $response;
@@ -92,7 +92,7 @@
      * @return  &scriptlet.xml.XMLScriptletRequest
      * @see     xp://scriptlet.HttpScriptlet#_request
      */
-    public function &_request() {
+    public function _request() {
       return new XMLScriptletRequest();
     }
     
@@ -106,7 +106,7 @@
      * @return  string class method (one of doGet, doPost, doHead)
      * @see     xp://scriptlet.xml.XMLScriptlet#_handleMethod
      */
-    public function handleMethod(&$request) {
+    public function handleMethod($request) {
       if (!$request->getEnvValue('PRODUCT')) {
         return 'doCreate';
       }
@@ -123,8 +123,8 @@
      * @param   string sessionId default NULL
      * @return  bool
      */
-    public function doRedirect(&$request, &$response, $sessionId= NULL) {
-      $uri= &$request->getURL();
+    public function doRedirect($request, $response, $sessionId= NULL) {
+      $uri= $request->getURL();
 
       // Get product, language and statename from the environment if 
       // necessary. Their default values are "site" (product), 
@@ -166,7 +166,7 @@
      * @param   &scriptlet.xml.XMLScriptletResponse response
      * @return  bool
      */
-    public function doCreate(&$request, &$response) {
+    public function doCreate($request, $response) {
       return $this->doRedirect($request, $response);
     }
 
@@ -178,7 +178,7 @@
      * @param   &scriptlet.HttpScriptletRequest request 
      * @param   &scriptlet.HttpScriptletResponse response 
      */
-    public function doCreateSession(&$request, &$response) {
+    public function doCreateSession($request, $response) {
       return $this->doRedirect($request, $response, $request->session->getId());
     }
 
@@ -189,7 +189,7 @@
      * @param   &scriptlet.scriptlet.XMLScriptletRequest request
      * @param   &scriptlet.scriptlet.XMLScriptletResponse response
      */
-    public function _setStylesheet(&$request, &$response) {
+    public function _setStylesheet($request, $response) {
       $response->setStylesheet(sprintf(
         '%s/%s/%s.xsl',
         $request->getProduct(),
@@ -205,7 +205,7 @@
      * @param   &scriptlet.xml.XMLScriptletRequest request 
      * @param   &scriptlet.xml.XMLScriptletResponse response 
      */
-    public function processRequest(&$request, &$response) {
+    public function processRequest($request, $response) {
 
       // Define special parameters
       $response->setParam('state',   $request->getStateName());
@@ -240,7 +240,7 @@
      * @throws  lang.Exception to indicate failure
      * @see     xp://scriptlet.HttpScriptlet#doGet
      */
-    public function doGet(&$request, &$response) {
+    public function doGet($request, $response) {
       return $this->processRequest($request, $response);
     }
     
@@ -254,7 +254,7 @@
      * @throws  lang.Exception to indicate failure
      * @see     xp://scriptlet.HttpScriptlet#doPost
      */
-    public function doPost(&$request, &$response) {
+    public function doPost($request, $response) {
       return $this->processRequest($request, $response);
     }
   }
Index: ../../../skeleton/scriptlet/xml/portlet/Portlet.class.php
===================================================================
--- ../../../skeleton/scriptlet/xml/portlet/Portlet.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/xml/portlet/Portlet.class.php	(working copy)
@@ -40,7 +40,7 @@
      * @access  public
      * @param   &util.Properties properties
      */
-    public function init(&$properties);
+    public function init($properties);
     
     /**
      * Set an attribut by name
@@ -50,7 +50,7 @@
      * @param   &mixed value
      * @param   &scriptlet.xml.portlet.RunData rundata
      */
-    public function setAttribute($name, &$value, &$rundata);
+    public function setAttribute($name, $value, $rundata);
 
     /**
      * Get an attribute by name. Returns default value if the specified 
@@ -62,7 +62,7 @@
      * @param   &scriptlet.xml.portlet.RunData rundata
      * @return  &mixed
      */
-    public function &getAttribute($name, $default, &$rundata);
+    public function getAttribute($name, $default, $rundata);
     
     /**
      * Retrieve portlet content as Node object
@@ -71,7 +71,7 @@
      * @param   &scriptlet.xml.portlet.RunData rundata
      * @return  &xml.Node
      */
-    public function &getContent(&$rundata);
+    public function getContent($rundata);
 
     /**
      * Retrieve whether this portlet provides customization mechanisms
Index: ../../../skeleton/scriptlet/xml/portlet/PortletContainer.class.php
===================================================================
--- ../../../skeleton/scriptlet/xml/portlet/PortletContainer.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/xml/portlet/PortletContainer.class.php	(working copy)
@@ -23,16 +23,16 @@
      * @param   string layout
      * @return  &xml.portlet.Portlet
      */
-    public function &addPortlet($classname, $layout= NULL) {
+    public function addPortlet($classname, $layout= NULL) {
       try {
-        $class= &XPClass::forName($classname);
+        $class= XPClass::forName($classname);
       } catch (ClassNotFoundException $e) {
         throw($e);
       }
       
-      with ($portlet= &$class->newInstance()); {
+      with ($portlet= $class->newInstance()); {
         $portlet->setLayout($layout);
-        $this->portlets[]= &$portlet;
+        $this->portlets[]= $portlet;
       }      
       return $portlet;
     }
@@ -45,21 +45,21 @@
      * @param   &scriptlet.xml.XMLScriptletResponse response 
      * @param   &scriptlet.xml.Context context
      */
-    public function process(&$request, &$response, &$context) {
+    public function process($request, $response, $context) {
       $rundata= new Rundata();
-      $rundata->request= &$request;
-      $rundata->context= &$context;
+      $rundata->request= $request;
+      $rundata->context= $context;
 
-      $node= &$response->addFormResult(new Node('portlets'));
+      $node= $response->addFormResult(new Node('portlets'));
 
       for ($i= 0, $s= sizeof($this->portlets); $i < $s; $i++) {
-        $portlet= &$node->addChild(new Node('portlet', NULL, array(
+        $portlet= $node->addChild(new Node('portlet', NULL, array(
           'class'   => $this->portlets[$i]->getClassName(),
           'layout' =>  $this->portlets[$i]->getLayout()
         )));
         
         try {
-          $content= &$this->portlets[$i]->getContent($rundata);
+          $content= $this->portlets[$i]->getContent($rundata);
         } catch (Throwable $e) {
           $response->addFormError($e->getClassName(), '*', $e->getMessage());
           return;
Index: ../../../skeleton/scriptlet/xml/portlet/AbstractPortlet.class.php
===================================================================
--- ../../../skeleton/scriptlet/xml/portlet/AbstractPortlet.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/xml/portlet/AbstractPortlet.class.php	(working copy)
@@ -74,8 +74,8 @@
      * @access  public
      * @param   &util.Properties properties
      */
-    public function init(&$properties) { 
-      $this->properties= &$properties;
+    public function init($properties) { 
+      $this->properties= $properties;
     }
     
     /**
@@ -86,8 +86,8 @@
      * @param   &mixed value
      * @param   &scriptlet.xml.portlet.RunData rundata
      */
-    public function setAttribute($name, &$value, &$rundata) {
-      $this->attributes[$name]= &$value;
+    public function setAttribute($name, $value, $rundata) {
+      $this->attributes[$name]= $value;
     }
 
     /**
@@ -100,7 +100,7 @@
      * @param   &scriptlet.xml.portlet.RunData rundata
      * @return  &mixed
      */
-    public function &getAttribute($name, $default, &$rundata) {
+    public function getAttribute($name, $default, $rundata) {
       if (!array_key_exists($name, $this->attributes)) return $default;
 
       return $this->attributes[$name];
@@ -114,7 +114,7 @@
      * @param   &scriptlet.xml.portlet.RunData rundata
      * @return  &xml.Node
      */
-    public function &getContent(&$rundata) { }
+    public function getContent($rundata) { }
 
     /**
      * Retrieve whether this portlet provides customization mechanisms.
Index: ../../../skeleton/scriptlet/xml/OutputDocument.class.php
===================================================================
--- ../../../skeleton/scriptlet/xml/OutputDocument.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/xml/OutputDocument.class.php	(working copy)
@@ -60,9 +60,9 @@
         'xmlns:xsd' => 'http://www.w3.org/2001/XMLSchema', 
         'xmlns:xsi' => 'http://www.w3.org/2001/XMLSchema-instance'
       ));
-      $this->root= &$this->formresult;
-      $this->formvalues= &$this->formresult->addChild(new Node('formvalues'));
-      $this->formerrors= &$this->formresult->addChild(new Node('formerrors'));
+      $this->root= $this->formresult;
+      $this->formvalues= $this->formresult->addChild(new Node('formvalues'));
+      $this->formerrors= $this->formresult->addChild(new Node('formerrors'));
     }
 
   }
Index: ../../../skeleton/scriptlet/xml/workflow/FileData.class.php
===================================================================
--- ../../../skeleton/scriptlet/xml/workflow/FileData.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/xml/workflow/FileData.class.php	(working copy)
@@ -37,8 +37,8 @@
      * @access  public
      * @param   &io.File file
      */
-    public function setFile(&$file) {
-      $this->file= &$file;
+    public function setFile($file) {
+      $this->file= $file;
     }
 
     /**
@@ -47,7 +47,7 @@
      * @access  public
      * @return  &io.File
      */
-    public function &getFile() {
+    public function getFile() {
       return $this->file;
     }
 
Index: ../../../skeleton/scriptlet/xml/workflow/casters/ToEmailAddress.class.php
===================================================================
--- ../../../skeleton/scriptlet/xml/workflow/casters/ToEmailAddress.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/xml/workflow/casters/ToEmailAddress.class.php	(working copy)
@@ -25,12 +25,12 @@
       $return= array();
       foreach ($value as $k => $v) {
         try {
-          $addr= &InternetAddress::fromString($v);
+          $addr= InternetAddress::fromString($v);
         } catch (FormatException $e) {
           return $e->getMessage();
         }
         
-        $return[$k]= &$addr;
+        $return[$k]= $addr;
       }
 
       return $return;
Index: ../../../skeleton/scriptlet/xml/workflow/casters/ToDate.class.php
===================================================================
--- ../../../skeleton/scriptlet/xml/workflow/casters/ToDate.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/xml/workflow/casters/ToDate.class.php	(working copy)
@@ -25,12 +25,12 @@
       $return= array();
       foreach ($value as $k => $v) {
         try {
-          $date= &DateParser::parse($v);
+          $date= DateParser::parse($v);
         } catch (FormatException $e) {
           return $e->getMessage();
         }
         
-        $return[$k]= &$date;
+        $return[$k]= $date;
       }
 
       return $return;
Index: ../../../skeleton/scriptlet/xml/workflow/checkers/DateRangeChecker.class.php
===================================================================
--- ../../../skeleton/scriptlet/xml/workflow/checkers/DateRangeChecker.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/xml/workflow/checkers/DateRangeChecker.class.php	(working copy)
@@ -42,8 +42,8 @@
      * @param   string max
      */
     public function __construct($min, $max) {
-      $this->minValue= &$this->parseDate($min, TRUE);
-      $this->maxValue= &$this->parseDate($max, FALSE);
+      $this->minValue= $this->parseDate($min, TRUE);
+      $this->maxValue= $this->parseDate($max, FALSE);
     }
     
     /**
@@ -54,18 +54,18 @@
      * @param   bool lower whether this is the lower boundary
      * @return  &util.Date
      */
-    public function &parseDate($input, $lower) {
+    public function parseDate($input, $lower) {
       switch ($input) {
         case '__NOW__': 
           if ($lower) {
-            $r= &DateUtil::getMidnight(new Date('now'));
+            $r= DateUtil::getMidnight(new Date('now'));
           } else {
-            $r= &DateUtil::getMidnight(new Date('tomorrow'));
+            $r= DateUtil::getMidnight(new Date('tomorrow'));
           }
           break;
 
         case '__FUTURE__': 
-          $r= &Date::now(); 
+          $r= Date::now(); 
           break;
 
         case '__UNLIMITED__': 
@@ -73,7 +73,7 @@
           break;
         
         default:
-          $r= &DateParser::parse($input);
+          $r= DateParser::parse($input);
       }
       
       return $r;
Index: ../../../skeleton/scriptlet/xml/workflow/WorkflowScriptletRequest.class.php
===================================================================
--- ../../../skeleton/scriptlet/xml/workflow/WorkflowScriptletRequest.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/xml/workflow/WorkflowScriptletRequest.class.php	(working copy)
@@ -38,13 +38,13 @@
       if ($this->stateName) {
         $name= implode('', array_map('ucfirst', array_reverse(explode('/', $this->stateName))));
         try {
-          $class= &XPClass::forName($this->package.'.'.('state.'.$name.'State'));
+          $class= XPClass::forName($this->package.'.'.('state.'.$name.'State'));
         } catch (ClassNotFoundException $e) {
-          $this->state= &xp::null();
+          $this->state= xp::null();
           throw($e);
         }
 
-        $this->state= &$class->newInstance();
+        $this->state= $class->newInstance();
       }
     }
   }
Index: ../../../skeleton/scriptlet/xml/workflow/Handler.class.php
===================================================================
--- ../../../skeleton/scriptlet/xml/workflow/Handler.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/xml/workflow/Handler.class.php	(working copy)
@@ -68,8 +68,8 @@
      * @access  public
      * @param   &scriptlet.xml.workflow.Wrapper wrapper
      */
-    public function setWrapper(&$wrapper) {
-      $this->wrapper= &$wrapper;
+    public function setWrapper($wrapper) {
+      $this->wrapper= $wrapper;
     }
 
     /**
@@ -78,7 +78,7 @@
      * @access  public
      * @return  &scriptlet.xml.workflow.Wrapper
      */
-    public function &getWrapper() {
+    public function getWrapper() {
       return $this->wrapper;
     }
 
@@ -183,7 +183,7 @@
      * @param   &scriptlet.xml.Context context
      * @return  string
      */
-    public function identifierFor(&$request, &$context) {
+    public function identifierFor($request, $context) {
       return $this->name;
     }
 
@@ -220,7 +220,7 @@
      * @param   &scriptlet.xml.Context context
      * @return  bool
      */
-    public function isActive(&$request, &$context) {
+    public function isActive($request, $context) {
       return ($request->getParam('__handler') == $this->identifier);
     }
 
@@ -235,7 +235,7 @@
      * @param   &scriptlet.xml.Context context
      * @return  bool
      */
-    public function setup(&$request, &$context) { 
+    public function setup($request, $context) { 
       return TRUE;
     }
 
@@ -247,7 +247,7 @@
      * @param   &scriptlet.xml.Context context
      * @return  bool
      */
-    public function needsData(&$request, &$context) {
+    public function needsData($request, $context) {
       return TRUE;
     }  
 
@@ -258,7 +258,7 @@
      * @param   &scriptlet.xml.workflow.WorkflowScriptletRequest request 
      * @param   &scriptlet.xml.Context context
      */
-    public function handleErrorCondition(&$request, &$context) {
+    public function handleErrorCondition($request, $context) {
       return FALSE;
     }
 
@@ -269,7 +269,7 @@
      * @param   &scriptlet.xml.workflow.WorkflowScriptletRequest request 
      * @param   &scriptlet.xml.Context context
      */
-    public function handleSubmittedData(&$request, &$context) {
+    public function handleSubmittedData($request, $context) {
       return FALSE;
     }
     
@@ -281,6 +281,6 @@
      * @param   &scriptlet.xml.XMLScriptletResponse response 
      * @param   &scriptlet.xml.Context context
      */
-    public function finalize(&$request, &$response, &$context) { }
+    public function finalize($request, $response, $context) { }
   }
 ?>
Index: ../../../skeleton/scriptlet/xml/workflow/AbstractXMLScriptlet.class.php
===================================================================
--- ../../../skeleton/scriptlet/xml/workflow/AbstractXMLScriptlet.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/xml/workflow/AbstractXMLScriptlet.class.php	(working copy)
@@ -36,7 +36,7 @@
      * @access  protected
      * @return  &scriptlet.xml.workflow.WorkflowScriptletRequest
      */
-    public function &_request() {
+    public function _request() {
       return new WorkflowScriptletRequest($this->package);
     }
     
@@ -48,7 +48,7 @@
      * @return  &lang.XPClass
      * @throws  lang.ClassNotFoundException
      */
-    public function &getContextClass(&$request) {
+    public function getContextClass($request) {
       return XPClass::forName($this->package.'.'.(ucfirst($request->getProduct()).'Context'));
     }
 
@@ -59,7 +59,7 @@
      * @param   &scriptlet.xml.workflow.WorkflowScriptletRequest request
      * @return  bool
      */
-    public function needsSession(&$request) {
+    public function needsSession($request) {
       return ($request->state && (
         $request->state->hasHandlers() || 
         $request->state->requiresAuthentication()
@@ -74,7 +74,7 @@
      * @param   &scriptlet.xml.workflow.WorkflowScriptletRequest request
      * @return  bool
      */
-    public function wantsContext(&$request) {
+    public function wantsContext($request) {
       return FALSE;
     }
     
@@ -90,7 +90,7 @@
      * @param   &scriptlet.xml.XMLScriptletResponse response 
      * @return  bool
      */
-    public function processWorkflow(&$request, &$response) {
+    public function processWorkflow($request, $response) {
 
       // Context initialization
       $context= NULL;
@@ -99,7 +99,7 @@
         // Set up context. The context contains - so to say - the "autoglobals",
         // in other words, the omnipresent data such as the user
         try {
-          $class= &$this->getContextClass($request);;
+          $class= $this->getContextClass($request);;
         } catch (ClassNotFoundException $e) {
           throw(new HttpScriptletException($e->getMessage()));
           return FALSE;
@@ -108,8 +108,8 @@
         // Get context from session. If it is not available there, set up the 
         // context and store it to the session.
         $cidx= $class->getName();
-        if (!($context= &$request->session->getValue($cidx))) {
-          $context= &$class->newInstance();
+        if (!($context= $request->session->getValue($cidx))) {
+          $context= $class->newInstance();
 
           try {
             $context->setup($request);
@@ -176,7 +176,7 @@
      * @param   &scriptlet.xml.XMLScriptletRequest request 
      * @param   &scriptlet.xml.XMLScriptletResponse response 
      */
-    public function processRequest(&$request, &$response) {
+    public function processRequest($request, $response) {
       if (FALSE === $this->processWorkflow($request, $response)) {
       
         // The processWorkflow() method indicates no further processing
Index: ../../../skeleton/scriptlet/xml/workflow/Wrapper.class.php
===================================================================
--- ../../../skeleton/scriptlet/xml/workflow/Wrapper.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/xml/workflow/Wrapper.class.php	(working copy)
@@ -37,7 +37,7 @@
      * @param   &scriptlet.xml.workflow.Handler handler
      * @param   &scriptlet.xml.workflow.Context context
      */
-    public function setup(&$request, &$handler, &$context) {
+    public function setup($request, $handler, $context) {
       foreach ($this->paraminfo as $name => $definitions) {
         
         // Pre-fill form value if a default is defined and the request
@@ -52,7 +52,7 @@
         // values. "Pass-behind" means this value is retrieved from the 
         // session (where it has been registered to during this call)
         // rather than from the request data (GET / POST / COOKIE).
-        if ($definitions['occurrence'] & OCCURRENCE_PASSBEHIND) {
+        if ($definitions['occurrence']  OCCURRENCE_PASSBEHIND) {
           $handler->setValue($name, $request->params[$name]);
         }
       } 
@@ -65,20 +65,20 @@
      * @param   array defines
      * @return  &lang.Object
      */
-    public function &checkerInstanceFor($defines) {
+    public function checkerInstanceFor($defines) {
       static $class= array();
 
       if (!$defines) return NULL;
 
       $name= array_shift($defines);
       try {
-        if (!isset($class[$name])) $class[$name]= &XPClass::forName($name);
+        if (!isset($class[$name])) $class[$name]= XPClass::forName($name);
       } catch (ClassNotFoundException $e) {
         unset($class[$name]);
         return NULL;
       }
 
-      return call_user_func_array(array(&$class[$name], 'newInstance'), $defines);
+      return call_user_func_array(array($class[$name], 'newInstance'), $defines);
     }
     
     /**
@@ -198,12 +198,12 @@
      * @param   &scriptlet.xml.workflow.WorkflowScriptletRequest request 
      * @param   &scriptlet.xml.workflow.Handler handler
      */
-    public function load(&$request, &$handler) { 
+    public function load($request, $handler) { 
       foreach ($this->paraminfo as $name => $definitions) {
 
         // Retrieve the parameter's value from the request (or from the
         // handler's values, if it is passed behind the scenes).
-        if ($definitions[PARAM_OCCURRENCE] & OCCURRENCE_PASSBEHIND) {
+        if ($definitions[PARAM_OCCURRENCE]  OCCURRENCE_PASSBEHIND) {
           $value= (array)$handler->getValue($name, '');
         } else {
           $value= (array)$request->getParam($name, '');
@@ -224,7 +224,7 @@
         // first element will be copied to the values hash, thus making 
         // accessibility easy.
         if (0 == strlen($value[key($value)])) {
-          if (!($definitions[PARAM_OCCURRENCE] & OCCURRENCE_OPTIONAL)) {
+          if (!($definitions[PARAM_OCCURRENCE]  OCCURRENCE_OPTIONAL)) {
             $handler->addError('missing', $name);
             continue;
           }
@@ -240,7 +240,7 @@
           //
           // Pre- and postchecks return an error code or NULL if they are content
           if ($definitions[PARAM_PRECHECK]) {
-            if (NULL !== ($code= call_user_func(array(&$definitions[PARAM_PRECHECK], 'check'), $value))) {
+            if (NULL !== ($code= call_user_func(array($definitions[PARAM_PRECHECK], 'check'), $value))) {
               $handler->addError($definitions[PARAM_PRECHECK]->getClassName().'.'.$code, $name);
               continue;
             }
@@ -251,7 +251,7 @@
           // type indicates an error and will be used as informational data
           // for the form error (an exception message, for instance).
           if ($definitions[PARAM_CASTER]) {
-            if (!is_array($value= call_user_func(array(&$definitions[PARAM_CASTER], 'castValue'), $value))) {
+            if (!is_array($value= call_user_func(array($definitions[PARAM_CASTER], 'castValue'), $value))) {
               $handler->addError($definitions[PARAM_CASTER]->getClassName().'.invalidcast', $name, $value);
               continue;
             }
@@ -260,7 +260,7 @@
           // Now, run the postcheck. The postcheck receives the already casted
           // values.
           if ($definitions[PARAM_POSTCHECK]) {
-            if (NULL !== ($code= call_user_func(array(&$definitions[PARAM_POSTCHECK], 'check'), $value))) {
+            if (NULL !== ($code= call_user_func(array($definitions[PARAM_POSTCHECK], 'check'), $value))) {
               $handler->addError($definitions[PARAM_POSTCHECK]->getClassName().'.'.$code, $name);
               continue;
             }
@@ -269,7 +269,7 @@
         
         // If we get here, the parameter is validated. Copy the value into
         // the values hash which is publicly accessible.
-        if ($definitions[PARAM_OCCURRENCE] & OCCURRENCE_MULTIPLE) {
+        if ($definitions[PARAM_OCCURRENCE]  OCCURRENCE_MULTIPLE) {
           $this->values[$name]= $value;
         } else if (isset($value[key($value)])) {
           $this->values[$name]= $value[key($value)];
Index: ../../../skeleton/scriptlet/xml/workflow/AbstractState.class.php
===================================================================
--- ../../../skeleton/scriptlet/xml/workflow/AbstractState.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/xml/workflow/AbstractState.class.php	(working copy)
@@ -28,8 +28,8 @@
      * @param   &scriptlet.xml.workflow.Handler handler
      * @return  &scriptlet.xml.workflow.Handler the added handler
      */
-    public function &addHandler(&$handler) {
-      $this->handlers[]= &$handler;
+    public function addHandler($handler) {
+      $this->handlers[]= $handler;
       return $handler;
     }
     
@@ -53,7 +53,7 @@
      * @param   &xml.Node node the node to add the handler representation to
      * @param   &scriptlet.xml.workflow.WorkflowScriptletRequest request 
      */
-    public function addHandlerToFormresult(&$handler, &$node, &$request) {
+    public function addHandlerToFormresult($handler, $node, $request) {
       $node->addChild(Node::fromArray($handler->values[HVAL_PERSISTENT], 'values'));
       foreach (array_keys($handler->values[HVAL_FORMPARAM]) as $key) {
 
@@ -68,9 +68,9 @@
       // Add wrapper parameter representation if the handler has a wrapper
       // and this wrapper implements the IFormResultAggregate interface
       if ($handler->hasWrapper() && is('IFormResultAggregate', $handler->wrapper)) {
-        $wrapper= &$node->addChild(new Node('wrapper'));
+        $wrapper= $node->addChild(new Node('wrapper'));
         foreach (array_keys($handler->wrapper->paraminfo) as $name) {
-          $param= &$wrapper->addChild(new Node('param', NULL, array(
+          $param= $wrapper->addChild(new Node('param', NULL, array(
             'name'       => $name,
             'type'       => $handler->wrapper->paraminfo[$name]['type'],
             'occurrence' => $handler->wrapper->paraminfo[$name]['occurrence'],
@@ -95,10 +95,10 @@
      * @param   &scriptlet.xml.XMLScriptletResponse response 
      * @param   &scriptlet.xml.workflow.Context context
      */
-    public function setup(&$request, &$response, &$context) {
+    public function setup($request, $response, $context) {
       $this->cat && $this->cat->debug($this->getClassName().'::setup');
       
-      with ($h= &$response->addFormResult(new Node('handlers'))); {
+      with ($h= $response->addFormResult(new Node('handlers'))); {
         for ($i= 0, $s= sizeof($this->handlers); $i < $s; $i++) {
           with ($name= $this->handlers[$i]->getName()); {
             $this->handlers[$i]->identifier= sprintf(
@@ -106,7 +106,7 @@
               $request->getStateName(),
               $this->handlers[$i]->identifierFor($request, $context)
             );
-            $node= &$h->addChild(new Node('handler', NULL, array(
+            $node= $h->addChild(new Node('handler', NULL, array(
               'id'   => $this->handlers[$i]->identifier,
               'name' => $name
             )));
@@ -225,7 +225,7 @@
      * @param   &scriptlet.xml.XMLScriptletResponse response 
      * @param   &scriptlet.xml.Context context
      */
-    public function process(&$request, &$response, &$context) {
+    public function process($request, $response, $context) {
     }
     
     /**
@@ -246,8 +246,8 @@
      * @param   &util.log.LogCategory cat
      * @see     xp://util.log.Traceable
      */
-    public function setTrace(&$cat) { 
-      $this->cat= &$cat;
+    public function setTrace($cat) { 
+      $this->cat= $cat;
     }
 
   } 
Index: ../../../skeleton/scriptlet/xml/workflow/Context.class.php
===================================================================
--- ../../../skeleton/scriptlet/xml/workflow/Context.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/xml/workflow/Context.class.php	(working copy)
@@ -43,7 +43,7 @@
      * @throws  lang.IllegalStateException to indicate an error
      * @throws  lang.IllegalAccessException to indicate an error
      */
-    public function setup(&$request) { }
+    public function setup($request) { }
 
     /**
      * Process the context.
@@ -55,7 +55,7 @@
      * @throws  lang.IllegalStateException to indicate an error
      * @throws  lang.IllegalAccessException to indicate an error
      */
-    public function process(&$request) { }
+    public function process($request) { }
     
     /**
      * Sleep function. Returns an array of the names of those member 
@@ -79,6 +79,6 @@
      * @access  public
      * @param   &scriptlet.xml.XMLScriptletResponse response
      */
-    public function insertStatus(&$response) { }
+    public function insertStatus($response) { }
   }
 ?>
Index: ../../../skeleton/scriptlet/HttpScriptletResponse.class.php
===================================================================
--- ../../../skeleton/scriptlet/HttpScriptletResponse.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/HttpScriptletResponse.class.php	(working copy)
@@ -109,7 +109,7 @@
      * @access  public
      * @param   &scriptlet.Cookie cookie
      */
-    public function setCookie(&$cookie) {
+    public function setCookie($cookie) {
       $this->headers[]= 'Set-Cookie: '.$cookie->getHeaderValue();
     }
     
Index: ../../../skeleton/scriptlet/HttpScriptletException.class.php
===================================================================
--- ../../../skeleton/scriptlet/HttpScriptletException.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/HttpScriptletException.class.php	(working copy)
@@ -44,7 +44,7 @@
      * @access  public
      * @return  &scriptlet.HttpScriptletResponse response object
      */
-    public function &getResponse() {
+    public function getResponse() {
       return $this->response;
     }
 
Index: ../../../skeleton/scriptlet/HttpScriptlet.class.php
===================================================================
--- ../../../skeleton/scriptlet/HttpScriptlet.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/HttpScriptlet.class.php	(working copy)
@@ -70,7 +70,7 @@
      * @access  protected
      * @return  &scriptlet.HttpScriptletRequest
      */
-    public function &_request() {
+    public function _request() {
       return new HttpScriptletRequest();
     }
     
@@ -81,7 +81,7 @@
      * @access  protected
      * @return  &scriptlet.HttpSession
      */
-    public function &_session() {
+    public function _session() {
       return new HttpSession();
     }
     
@@ -92,7 +92,7 @@
      * @access  protected
      * @return  &scriptlet.HttpScriptletResponse
      */
-    public function &_response() {
+    public function _response() {
       return new HttpScriptletResponse();
     }
     
@@ -102,7 +102,7 @@
      * @access  protected
      * @param   &scriptlet.HttpScriptletRequest request
      */
-    public function handleSessionInitialization(&$request) {
+    public function handleSessionInitialization($request) {
       $request->session->initialize($request->getSessionId());
     }
 
@@ -118,7 +118,7 @@
      * @param   &scriptlet.HttpScriptletResponse response 
      * @return  bool continue
      */
-    public function handleInvalidSession(&$request, &$response) {
+    public function handleInvalidSession($request, $response) {
       return $request->session->initialize(NULL);
     }
 
@@ -135,7 +135,7 @@
      * @param   &scriptlet.HttpScriptletResponse response 
      * @return  bool continue
      */
-    public function handleSessionInitializationError(&$request, &$response) {
+    public function handleSessionInitializationError($request, $response) {
       return FALSE;
     }
     
@@ -147,7 +147,7 @@
      * @param   &scriptlet.HttpScriptletRequest request
      * @return  bool
      */
-    public function needsSession(&$request) {
+    public function needsSession($request) {
       return FALSE;
     }
     
@@ -166,7 +166,7 @@
      * @param   &scriptlet.HttpScriptletRequest request
      * @return  string class method (one of doGet, doPost, doHead)
      */
-    public function handleMethod(&$request) {
+    public function handleMethod($request) {
       switch ($request->method) {
         case HTTP_POST:
           $request->setData($GLOBALS['HTTP_RAW_POST_DATA']);
@@ -222,7 +222,7 @@
      * @param   &scriptlet.HttpScriptletResponse response 
      * @throws  lang.Exception to indicate failure
      */
-    public function doGet(&$request, &$response) {
+    public function doGet($request, $response) {
     }
     
     /**
@@ -235,7 +235,7 @@
      * @param   &scriptlet.HttpScriptletResponse response 
      * @throws  lang.Exception to indicate failure
      */
-    public function doPost(&$request, &$response) {
+    public function doPost($request, $response) {
     }
     
     /**
@@ -258,7 +258,7 @@
      * @param   &scriptlet.HttpScriptletResponse response 
      * @throws  lang.Exception to indicate failure
      */
-    public function doHead(&$request, &$response) {
+    public function doHead($request, $response) {
     }
     
     /**
@@ -287,8 +287,8 @@
      * @param   &scriptlet.HttpScriptletResponse response 
      * @throws  lang.Exception to indicate failure
      */
-    public function doCreateSession(&$request, &$response) {
-      $uri= &$request->getURL();
+    public function doCreateSession($request, $response) {
+      $uri= $request->getURL();
       $response->sendRedirect(sprintf(
         $this->sessionURIFormat,
         $uri->getScheme(),
@@ -329,7 +329,7 @@
      * @access  protected
      * @param   &scriptlet.HttpRequest request
      */
-    public function _setupRequest(&$request) {
+    public function _setupRequest($request) {
       $request->headers= array_change_key_case(getallheaders(), CASE_LOWER);
       $request->method= getenv('REQUEST_METHOD');
       $request->setParams(array_change_key_case($_REQUEST, CASE_LOWER));
@@ -349,8 +349,8 @@
      * @return  &scriptlet.HttpScriptletResponse the response object
      * @throws  scriptlet.HttpScriptletException indicating fatal errors
      */
-    public function &process() {
-      $request= &$this->_request();
+    public function process() {
+      $request= $this->_request();
       $this->_setupRequest($request);
 
       // Check if this method can be handled. In case it can't, throw a
@@ -411,11 +411,11 @@
       // else than FALSE, the response processor. Exceptions thrown from any of
       // the two methods will result in a HttpScriptletException with the HTTP
       // status code 500 ("Internal Server Error") being thrown.
-      $response= &$this->_response();
+      $response= $this->_response();
       try {
         $r= call_user_func_array(
-          array(&$this, $method), 
-          array(&$request, &$response)
+          array($this, $method), 
+          array($request, $response)
         );
         
         if (FALSE !== $r && !is(NULL, $r)) {
Index: ../../../skeleton/scriptlet/rpc/AbstractRpcResponse.class.php
===================================================================
--- ../../../skeleton/scriptlet/rpc/AbstractRpcResponse.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/rpc/AbstractRpcResponse.class.php	(working copy)
@@ -35,7 +35,7 @@
      * @param   scriptlet.rpc.AbstractRpcMessage msg
      */
     public function setMessage($msg) {
-      $this->message= &$msg;
+      $this->message= $msg;
     }
     
     /**
@@ -44,8 +44,8 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setTrace(&$cat) {
-      $this->cat= &$cat;
+    public function setTrace($cat) {
+      $this->cat= $cat;
     }
   } 
 ?>
Index: ../../../skeleton/scriptlet/rpc/AbstractRpcRouter.class.php
===================================================================
--- ../../../skeleton/scriptlet/rpc/AbstractRpcRouter.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/rpc/AbstractRpcRouter.class.php	(working copy)
@@ -37,8 +37,8 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setTrace(&$cat) {
-      $this->cat= &$cat;
+    public function setTrace($cat) {
+      $this->cat= $cat;
     }
     
     /**
@@ -48,7 +48,7 @@
      * @access  protected
      * @return  &scriptlet.rpc.AbstractRpcRequest
      */
-    public function &_request() {}
+    public function _request() {}
 
     /**
      * Create a response object.
@@ -57,7 +57,7 @@
      * @access  protected
      * @return  &scriptlet.rpc.AbstractRpcResponse
      */
-    public function &_response() {}
+    public function _response() {}
 
     /**
      * Create a message object.
@@ -66,7 +66,7 @@
      * @access  protected
      * @return  &scriptlet.rpc.AbstractRpcMessage
      */
-    public function &_message() {}
+    public function _message() {}
 
     /**
      * Handle GET requests. XML-RPC requests are only sent via HTTP POST,
@@ -76,7 +76,7 @@
      * @param   &scriptlet.rpc.AbstractRpcRequest request
      * @param   &scriptlet.rpc.AbstractRpcResponse response
      */
-    public function doGet(&$request, &$response) {
+    public function doGet($request, $response) {
       throw(new IllegalAccessException('GET is not supported'));
     }
 
@@ -106,7 +106,7 @@
      * @param   &webservices.xmlrpc.rpc.XmlRpcRequest request
      * @param   &webservices.xmlrpc.rpc.XmlRpcResponse response
      */
-    public function doPost(&$request, &$response) {
+    public function doPost($request, $response) {
       $this->cat && $response->setTrace($this->cat);
       $this->cat && $request->setTrace($this->cat);
       
@@ -114,15 +114,15 @@
       try {
 
         // Get message
-        $msg= &$request->getMessage();
+        $msg= $request->getMessage();
         $msg->setEncoding($request->getEncoding());
 
         // Create answer
-        $answer= &$this->_message();
+        $answer= $this->_message();
         $answer->create($msg);
 
         // Call handler
-        $return= &$this->callReflectHandler($msg);
+        $return= $this->callReflectHandler($msg);
 
       } catch (ServiceException $e) {
       
@@ -163,7 +163,7 @@
      * @throws  lang.IllegalArgumentException if there is no such method
      * @throws  lang.IllegalAccessException for non-public methods
      */
-    public function &callReflectHandler(&$msg) {
+    public function callReflectHandler($msg) {
     
       // Check on valid params
       if (0 == strlen($msg->getMethod())) {
@@ -172,7 +172,7 @@
 
       // Create message from request data
       try {
-        $class= &XPClass::forName($this->package.'.'.ucfirst($msg->getHandlerClass()).'Handler');
+        $class= XPClass::forName($this->package.'.'.ucfirst($msg->getHandlerClass()).'Handler');
       } catch (ClassNotFoundException $e) {
         throw($e);
       }
@@ -184,7 +184,7 @@
         ));
       }
 
-      with ($method= &$class->getMethod($msg->getMethod())); {
+      with ($method= $class->getMethod($msg->getMethod())); {
 
         // Check if this method is a webmethod
         if (!$method->hasAnnotation('webmethod')) {
@@ -192,7 +192,7 @@
         }
         
         // Create instance and invoke method
-        $inst= &$class->newInstance();
+        $inst= $class->newInstance();
         if ($this->cat && is('util.log.Traceable', $inst)) $inst->setTrace($this->cat);
         return $method->invoke($inst, $msg->getData());
       }
Index: ../../../skeleton/scriptlet/rpc/GenericRpcRequest.class.php
===================================================================
--- ../../../skeleton/scriptlet/rpc/GenericRpcRequest.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/rpc/GenericRpcRequest.class.php	(working copy)
@@ -27,8 +27,8 @@
      * @access  public
      * @param   &mixed object
      */
-    public function setCallback(&$object) {
-      $this->_cb= &$object;
+    public function setCallback($object) {
+      $this->_cb= $object;
     }
     
     /**
@@ -37,7 +37,7 @@
      * @access  public
      * @return  &scriptlet.rpc.AbstractRpcMessage
      */
-    public function &getMessage() {
+    public function getMessage() {
       return $this->_cb->getMessage($this);
     }
     
Index: ../../../skeleton/scriptlet/rpc/AbstractRpcMessage.class.php
===================================================================
--- ../../../skeleton/scriptlet/rpc/AbstractRpcMessage.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/rpc/AbstractRpcMessage.class.php	(working copy)
@@ -21,7 +21,7 @@
      * @param   string string
      * @return  &scriptlet.rpc.AbstractRpcMessage
      */
-    public static function &fromString($string);
+    public static function fromString($string);
     
     /**
      * Create message
@@ -68,7 +68,7 @@
      * @access  public
      * @return  &lang.Object
      */
-    public function &getData();
+    public function getData();
     
     /**
      * Retrieve string representation of message as used in the
@@ -124,6 +124,6 @@
      * @access  public
      * @return  &scriptlet.rpc.RpcFault
      */
-    public function &getFault();        
+    public function getFault();        
   }
 ?>
Index: ../../../skeleton/scriptlet/rpc/RpcFaultException.class.php
===================================================================
--- ../../../skeleton/scriptlet/rpc/RpcFaultException.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/rpc/RpcFaultException.class.php	(working copy)
@@ -21,9 +21,9 @@
      * @access  public
      * @param   &scriptlet.rpc.RpcFault fault
      */
-    public function __construct(&$fault) {
+    public function __construct($fault) {
       parent::__construct($fault->faultString);
-      $this->fault= &$fault;
+      $this->fault= $fault;
     }
 
     /**
@@ -32,7 +32,7 @@
      * @access  public
      * @return  &scriptlet.rpc.RpcFault
      */
-    public function &getFault() {
+    public function getFault() {
       return $this->fault;
     }
 
Index: ../../../skeleton/scriptlet/rpc/GenericRpcResponse.class.php
===================================================================
--- ../../../skeleton/scriptlet/rpc/GenericRpcResponse.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/rpc/GenericRpcResponse.class.php	(working copy)
@@ -27,8 +27,8 @@
      * @access  public
      * @param   &mixed object
      */
-    public function setCallback(&$object) {
-      $this->_cb= &$object;
+    public function setCallback($object) {
+      $this->_cb= $object;
     }
   
     /**
Index: ../../../skeleton/scriptlet/rpc/AbstractRpcRequest.class.php
===================================================================
--- ../../../skeleton/scriptlet/rpc/AbstractRpcRequest.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/rpc/AbstractRpcRequest.class.php	(working copy)
@@ -22,8 +22,8 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setTrace(&$cat) {
-      $this->cat= &$cat;
+    public function setTrace($cat) {
+      $this->cat= $cat;
     }
   
     /**
@@ -33,7 +33,7 @@
      * @access  public
      * @return  &scriptlet.rpc.AbstractRpcMessage
      */
-    public function &getMessage() {
+    public function getMessage() {
       // Override this. You must set the 'class' and 'method' members of
       // the respective RpcMessage class.
     }
Index: ../../../skeleton/scriptlet/rpc/transport/GenericHttpTransport.class.php
===================================================================
--- ../../../skeleton/scriptlet/rpc/transport/GenericHttpTransport.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/rpc/transport/GenericHttpTransport.class.php	(working copy)
@@ -44,8 +44,8 @@
      * @access  public
      * @param   &lang.XPClass c
      */
-    public function setMessageClass(&$c) {
-      $this->messageClass= &$c;
+    public function setMessageClass($c) {
+      $this->messageClass= $c;
     }    
 
     /**
@@ -55,7 +55,7 @@
      * @param   &scriptlet.rpc.AbstractRpcMessage message
      * @return  &scriptlet.HttpScriptletResponse
      */
-    public function &send(&$message) {
+    public function send($message) {
       
       if (!is('scriptlet.rpc.AbstractRpcMessage', $message)) throw(new IllegalArgumentException(
         'parameter "message" must be a scriptlet.rpc.AbstractRpcMessage'
@@ -72,7 +72,7 @@
       
       try {
         $this->cat && $this->cat->debug('>>>', $this->_conn->request->getRequestString());
-        $res= &$this->_conn->request->send($this->_conn->getTimeout());
+        $res= $this->_conn->request->send($this->_conn->getTimeout());
       } catch (IOException $e) {
         throw ($e);
       }
@@ -87,7 +87,7 @@
      * @param   &scriptlet.HttpScriptletResponse response
      * @return  &scriptlet.rpc.AbstractRpcMessage
      */
-    public function &retrieve(&$response) {
+    public function retrieve($response) {
       $this->cat && $this->cat->debug('<<<', $response->toString());
       
       try {
@@ -104,8 +104,8 @@
             while ($buf= $response->readData()) $xml.= $buf;
 
             $this->cat && $this->cat->debug('<<<', $xml);
-            $m= &$this->messageClass->getMethod('fromString');
-            $answer= &$m->invoke(NULL, array($xml));
+            $m= $this->messageClass->getMethod('fromString');
+            $answer= $m->invoke(NULL, array($xml));
             if ($answer) {
 
               // Check encoding
Index: ../../../skeleton/scriptlet/LocaleNegotiator.class.php
===================================================================
--- ../../../skeleton/scriptlet/LocaleNegotiator.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/LocaleNegotiator.class.php	(working copy)
@@ -81,7 +81,7 @@
      * @param   string default default NULL
      * @return  &util.Locale
      */
-    public function &getLocale($supported, $default= NULL) {
+    public function getLocale($supported, $default= NULL) {
       $chosen= FALSE;
       foreach ($this->languages as $lang => $q) {
         if (
Index: ../../../skeleton/scriptlet/HttpScriptletRequest.class.php
===================================================================
--- ../../../skeleton/scriptlet/HttpScriptletRequest.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/HttpScriptletRequest.class.php	(working copy)
@@ -39,7 +39,7 @@
      * @access  public
      * @return  &scriptlet.HttpSession session object
      */
-    public function &getSession() {
+    public function getSession() {
       return $this->session;
     }
 
@@ -59,8 +59,8 @@
      * @access  public
      * @param   &scriptlet.HttpSession session
      */
-    public function setSession(&$s) {
-      $this->session= &$s;
+    public function setSession($s) {
+      $this->session= $s;
     }
 
     /**
@@ -116,7 +116,7 @@
      * @param   mixed default default NULL the default value if cookie is non-existant
      * @return  &peer.http.Cookie
      */
-    public function &getCookie($name, $default= NULL) {
+    public function getCookie($name, $default= NULL) {
       if (isset($_COOKIE[$name])) return new Cookie($name, $_COOKIE[$name]); else return $default;
     }
 
@@ -177,8 +177,8 @@
      * @access  public
      * @param   peer.URL uri a uri representated by peer.URL
      */
-    public function setURI(&$uri) {
-      $this->uri= &$uri;
+    public function setURI($uri) {
+      $this->uri= $uri;
     }
     
     /**
@@ -198,7 +198,7 @@
      * @access  public
      * @return  peer.URL
      */
-    public function &getURL() {
+    public function getURL() {
       return $this->uri;
     }
     
@@ -218,8 +218,8 @@
      * @access  public
      * @param   &array params
      */
-    public function setParams(&$params) {
-      $this->params= &$params;
+    public function setParams($params) {
+      $this->params= $params;
     }
 
     /**
@@ -239,8 +239,8 @@
      * @param   &string data
      * @see     xp://scriptlet.HttpScriptlet#_handleMethod
      */
-    public function setData(&$data) {
-      $this->data= &$data;
+    public function setData($data) {
+      $this->data= $data;
     }
     
     /**
@@ -254,7 +254,7 @@
      * @access  public
      * @return  &string data
      */
-    public function &getData() {
+    public function getData() {
       if (NULL === $this->data) {
         $fd= fopen('php://input', 'r');
         $this->data= '';
Index: ../../../skeleton/scriptlet/HttpSession.class.php
===================================================================
--- ../../../skeleton/scriptlet/HttpSession.class.php	(revision 8952)
+++ ../../../skeleton/scriptlet/HttpSession.class.php	(working copy)
@@ -162,7 +162,7 @@
      * @param   mixed& value Any data type
      * @throws  lang.IllegalStateException when session is invalid
      */
-    public function putValue($name, &$value) {
+    public function putValue($name, $value) {
       if (!$this->isValid()) throw(new IllegalStateException('Session is invalid'));
       $_SESSION[$name]= serialize($value);
     }
@@ -177,7 +177,7 @@
      * @return  &mixed value
      * @throws  lang.IllegalStateException when session is invalid
      */
-    public function &getValue($name, $default= NULL) {
+    public function getValue($name, $default= NULL) {
       if (!$this->isValid()) throw(new IllegalStateException('Session is invalid'));
       if (isset($_SESSION[$name])) return unserialize($_SESSION[$name]); else return $default;
     }
@@ -214,7 +214,7 @@
      * @return  &string[] names
      * @throws  lang.IllegalStateException when session is invalid
      */
-    public function &getValueNames() {
+    public function getValueNames() {
       if (!$this->isValid()) throw(new IllegalStateException('Session is invalid'));
       $names= array_keys($_SESSION);
       unset($names[array_search(SESS_CREATE, $names)]);
Index: ../../../skeleton/img/convert/PaletteConverter.class.php
===================================================================
--- ../../../skeleton/img/convert/PaletteConverter.class.php	(revision 8952)
+++ ../../../skeleton/img/convert/PaletteConverter.class.php	(working copy)
@@ -40,7 +40,7 @@
      * @return  bool
      * @throws  img.ImagingException
      */
-    public function convert(&$image) { 
+    public function convert($image) { 
       if (!imageistruecolor($image->handle)) return FALSE;
 
       return imagetruecolortopalette(
Index: ../../../skeleton/img/convert/ImageConverter.class.php
===================================================================
--- ../../../skeleton/img/convert/ImageConverter.class.php	(revision 8952)
+++ ../../../skeleton/img/convert/ImageConverter.class.php	(working copy)
@@ -22,6 +22,6 @@
      * @return  bool
      * @throws  img.ImagingException
      */
-    public function convert(&$image);
+    public function convert($image);
   }
 ?>
Index: ../../../skeleton/img/convert/MatchingPaletteConverter.class.php
===================================================================
--- ../../../skeleton/img/convert/MatchingPaletteConverter.class.php	(revision 8952)
+++ ../../../skeleton/img/convert/MatchingPaletteConverter.class.php	(working copy)
@@ -26,11 +26,11 @@
      * @return  bool
      * @throws  img.ImagingException
      */
-    public function convert(&$image) { 
+    public function convert($image) { 
       if (!imageistruecolor($image->handle)) return FALSE;
       
       try {
-        $tmp= &Image::create($image->getWidth(), $image->getHeight(), IMG_TRUECOLOR);
+        $tmp= Image::create($image->getWidth(), $image->getHeight(), IMG_TRUECOLOR);
         $tmp->copyFrom($image);
         imagetruecolortopalette(
           $image->handle, 
Index: ../../../skeleton/img/convert/GrayscaleConverter.class.php
===================================================================
--- ../../../skeleton/img/convert/GrayscaleConverter.class.php	(revision 8952)
+++ ../../../skeleton/img/convert/GrayscaleConverter.class.php	(working copy)
@@ -41,7 +41,7 @@
      * @return  bool
      * @throws  img.ImagingException
      */
-    public function convert(&$image) {
+    public function convert($image) {
     
       // Create temporary variable as local variable access is faster 
       // than member variable access.
@@ -56,9 +56,9 @@
             $rgb= imagecolorat($handle, $x, $y);
             if (!isset($l[$rgb])) {
               $g= (
-                .299 * (($rgb >> 16) & 0xFF) + 
-                .587 * (($rgb >> 8) & 0xFF) +
-                .114 * ($rgb & 0xFF)
+                .299 * (($rgb >> 16)  0xFF) + 
+                .587 * (($rgb >> 8)  0xFF) +
+                .114 * ($rgb  0xFF)
               );
               $l[$rgb]= imagecolorallocate($handle, $g, $g, $g);
             }
Index: ../../../skeleton/img/graph/PieSlice.class.php
===================================================================
--- ../../../skeleton/img/graph/PieSlice.class.php	(revision 8952)
+++ ../../../skeleton/img/graph/PieSlice.class.php	(working copy)
@@ -26,12 +26,12 @@
      * @param   &mixed colors either an array of two colors, the second
      *          representing the shadow, or one color, for both lid and shadow
      */
-    public function __construct($value, &$colors) {
+    public function __construct($value, $colors) {
       $this->value= $value;
       if (!is_array($colors)) {
         $this->colors= array($colors, $colors);
       } else {
-        $this->colors= &$colors;
+        $this->colors= $colors;
       }
     }
 
Index: ../../../skeleton/img/graph/PieChart.class.php
===================================================================
--- ../../../skeleton/img/graph/PieChart.class.php	(revision 8952)
+++ ../../../skeleton/img/graph/PieChart.class.php	(working copy)
@@ -45,8 +45,8 @@
      * @param   &img.graph.PieSlice a slice object
      * @return  &img.graph.PieSlice the slice object put in
      */
-    public function &add(&$slice) {
-      $this->slices[]= &$slice;
+    public function add($slice) {
+      $this->slices[]= $slice;
       return $slice;
     }
 
@@ -57,7 +57,7 @@
      * @param   &img.Image image
      * @return  mixed
      */
-    public function draw(&$image) {
+    public function draw($image) {
       $arc= new Arc(
         NULL,
         $image->getWidth() / 2, 
@@ -75,7 +75,7 @@
         $arc->s= 0;
 
         foreach (array_keys($this->slices) as $key) {
-          $arc->col= &$this->slices[$key]->colors[$i != $y];
+          $arc->col= $this->slices[$key]->colors[$i != $y];
           $arc->e= $arc->s+ $this->slices[$key]->value * 3.6;
 
           $offset= 2 * M_PI - deg2rad($arc->s + $this->slices[$key]->value * 1.8);
Index: ../../../skeleton/img/graph/Graph.class.php
===================================================================
--- ../../../skeleton/img/graph/Graph.class.php	(revision 8952)
+++ ../../../skeleton/img/graph/Graph.class.php	(working copy)
@@ -26,7 +26,7 @@
      * @return  &img.graph.Graph
      * @throws  img.ImagingException in case the image could not be created
      */
-    public static function &create($w, $h, $type= IMG_PALETTE) {
+    public static function create($w, $h, $type= IMG_PALETTE) {
       return parent::create($w, $h, $type, __CLASS__);
     }
   }
Index: ../../../skeleton/img/chart/renderer/GraphRenderer.class.php
===================================================================
--- ../../../skeleton/img/chart/renderer/GraphRenderer.class.php	(revision 8952)
+++ ../../../skeleton/img/chart/renderer/GraphRenderer.class.php	(working copy)
@@ -19,6 +19,6 @@
      * @param   &img.chart.Chart chart
      * @return  &mixed
      */
-    public function &render(&$chart);
+    public function render($chart);
   }
 ?>
Index: ../../../skeleton/img/chart/renderer/ImageRenderer.class.php
===================================================================
--- ../../../skeleton/img/chart/renderer/ImageRenderer.class.php	(revision 8952)
+++ ../../../skeleton/img/chart/renderer/ImageRenderer.class.php	(working copy)
@@ -38,7 +38,7 @@
      * @param  int font The font size
      * @return mixed[]
      */
-    public function _prepare(&$chart, $font) {
+    public function _prepare($chart, $font) {
       list($lower, $upper, $step)= $chart->getRange();
       RANGE_AUTO == $lower && $lower= $chart->min();
       RANGE_AUTO == $upper && $upper= $chart->max();
@@ -92,7 +92,7 @@
      * @param  string[] c The colors
      * @return &img.Color[]
      */
-    public function &_colors(&$img, $c) {
+    public function _colors($img, $c) {
       $colors= array();
       if (!is_array($c)) $c= array($c);
       foreach ($c as $color) $colors[]= $img->allocate($color);
@@ -107,7 +107,7 @@
      * @param  &img.Image img The image
      * @return &img.Image
      */
-    public function &_renderAxis($params, &$img) {
+    public function _renderAxis($params, $img) {
       $count= $params['count'];
       $distance= $params['distance'];
       $lower= $params['lower'];
@@ -221,7 +221,7 @@
      * @param  &img.Image img The image
      * @return &img.Image
      */
-    public function _renderLegend($params, &$img) {
+    public function _renderLegend($params, $img) {
       $labels= $params['labels'];
       $font= $params['font'];
       $fontw= $params['fontWidth'];
@@ -290,7 +290,7 @@
      * @param   img.chart.BarChart bc
      * @return  &img.Image
      */
-    public function &renderBarChart(&$bc) {
+    public function renderBarChart($bc) {
  
       // Create local variables for faster access
       list(
@@ -315,7 +315,7 @@
       }
 
       // Create image
-      with ($img= &Image::create($this->width, $this->height)); {
+      with ($img= Image::create($this->width, $this->height)); {
         $colors= $this->_colors($img, $bc->getColor('sample'));
         $this->_renderAxis(array(
           'count'           => $count,
@@ -416,7 +416,7 @@
      * @param   img.chart.LineChart bc
      * @return  &img.Image
      */
-    public function &renderLineChart($lc) {
+    public function renderLineChart($lc) {
  
       // Create local variables for faster access
       list(
@@ -440,7 +440,7 @@
       }
 
       // Create image
-      with ($img= &Image::create($this->width, $this->height)); {
+      with ($img= Image::create($this->width, $this->height)); {
         $colors= $this->_colors($img, $lc->getColor('sample'));
         $this->_renderAxis(array(
           'count'           => $count,
@@ -543,7 +543,7 @@
      * @param   img.chart.PieChart bc
      * @return  &img.Image
      */
-    public function &renderPieChart($pc) {
+    public function renderPieChart($pc) {
  
       // Create local variables for faster access
       $border= 50;
@@ -558,7 +558,7 @@
       $fonth= imagefontheight($font);
 
       // Create image
-      with ($img= &Image::create($this->width, $this->height)); {
+      with ($img= Image::create($this->width, $this->height)); {
         $colors= $this->_colors($img, $pc->getColor('sample'));
         $axisColor= $img->allocate($pc->getColor('axis'));
 
@@ -619,7 +619,7 @@
      * @return  &img.Image
      * @throws  lang.IllegalArgumentException if chart is not renderable
      */
-    public function &render(&$chart) { 
+    public function render($chart) { 
     
       // Method overloading by delegation
       if (!is('Chart', $chart) || !method_exists($this, $method= 'render'.get_class($chart))) {
Index: ../../../skeleton/img/chart/Chart.class.php
===================================================================
--- ../../../skeleton/img/chart/Chart.class.php	(revision 8952)
+++ ../../../skeleton/img/chart/Chart.class.php	(working copy)
@@ -58,8 +58,8 @@
      * @param   &img.graph.Series series
      * @return  &img.graph.Series
      */
-    public function &add(&$series) {
-      $this->series[]= &$series;
+    public function add($series) {
+      $this->series[]= $series;
       return $series;
     }
     
@@ -69,7 +69,7 @@
      * @access  public
      * @param   &img.Color color
      */
-    public function setBackgroundColor(&$color) {
+    public function setBackgroundColor($color) {
       $this->setColor('background', $color);
     }
     
@@ -80,8 +80,8 @@
      * @param   string key
      * @param   &img.Color color
      */
-    public function setColor($key, &$color) {
-      $this->colors[$key]= &$color;
+    public function setColor($key, $color) {
+      $this->colors[$key]= $color;
     }
     
     /**
@@ -91,7 +91,7 @@
      * @param   string key
      * @return  &img.Color
      */
-    public function &getColor($key) {
+    public function getColor($key) {
       if (!isset($this->colors[$key])) return new Color($this->theme[$key]);
       return $this->colors[$key];
     }
Index: ../../../skeleton/img/shapes/Arc.class.php
===================================================================
--- ../../../skeleton/img/shapes/Arc.class.php	(revision 8952)
+++ ../../../skeleton/img/shapes/Arc.class.php	(working copy)
@@ -47,8 +47,8 @@
      *          IMG_ARC_NOFILL
      *          IMG_ARC_EDGED
      */ 
-    public function __construct(&$col, $cx, $cy, $w, $h, $s= 0, $e= 360, $fill= FALSE) {
-      $this->col= &$col;
+    public function __construct($col, $cx, $cy, $w, $h, $s= 0, $e= 360, $fill= FALSE) {
+      $this->col= $col;
       $this->cx= $cx;
       $this->cy= $cy;
       $this->w= $w;
@@ -65,7 +65,7 @@
      * @param   &img.Image image
      * @return  mixed
      */
-    public function draw(&$image) {
+    public function draw($image) {
       if (FALSE !== $this->fill) return imagefilledarc(
         $image->handle,
         $this->cx,
Index: ../../../skeleton/img/shapes/Polygon.class.php
===================================================================
--- ../../../skeleton/img/shapes/Polygon.class.php	(revision 8952)
+++ ../../../skeleton/img/shapes/Polygon.class.php	(working copy)
@@ -46,8 +46,8 @@
      * @param   int[] points
      * @param   bool fill default FALSE
      */ 
-    public function __construct(&$col, $points, $fill= FALSE) {
-      $this->col= &$col;
+    public function __construct($col, $points, $fill= FALSE) {
+      $this->col= $col;
       $this->points= $points;
       $this->fill= $fill;
       
@@ -60,7 +60,7 @@
      * @param   &img.Image image
      * @return  mixed
      */
-    public function draw(&$image) {
+    public function draw($image) {
       if ($this->fill) return imagefilledpolygon(
         $image->handle,
         $this->points,
Index: ../../../skeleton/img/shapes/Line.class.php
===================================================================
--- ../../../skeleton/img/shapes/Line.class.php	(revision 8952)
+++ ../../../skeleton/img/shapes/Line.class.php	(working copy)
@@ -37,8 +37,8 @@
      * @param   int x2 x coordinate of ending point
      * @param   int y2 y coordinate of ending point
      */ 
-    public function __construct(&$col, $x1, $y1, $x2, $y2) {
-      $this->col= &$col;
+    public function __construct($col, $x1, $y1, $x2, $y2) {
+      $this->col= $col;
       $this->x1= $x1;
       $this->y1= $y1;
       $this->x2= $x2;
@@ -53,7 +53,7 @@
      * @param   &img.Image image
      * @return  mixed
      */
-    public function draw(&$image) {
+    public function draw($image) {
       return imageline(
         $image->handle,
         $this->x1,
Index: ../../../skeleton/img/shapes/Arc3D.class.php
===================================================================
--- ../../../skeleton/img/shapes/Arc3D.class.php	(revision 8952)
+++ ../../../skeleton/img/shapes/Arc3D.class.php	(working copy)
@@ -43,8 +43,8 @@
      *          IMG_ARC_EDGED
      * @param   int shadow default 10 
      */ 
-    public function __construct(&$colors, $cx, $cy, $w, $h, $s= 0, $e= 360, $fill= IMG_ARC_PIE, $shadow= 10) {
-      $this->colors= &$colors;
+    public function __construct($colors, $cx, $cy, $w, $h, $s= 0, $e= 360, $fill= IMG_ARC_PIE, $shadow= 10) {
+      $this->colors= $colors;
       $this->shadow= $shadow;
       parent::__construct($colors[0], $cx, $cy, $w, $h, $s, $e, $fill);
     }
@@ -56,15 +56,15 @@
      * @param   &img.Image image
      * @return  mixed
      */
-    public function draw(&$image) {
-      $this->col= &$this->colors[1];
+    public function draw($image) {
+      $this->col= $this->colors[1];
       $cy= $this->cy;
       for ($i= 1; $i < $this->shadow; $i++) {
         $this->cy= $cy+ $i;
         parent::draw($image);
       }
       $this->cy= $cy;
-      $this->col= &$this->colors[0];
+      $this->col= $this->colors[0];
       parent::draw($image);
     }
 
Index: ../../../skeleton/img/shapes/Text.class.php
===================================================================
--- ../../../skeleton/img/shapes/Text.class.php	(revision 8952)
+++ ../../../skeleton/img/shapes/Text.class.php	(working copy)
@@ -28,9 +28,9 @@
      * @param   int x
      * @param   int y
      */ 
-    public function __construct(&$col, &$font, $text, $x, $y) {
-      $this->col= &$col;
-      $this->font= &$font;
+    public function __construct($col, $font, $text, $x, $y) {
+      $this->col= $col;
+      $this->font= $font;
       $this->text= $text;
       $this->x= $x;
       $this->y= $y;
@@ -43,7 +43,7 @@
      * @param   &img.Image image
      * @return  mixed
      */
-    public function draw(&$image) {
+    public function draw($image) {
       return $this->font->drawtext(
         $image->handle, 
         $this->col, 
Index: ../../../skeleton/img/shapes/Rectangle.class.php
===================================================================
--- ../../../skeleton/img/shapes/Rectangle.class.php	(revision 8952)
+++ ../../../skeleton/img/shapes/Rectangle.class.php	(working copy)
@@ -38,8 +38,8 @@
      * @param   int y2 y coordinate of bottom right corner
      * @param   bool fill default FALSE
      */ 
-    public function __construct(&$col, $x1, $y1, $x2, $y2, $fill= FALSE) {
-      $this->col= &$col;
+    public function __construct($col, $x1, $y1, $x2, $y2, $fill= FALSE) {
+      $this->col= $col;
       $this->x1= $x1;
       $this->y1= $y1;
       $this->x2= $x2;
@@ -55,7 +55,7 @@
      * @param   &img.Image image
      * @return  mixed
      */
-    public function draw(&$image) {
+    public function draw($image) {
       if ($this->fill) return imagefilledrectangle(
         $image->handle,
         $this->x1,
Index: ../../../skeleton/img/filter/SharpenFilter.class.php
===================================================================
--- ../../../skeleton/img/filter/SharpenFilter.class.php	(revision 8952)
+++ ../../../skeleton/img/filter/SharpenFilter.class.php	(working copy)
@@ -21,7 +21,7 @@
      * @return  bool
      * @throws  img.ImagingException
      */
-    public function applyOn(&$image) {
+    public function applyOn($image) {
       $clone= clone $image;
 
       // Create local variables for faster access
@@ -34,8 +34,8 @@
         $rgb_y0= imagecolorat($chandle, 0, $y);
         
         $rd= ($rgb_y0 >> 0x10);
-        $gd= ($rgb_y0 >> 0x08 & 0xFF);
-        $bd= ($rgb_y0 & 0xFF);
+        $gd= ($rgb_y0 >> 0x08  0xFF);
+        $bd= ($rgb_y0  0xFF);
 
         for ($yd= $y - 1, $yi= $y + 1, $x= 1; $x < $w; ++$x) {
           $rgb_xy= imagecolorat($chandle, $x, $y);
@@ -44,12 +44,12 @@
           $rgb_xyd= imagecolorat($chandle, $x, $yd);
           
           $nr= -(($rgb_xyd >> 0x10) + ($rgb_xyi >> 0x10) + $rd + ($rgb_xiy >> 0x10)) / 4;
-          $ng= -(($rgb_xyd >> 0x08 & 0xFF) + ($rgb_xyi >> 0x08 & 0xFF) + $gd + ($rgb_xiy >> 0x08 & 0xFF)) / 4;
-          $nb= -(($rgb_xyd & 0xFF) + ($rgb_xyi & 0xFF) + $bd + ($rgb_xiy & 0xFF)) / 4;
+          $ng= -(($rgb_xyd >> 0x08  0xFF) + ($rgb_xyi >> 0x08  0xFF) + $gd + ($rgb_xiy >> 0x08  0xFF)) / 4;
+          $nb= -(($rgb_xyd  0xFF) + ($rgb_xyi  0xFF) + $bd + ($rgb_xiy  0xFF)) / 4;
 
           $nr+= 2 * ($rd= ($rgb_xy >> 0x10));
-          $ng+= 2 * ($gd= ($rgb_xy >> 0x08 & 0xFF));
-          $nb+= 2 * ($bd= ($rgb_xy & 0xFF));
+          $ng+= 2 * ($gd= ($rgb_xy >> 0x08  0xFF));
+          $nb+= 2 * ($bd= ($rgb_xy  0xFF));
 
           // Normalize          
           $nr= ($nr > 255.0) ? 255.0 : ($nr < 0.0 ? 0.0 : $nr);
Index: ../../../skeleton/img/filter/ImageFilter.class.php
===================================================================
--- ../../../skeleton/img/filter/ImageFilter.class.php	(revision 8952)
+++ ../../../skeleton/img/filter/ImageFilter.class.php	(working copy)
@@ -22,6 +22,6 @@
      * @return  bool
      * @throws  img.ImagingException
      */
-    public function applyOn(&$image);
+    public function applyOn($image);
   }
 ?>
Index: ../../../skeleton/img/filter/ConvolveFilter.class.php
===================================================================
--- ../../../skeleton/img/filter/ConvolveFilter.class.php	(revision 8952)
+++ ../../../skeleton/img/filter/ConvolveFilter.class.php	(working copy)
@@ -27,8 +27,8 @@
      * @param   float divisor
      * @param   float offset
      */
-    public function __construct(&$kernel, $divisor, $offset) {
-      $this->kernel= &$kernel;
+    public function __construct($kernel, $divisor, $offset) {
+      $this->kernel= $kernel;
       $this->divisor= $divisor;
       $this->offset= $offset;
     }
@@ -41,7 +41,7 @@
      * @return  bool
      * @throws  img.ImagingException
      */
-    public function applyOn(&$image) { 
+    public function applyOn($image) { 
       $clone= clone $image;
 
       // Create local variables for faster access
@@ -71,9 +71,9 @@
               $rgb= imagecolorat($chandle, $xv, $yv);
 
               $m= $matrix[$j][$i];
-              $nr+= (($rgb >> 16) & 0xFF) * $m;
-              $ng+= (($rgb >> 8) & 0xFF) * $m;
-              $nb+= ($rgb & 0xFF) * $m;
+              $nr+= (($rgb >> 16)  0xFF) * $m;
+              $ng+= (($rgb >> 8)  0xFF) * $m;
+              $nb+= ($rgb  0xFF) * $m;
             }
           }
           
Index: ../../../skeleton/img/io/GD2StreamWriter.class.php
===================================================================
--- ../../../skeleton/img/io/GD2StreamWriter.class.php	(revision 8952)
+++ ../../../skeleton/img/io/GD2StreamWriter.class.php	(working copy)
@@ -26,7 +26,7 @@
      * @param   &io.Stream stream
      * @param   int format default IMG_GD2_RAW one of the IMG_GD2_* constants
      */
-    public function __construct(&$stream, $format= IMG_GD2_RAW) {
+    public function __construct($stream, $format= IMG_GD2_RAW) {
       parent::__construct($stream);
       $this->format= $format;
     }
Index: ../../../skeleton/img/io/StreamWriter.class.php
===================================================================
--- ../../../skeleton/img/io/StreamWriter.class.php	(revision 8952)
+++ ../../../skeleton/img/io/StreamWriter.class.php	(working copy)
@@ -24,8 +24,8 @@
      * @access  public
      * @param   &io.Stream stream
      */
-    public function __construct(&$stream) {
-      $this->stream= &deref($stream);
+    public function __construct($stream) {
+      $this->stream= deref($stream);
     }
 
     /**
@@ -62,7 +62,7 @@
         
         // Use output buffering with a callback method to capture the 
         // image(gd|jpeg|png|...) functions' output.
-        ob_start(array(&$this, 'writeToStream'));
+        ob_start(array($this, 'writeToStream'));
         $r= $this->output($handle);
         ob_end_clean();
         
Index: ../../../skeleton/img/io/JpegStreamWriter.class.php
===================================================================
--- ../../../skeleton/img/io/JpegStreamWriter.class.php	(revision 8952)
+++ ../../../skeleton/img/io/JpegStreamWriter.class.php	(working copy)
@@ -25,7 +25,7 @@
      * @param   &io.Stream stream
      * @param   int quality default 75
      */
-    public function __construct(&$stream, $quality= 75) {
+    public function __construct($stream, $quality= 75) {
       parent::__construct($stream);
       $this->quality= $quality;
     }
Index: ../../../skeleton/img/io/XbmStreamWriter.class.php
===================================================================
--- ../../../skeleton/img/io/XbmStreamWriter.class.php	(revision 8952)
+++ ../../../skeleton/img/io/XbmStreamWriter.class.php	(working copy)
@@ -25,7 +25,7 @@
      * @param   &io.Stream stream
      * @param   int foreground default 0
      */
-    public function __construct(&$stream, $foreground= 0) {
+    public function __construct($stream, $foreground= 0) {
       parent::__construct($stream);
       $this->foreground= $foreground;
     }
Index: ../../../skeleton/img/io/WBmpStreamWriter.class.php
===================================================================
--- ../../../skeleton/img/io/WBmpStreamWriter.class.php	(revision 8952)
+++ ../../../skeleton/img/io/WBmpStreamWriter.class.php	(working copy)
@@ -25,7 +25,7 @@
      * @param   &io.Stream stream
      * @param   int foreground default 0
      */
-    public function __construct(&$stream, $foreground= 0) {
+    public function __construct($stream, $foreground= 0) {
       parent::__construct($stream);
       $this->foreground= $foreground;
     }
Index: ../../../skeleton/img/io/GifStreamWriter.class.php
===================================================================
--- ../../../skeleton/img/io/GifStreamWriter.class.php	(revision 8952)
+++ ../../../skeleton/img/io/GifStreamWriter.class.php	(working copy)
@@ -28,7 +28,7 @@
      * @param   bool dither default FALSE indicates if the image should be dithered
      * @param   int ncolors default 256 maximum # of colors retained in the palette
      */
-    public function __construct(&$stream, $dither= FALSE, $ncolors= 256) {
+    public function __construct($stream, $dither= FALSE, $ncolors= 256) {
       parent::__construct($stream);
       $this->dither= $dither;
       $this->ncolors= $ncolors;
Index: ../../../skeleton/img/io/StreamReader.class.php
===================================================================
--- ../../../skeleton/img/io/StreamReader.class.php	(revision 8952)
+++ ../../../skeleton/img/io/StreamReader.class.php	(working copy)
@@ -24,8 +24,8 @@
      * @access  public
      * @param   &io.Stream stream
      */
-    public function __construct(&$stream) {
-      $this->stream= &deref($stream);
+    public function __construct($stream) {
+      $this->stream= deref($stream);
     }
 
     /**
Index: ../../../skeleton/img/ImgStyle.class.php
===================================================================
--- ../../../skeleton/img/ImgStyle.class.php	(revision 8952)
+++ ../../../skeleton/img/ImgStyle.class.php	(working copy)
@@ -23,8 +23,8 @@
      * @access  public
      * @param   img.Color[] colors an array of pixels
      */
-    public function __construct(&$colors) {
-      $this->colors= &$colors;
+    public function __construct($colors) {
+      $this->colors= $colors;
       for ($i= 0, $s= sizeof($this->colors); $i < $s; $i++) {
         $this->pixels[]= $this->colors[$i]->handle;
       }
Index: ../../../skeleton/img/fonts/TrueTypeFont.class.php
===================================================================
--- ../../../skeleton/img/fonts/TrueTypeFont.class.php	(revision 8952)
+++ ../../../skeleton/img/fonts/TrueTypeFont.class.php	(working copy)
@@ -42,7 +42,7 @@
      * @param   int x
      * @param   int y
      */
-    public function drawtext(&$hdl, &$col, $text, $x, $y) {
+    public function drawtext($hdl, $col, $text, $x, $y) {
       return imagettftext(
         $hdl,
         $this->size,
Index: ../../../skeleton/img/fonts/BitmapFont.class.php
===================================================================
--- ../../../skeleton/img/fonts/BitmapFont.class.php	(revision 8952)
+++ ../../../skeleton/img/fonts/BitmapFont.class.php	(working copy)
@@ -35,7 +35,7 @@
      * @param   int x
      * @param   int y
      */
-    public function drawtext(&$hdl, &$col, $text, $x, $y) {
+    public function drawtext($hdl, $col, $text, $x, $y) {
       return imagestring(
         $hdl,
         $this->id,
Index: ../../../skeleton/img/ImgBrush.class.php
===================================================================
--- ../../../skeleton/img/ImgBrush.class.php	(revision 8952)
+++ ../../../skeleton/img/ImgBrush.class.php	(working copy)
@@ -24,9 +24,9 @@
      * @param   img.Image an image object
      * @param   img.ImgStyle a style object
      */
-    public function __construct(&$i, &$s) {
-      $this->image= &$i;
-      $this->style= &$s;
+    public function __construct($i, $s) {
+      $this->image= $i;
+      $this->style= $s;
       
     }
   }
Index: ../../../skeleton/img/Drawable.class.php
===================================================================
--- ../../../skeleton/img/Drawable.class.php	(revision 8952)
+++ ../../../skeleton/img/Drawable.class.php	(working copy)
@@ -19,7 +19,7 @@
      * @param   &img.Image image
      * @return  mixed
      */
-    public function draw(&$image);
+    public function draw($image);
   
   }
 ?>
Index: ../../../skeleton/img/Image.class.php
===================================================================
--- ../../../skeleton/img/Image.class.php	(revision 8952)
+++ ../../../skeleton/img/Image.class.php	(working copy)
@@ -86,7 +86,7 @@
      * @return  &img.Image
      * @throws  img.ImagingException in case the image could not be created
      */
-    public static function &create($w, $h, $type= IMG_PALETTE, $class= __CLASS__) {
+    public static function create($w, $h, $type= IMG_PALETTE, $class= __CLASS__) {
       switch ($type) {
         case IMG_PALETTE:
           $handle= imagecreate($w, $h);
@@ -114,7 +114,7 @@
      * @param   &img.io.ImageReader reader
      * @return  &img.Image
      */
-    public static function &loadFrom(&$reader) {
+    public static function loadFrom($reader) {
       return new Image($reader->getResource());
     }
 
@@ -124,7 +124,7 @@
      * @access  public
      * @param   &img.io.ImageWriter writer
      */
-    public function saveTo(&$writer) {
+    public function saveTo($writer) {
       $writer->setResource($this->handle);
     }
 
@@ -136,7 +136,7 @@
      * @return  bool
      * @throws  lang.IllegalArgumentException if converter is not a img.convert.ImageConverter
      */
-    public function convertTo(&$converter) {
+    public function convertTo($converter) {
       if (!is('img.convert.ImageConverter', $converter)) {
         throw(new IllegalArgumentException(
           'Given argument is not a img.convert.ImageConverter object ('.xp::typeOf($converter).')'
@@ -153,7 +153,7 @@
      * @return  bool
      * @throws  lang.IllegalArgumentException if filter is not a img.filter.ImageFilter
      */
-    public function apply(&$filter) {
+    public function apply($filter) {
       if (!is('img.filter.ImageFilter', $filter)) {
         throw(new IllegalArgumentException(
           'Given argument is not a img.filter.ImageFilter object ('.xp::typeOf($filter).')'
@@ -206,7 +206,7 @@
      * @return  bool
      */
     public function copyFrom(
-      &$img,
+      $img,
       $dst_x= 0,
       $dst_y= 0,
       $src_x= 0,
@@ -243,7 +243,7 @@
      * @return  bool
      */
     public function resizeFrom(
-      &$img,
+      $img,
       $dst_x= 0,
       $dst_y= 0,
       $src_x= 0,
@@ -284,7 +284,7 @@
      * @return  bool
      */
     public function resampleFrom(
-      &$img,
+      $img,
       $dst_x= 0,
       $dst_y= 0,
       $src_x= 0,
@@ -326,7 +326,7 @@
      * @return  bool
      */
     public function mergeFrom(
-      &$img,
+      $img,
       $pct= 50,
       $dst_x= 0,
       $dst_y= 0,
@@ -356,7 +356,7 @@
      * @param   int alpha default -1 alpha value (0= opaque - 127= transparent)
      * @return  &img.Color color the color put in
      */
-    public function &allocate(&$color, $alpha= -1) {
+    public function allocate($color, $alpha= -1) {
       if ($alpha > -1) {
         $color->handle= imagecolorallocatealpha(
           $this->handle,
@@ -373,7 +373,7 @@
           $color->blue
         );
       }
-      $this->palette[$color->handle]= &$color;
+      $this->palette[$color->handle]= $color;
       return $color;
     }
 
@@ -386,7 +386,7 @@
      * @return  &img.ImgStyle the new style object
      * @throws  lang.IllegalArgumentException if style is not an ImgStyle object
      */
-    public function &setStyle(&$style) {
+    public function setStyle($style) {
       if (!is('ImgStyle', $style)) {
         throw(new IllegalArgumentException('style parameter is not an ImgStyle object'));
       }
@@ -403,7 +403,7 @@
      * @return  &img.ImgBrush the new style object
      * @throws  lang.IllegalArgumentException if style is not an ImgBrush object
      */
-    public function &setBrush(&$brush) {
+    public function setBrush($brush) {
       if (!is('ImgBrush', $brush)) {
         throw(new IllegalArgumentException('brush parameter is not an ImgBrush object'));
       }
@@ -422,7 +422,7 @@
      * @param   int y
      * @return  &img.Color color object
      */
-    public function &colorAt($x, $y) {
+    public function colorAt($x, $y) {
       if (FALSE === ($idx= imagecolorat($this->handle, $x, $y))) return NULL;
 
       // See if we have this in our palette
@@ -469,7 +469,7 @@
      * @see     php://imagefill
      * @see     php://imagefilltoborder
      */
-    public function fill(&$col, $x= 0, $y= 0) {
+    public function fill($col, $x= 0, $y= 0) {
       if (is_array($col)) {
         imagefilltoborder($this->handle, $x, $y, $col[1]->handle, $col[0]->handle);
       } else {
@@ -502,7 +502,7 @@
      * @access  public
      * @param   &img.Color color
      */
-    public function setTransparency(&$col) {
+    public function setTransparency($col) {
       imagecolortransparent($this->handle, $col->handle);
     }
 
@@ -512,7 +512,7 @@
      * @access  public
      * @return  &img.Color color
      */
-    public function &getTransparency() {
+    public function getTransparency() {
       if (-1 == ($t= imagecolortransparent($this->handle))) return NULL;
       return $this->palette[$t];
     }
@@ -524,7 +524,7 @@
      * @param   img.Drawable obj
      * @return  mixed the return value of obj's draw function
      */
-    public function draw(&$drawable) {
+    public function draw($drawable) {
       return $drawable->draw($this);
     }
 
Index: ../../../skeleton/img/util/ExifData.class.php
===================================================================
--- ../../../skeleton/img/util/ExifData.class.php	(revision 8952)
+++ ../../../skeleton/img/util/ExifData.class.php	(working copy)
@@ -47,7 +47,7 @@
      * @return  &img.util.ExifData
      * @throws  img.ImagingException in case extracting data fails
      */
-    public static function &fromFile(&$file) {
+    public static function fromFile($file) {
       if (!($info= exif_read_data($file->getURI()))) {
         throw(new ImagingException(
           'Cannot get EXIF information from '.$file->getURI()
@@ -278,8 +278,8 @@
      * @access  public
      * @param   &util.Date dateTime
      */
-    public function setDateTime(&$dateTime) {
-      $this->dateTime= &$dateTime;
+    public function setDateTime($dateTime) {
+      $this->dateTime= $dateTime;
     }
 
     /**
@@ -288,7 +288,7 @@
      * @access  public
      * @return  &util.Date
      */
-    public function &getDateTime() {
+    public function getDateTime() {
       return $this->dateTime;
     }
     
@@ -575,7 +575,7 @@
      * @access  public
      * @return  &img.Image  
      */
-    public function &getThumbnail() {
+    public function getThumbnail() {
       $s= new Stream();
       $s->open(STREAM_MODE_WRITE);
       $s->write(exif_thumbnail($this->getFilename()));
Index: ../../../skeleton/img/util/IptcData.class.php
===================================================================
--- ../../../skeleton/img/util/IptcData.class.php	(revision 8952)
+++ ../../../skeleton/img/util/IptcData.class.php	(working copy)
@@ -50,7 +50,7 @@
      * @return  &img.util.IptcData
      * @throws  img.ImagingException in case extracting data fails
      */
-    public static function &fromFile(&$file) {
+    public static function fromFile($file) {
       getimagesize($file->getURI(), $info);
       if (!($info['APP13'])) {
         throw(new ImagingException(
Index: ../../../skeleton/img/util/ImageInfo.class.php
===================================================================
--- ../../../skeleton/img/util/ImageInfo.class.php	(revision 8952)
+++ ../../../skeleton/img/util/ImageInfo.class.php	(working copy)
@@ -31,7 +31,7 @@
      * @return  &img.util.ImageInfo
      * @throws  img.ImagingException in case extracting information from image file fails
      */
-    public static function &fromFile(&$file) {
+    public static function fromFile($file) {
       if (FALSE === ($data= getimagesize($file->getURI(), $segments))) {
         throw(new ImagingException(
           'Cannot load image information from '.$file->getURI()
Index: ../../../skeleton/util/Observer.class.php
===================================================================
--- ../../../skeleton/util/Observer.class.php	(revision 8952)
+++ ../../../skeleton/util/Observer.class.php	(working copy)
@@ -19,7 +19,7 @@
      * @param   &util.Observable obs
      * @param   mixed arg default NULL
      */
-    public function update(&$obs, $arg= NULL);
+    public function update($obs, $arg= NULL);
   
   }
 ?>
Index: ../../../skeleton/util/semaphore/SessionSemaphore.class.php
===================================================================
--- ../../../skeleton/util/semaphore/SessionSemaphore.class.php	(revision 8952)
+++ ../../../skeleton/util/semaphore/SessionSemaphore.class.php	(working copy)
@@ -39,7 +39,7 @@
      * @param   &scriptlet.HttpSession storage
      * @param   string name default 'semaphore'
      */
-    public function __construct(&$storage, $name= 'semaphore') {
+    public function __construct($storage, $name= 'semaphore') {
       if (!is('scriptlet.HttpSession', $storage))
         throw(new IllegalArgumentException('Given argument is not a HttpSession'));
       
Index: ../../../skeleton/util/semaphore/Semaphore.class.php
===================================================================
--- ../../../skeleton/util/semaphore/Semaphore.class.php	(revision 8952)
+++ ../../../skeleton/util/semaphore/Semaphore.class.php	(working copy)
@@ -21,8 +21,8 @@
      * @access  public
      * @param   string name default 'semaphore'
      */  
-    public function __construct(&$storage, $name= 'semaphore') {
-      $this->storage= &$storage;
+    public function __construct($storage, $name= 'semaphore') {
+      $this->storage= $storage;
       $this->name= $name;
     }
     
Index: ../../../skeleton/util/profiling/ClassProfiler.class.php
===================================================================
--- ../../../skeleton/util/profiling/ClassProfiler.class.php	(revision 8952)
+++ ../../../skeleton/util/profiling/ClassProfiler.class.php	(working copy)
@@ -35,7 +35,7 @@
      * @access  public
      * @param   &Object obj
      */    
-    public function attachProfilee(&$obj) {
+    public function attachProfilee($obj) {
       $this->_profilee= $obj;
     }
 
@@ -58,7 +58,7 @@
         $this->calls[$method]= 0;
       
       // Execute the function
-      $return= call_user_func_array (array (&$this->_profilee, $method), $params);
+      $return= call_user_func_array (array ($this->_profilee, $method), $params);
 
       $t->stop();
       $this->timer[$method]+= $t->elapsedTime();
@@ -79,7 +79,7 @@
       if (!isset ($this->_profilee->{$propname}))
         return FALSE;
         
-      $propvalue= &$this->_profilee->{$propname};
+      $propvalue= $this->_profilee->{$propname};
       return $propvalue;        
     }
     
Index: ../../../skeleton/util/Locale.class.php
===================================================================
--- ../../../skeleton/util/Locale.class.php	(revision 8952)
+++ ../../../skeleton/util/Locale.class.php	(working copy)
@@ -66,7 +66,7 @@
      * @access  public
      * @return  &util.Locale
      */
-    public static function &getDefault() {
+    public static function getDefault() {
       return new Locale(('C' == ($locale= setlocale(LC_ALL, NULL)) 
         ? 'en_US'
         : $locale
@@ -81,7 +81,7 @@
      * @param   &util.Locale locale
      * @throws  lang.IllegalArgumentException in case the locale is not available
      */
-    public static function setDefault(&$locale) {
+    public static function setDefault($locale) {
       if (FALSE === setlocale(LC_ALL, $locale->toString())) {
         throw(new IllegalArgumentException(sprintf(
           'Locale [lang=%s,country=%s,variant=%s] not available',
Index: ../../../skeleton/util/XPIterator.class.php
===================================================================
--- ../../../skeleton/util/XPIterator.class.php	(revision 8952)
+++ ../../../skeleton/util/XPIterator.class.php	(working copy)
@@ -30,6 +30,6 @@
      * @return  &mixed
      * @throws  util.NoSuchElementException when there are no more elements
      */
-    public function &next();
+    public function next();
   }
 ?>
Index: ../../../skeleton/util/AbstractDeferredInvokationHandler.class.php
===================================================================
--- ../../../skeleton/util/AbstractDeferredInvokationHandler.class.php	(revision 8952)
+++ ../../../skeleton/util/AbstractDeferredInvokationHandler.class.php	(working copy)
@@ -22,7 +22,7 @@
      * @access  protected
      * @return  &lang.Object
      */
-    public function &initialize() { }
+    public function initialize() { }
 
     /**
      * Processes a method invocation on a proxy instance and returns
@@ -35,16 +35,16 @@
      * @return  mixed
      * @throws  util.DeferredInitializationException
      */
-    public function invoke(&$proxy, $method, $args) {
+    public function invoke($proxy, $method, $args) {
       if (!isset($this->_instance)) {
         try {
-          $this->_instance= &$this->initialize();
+          $this->_instance= $this->initialize();
         } catch (Throwable $e) {
           $this->_instance= NULL;
           throw(new DeferredInitializationException($method, $e));
         }
       }
-      return call_user_func_array(array(&$this->_instance, $method), $args);
+      return call_user_func_array(array($this->_instance, $method), $args);
     }
     
   } 
Index: ../../../skeleton/util/Comparator.class.php
===================================================================
--- ../../../skeleton/util/Comparator.class.php	(revision 8952)
+++ ../../../skeleton/util/Comparator.class.php	(working copy)
@@ -23,6 +23,6 @@
      * @param   &mixed b
      * @return  int
      */
-    public function compare(&$a, &$b);
+    public function compare($a, $b);
   }
 ?>
Index: ../../../skeleton/util/Date.class.php
===================================================================
--- ../../../skeleton/util/Date.class.php	(revision 8952)
+++ ../../../skeleton/util/Date.class.php	(working copy)
@@ -348,7 +348,7 @@
      * @param   &util.Date cmp
      * @return  bool TRUE if dates are equal
      */
-    public function equals(&$cmp) {
+    public function equals($cmp) {
       return is('util.Date', $cmp) && ($this->getTime() === $cmp->getTime());
     }    
     
@@ -359,7 +359,7 @@
      * @access  public
      * @return  &util.Date
      */
-    public static function &now() {
+    public static function now() {
       $d= new Date(NULL);
       return $d;
     }
@@ -378,7 +378,7 @@
      * @param   string str
      * @return  &util.Date
      */
-    public static function &fromString($str) {
+    public static function fromString($str) {
       $d= new Date($str);
       return $d;
     }
@@ -402,7 +402,7 @@
      * @param   &util.Date date A date object
      * @return  int equal: 0, date before $this: < 0, date after $this: > 0
      */
-    public function compareTo(&$date) {
+    public function compareTo($date) {
       return $date->getTime()- $this->getTime();
     }
     
@@ -413,7 +413,7 @@
      * @param   &util.Date date
      * @return  bool
      */
-    public function isBefore(&$date) {
+    public function isBefore($date) {
       return $this->getTime() < $date->getTime();
     }
 
@@ -424,7 +424,7 @@
      * @param   &util.Date date
      * @return  bool
      */
-    public function isAfter(&$date) {
+    public function isAfter($date) {
       return $this->getTime() > $date->getTime();
     }
     
Index: ../../../skeleton/util/telephony/TelephonyAddressParser.class.php
===================================================================
--- ../../../skeleton/util/telephony/TelephonyAddressParser.class.php	(revision 8952)
+++ ../../../skeleton/util/telephony/TelephonyAddressParser.class.php	(working copy)
@@ -303,7 +303,7 @@
      * @throws  lang.FormatException if number is malformed
      * @throws  lang.IllegalStateException in case no default number has been set
      */
-    public function &parseNumber($number) {
+    public function parseNumber($number) {
       // Check current state
       if (
         NULL === $this->defaultCountryCode ||
Index: ../../../skeleton/util/telephony/TelephonyProvider.class.php
===================================================================
--- ../../../skeleton/util/telephony/TelephonyProvider.class.php	(revision 8952)
+++ ../../../skeleton/util/telephony/TelephonyProvider.class.php	(working copy)
@@ -69,12 +69,12 @@
      * @return  &util.log.LogCategory
      * @throws  lang.IllegalArgumentException in case a of a type mismatch
      */
-    public function &setTrace(&$cat) {
+    public function setTrace($cat) {
       if (NULL !== $cat && !is('LogCategory', $cat)) {
         throw(new IllegalArgumentException('Argument passed is not a LogCategory'));
       }
       
-      $this->cat= &$cat;
+      $this->cat= $cat;
     }
     
     /**
@@ -112,7 +112,7 @@
      * @param   string number
      * @return  &util.telephony.TelephonyAddress 
      */
-    public function &getAddress($number) { 
+    public function getAddress($number) { 
       return new TelephonyAddress($number);
     }
     
@@ -125,7 +125,7 @@
      * @param   &util.telephony.TelephonyAddress destination
      * @return  &util.telephony.TelephonyCall a call object
      */
-    public function &createCall(&$terminal, &$destination) { }
+    public function createCall($terminal, $destination) { }
     
     /**
      * Get terminal
@@ -135,7 +135,7 @@
      * @param   &util.telephony.TelephonyAddress address
      * @return  &util.telephony.TelephonyTerminal
      */
-    public function &getTerminal(&$address) { }
+    public function getTerminal($address) { }
     
     /**
      * Release terminal
@@ -145,7 +145,7 @@
      * @param   &util.telephony.TelephonyTerminal terminal
      * @return  bool success
      */
-    public function releaseTerminal(&$terminal) { }
+    public function releaseTerminal($terminal) { }
 
   } 
 ?>
Index: ../../../skeleton/util/telephony/TelephonyTerminal.class.php
===================================================================
--- ../../../skeleton/util/telephony/TelephonyTerminal.class.php	(revision 8952)
+++ ../../../skeleton/util/telephony/TelephonyTerminal.class.php	(working copy)
@@ -19,9 +19,9 @@
      * @access  public
      * @param   &util.telephony.TelephonyAddress address
      */
-    public function __construct(&$address) {
+    public function __construct($address) {
       
-      $this->address= &$address;
+      $this->address= $address;
     }
     
     /**
Index: ../../../skeleton/util/telephony/TelephonyCall.class.php
===================================================================
--- ../../../skeleton/util/telephony/TelephonyCall.class.php	(revision 8952)
+++ ../../../skeleton/util/telephony/TelephonyCall.class.php	(working copy)
@@ -20,9 +20,9 @@
      * @param   &util.telephony.TelephonyAddress origin
      * @param   &util.telephony.TelephonyAddress destination
      */
-    public function __construct(&$origin, &$destination) {
-      $this->origin= &$origin;
-      $this->destination= &$destination;
+    public function __construct($origin, $destination) {
+      $this->origin= $origin;
+      $this->destination= $destination;
       
     }
     
Index: ../../../skeleton/util/Hashmap.class.php
===================================================================
--- ../../../skeleton/util/Hashmap.class.php	(revision 8952)
+++ ../../../skeleton/util/Hashmap.class.php	(working copy)
@@ -57,7 +57,7 @@
      * @return  &util.HashmapIterator
      * @see     xp://util.HashmapIterator
      */
-    public function &iterator() {
+    public function iterator() {
       return new HashmapIterator($this->_hash);
     }
         
@@ -105,8 +105,8 @@
      * @access  public
      * @param   &util.Comparator comparator an existing function or method
      */
-    public function usort(&$comparator) {
-      uasort($this->_hash, array(&$comparator, 'compare'));
+    public function usort($comparator) {
+      uasort($this->_hash, array($comparator, 'compare'));
     }
     
     /**
@@ -163,7 +163,7 @@
       if (xp::errorAt(__FILE__, __LINE__ - 1)) {
         throw(new FormatException('hash contains values which are not scalar'));
       }
-      $this->_hash= &$h;
+      $this->_hash= $h;
       return TRUE;
     }
     
@@ -183,11 +183,11 @@
      * @param   bool recursive default FALSE Merge hashmaps recursively
      * @throws  lang.IllegalArgumentException in case the parameter is neither an array nor a Hashmap
      */
-    public function merge(&$map, $recursive= FALSE) {
+    public function merge($map, $recursive= FALSE) {
       if (is('Hashmap', $map)) {
-        $h= &$map->_hash;
+        $h= $map->_hash;
       } else if (is_array($map)) {
-        $h= &$map;
+        $h= $map;
       } else {
         throw(new IllegalArgumentException('map is neither an array nor a Hashmap'));
       }
@@ -229,7 +229,7 @@
      * @param  bool strict default FALSE use strict checking.
      * @return bool TRUE if value exists, FALSE otherwise
      */     
-    public function containsValue(&$val, $strict= FALSE) {
+    public function containsValue($val, $strict= FALSE) {
       return in_array($val, $this->_hash, $strict);
     }
     
@@ -240,8 +240,8 @@
      * @param   scalar key
      * @param   &mixed value
      */
-    public function putref($key, &$value) {
-      $this->_hash[$key]= &$value;
+    public function putref($key, $value) {
+      $this->_hash[$key]= $value;
     }
 
     /**
@@ -262,7 +262,7 @@
      * @param   scalar key
      * @return  &mixed value
      */
-    public function &get($key) {
+    public function get($key) {
       if (isset($this->_hash[$key])) return $this->_hash[$key]; else return NULL;
     }
 
@@ -303,7 +303,7 @@
      * @access  public
      * @return  &scalar[] keys
      */
-    public function &keys() {
+    public function keys() {
       return array_keys($this->_hash);
     }
 
@@ -313,7 +313,7 @@
      * @access  public
      * @return  &mixed[] values
      */
-    public function &values() {
+    public function values() {
       return array_values($this->_hash);
     }
     
@@ -324,7 +324,7 @@
      * @param   &mixed object to compare with
      * @return  boolean
      */
-    public function equals(&$cmp) {
+    public function equals($cmp) {
       return is('util.Hashmap', $cmp) && ($this->_hash === $cmp->_hash);
     }
     
Index: ../../../skeleton/util/log/LogObserver.class.php
===================================================================
--- ../../../skeleton/util/log/LogObserver.class.php	(revision 8952)
+++ ../../../skeleton/util/log/LogObserver.class.php	(working copy)
@@ -24,13 +24,13 @@
      * @param   string arg
      * @return  &util.log.LogObserver
      */
-    public static function &instanceFor($arg) {
+    public static function instanceFor($arg) {
       static $inst= array();
       
       if (!isset ($inst[$arg])) {
-        $log= &Logger::getInstance();
+        $log= Logger::getInstance();
         $inst[$arg]= new LogObserver();
-        $inst[$arg]->cat= &$log->getCategory($arg);
+        $inst[$arg]->cat= $log->getCategory($arg);
       }
       
       return $inst[$arg];
@@ -43,7 +43,7 @@
      * @param   &util.Observable obs
      * @param   mixed arg default NULL
      */
-    public function update(&$obs, $arg= NULL) {
+    public function update($obs, $arg= NULL) {
       $this->cat->debug($arg);
     }
 
Index: ../../../skeleton/util/log/Logger.class.php
===================================================================
--- ../../../skeleton/util/log/Logger.class.php	(revision 8952)
+++ ../../../skeleton/util/log/Logger.class.php	(working copy)
@@ -100,7 +100,7 @@
      * @param   string name default LOG_DEFINES_DEFAULT
      * @return  &util.log.LogCategory
      */ 
-    public function &getCategory($name= LOG_DEFINES_DEFAULT) {
+    public function getCategory($name= LOG_DEFINES_DEFAULT) {
       if (!isset($this->category[$name])) $name= LOG_DEFINES_DEFAULT;
       return $this->category[$name];
     }
@@ -111,7 +111,7 @@
      * @access  public
      * @param   &util.Properties prop instance of a Properties object
      */
-    public function configure(&$prop) {
+    public function configure($prop) {
       $class= array();
       
       // Read default properties
@@ -125,12 +125,12 @@
       $section= $prop->getFirstSection();
       do {
         try {
-          $catclass= &XPClass::forName($prop->readString($section, 'category', 'util.log.LogCategory'));
+          $catclass= XPClass::forName($prop->readString($section, 'category', 'util.log.LogCategory'));
         } catch (ClassNotFoundException $e) {
           throw($e);
         }
 
-        $this->category[$section]= &$catclass->newInstance(
+        $this->category[$section]= $catclass->newInstance(
           $this->defaultIdentifier,
           $prop->readString($section, 'format', $this->defaultFormat),
           $prop->readString($section, 'date.format', $this->defaultDateformat),
@@ -148,7 +148,7 @@
         foreach ($appenders as $appender) {
           if (!isset($class[$appender])) {
             try {
-              $class[$appender]= &XPClass::forName($appender);
+              $class[$appender]= XPClass::forName($appender);
             } catch (ClassNotFoundException $e) {
               throw($e);
             }
@@ -161,7 +161,7 @@
             foreach ($arrflags as $f) { if (defined ($f)) $flags |= constant ($f); }
           }
           
-          $a= &$this->category[$section]->addAppender($class[$appender]->newInstance(), $flags);
+          $a= $this->category[$section]->addAppender($class[$appender]->newInstance(), $flags);
           $params= $prop->readArray($param_section, 'appender.'.$appender.'.params', array());
           
           // Params
@@ -197,7 +197,7 @@
      * @access  public
      * @return  &util.log.Logger a logger object
      */
-    public static function &getInstance() {
+    public static function getInstance() {
       static $instance;
   
       if (!isset($instance)) {
Index: ../../../skeleton/util/log/LogCategory.class.php
===================================================================
--- ../../../skeleton/util/log/LogCategory.class.php	(revision 8952)
+++ ../../../skeleton/util/log/LogCategory.class.php	(working copy)
@@ -114,7 +114,7 @@
         if (!($flag & $appflag)) continue;
         foreach (array_keys($this->_appenders[$appflag]) as $idx) {
           call_user_func_array(
-            array(&$this->_appenders[$appflag][$idx], 'append'),
+            array($this->_appenders[$appflag][$idx], 'append'),
             $args
           );
         }
@@ -154,8 +154,8 @@
      * @param   int flag default LOGGER_FLAG_ALL
      * @return  &util.log.LogAppender the appender added
      */
-    public function &addAppender(&$appender, $flag= LOGGER_FLAG_ALL) {
-      $this->_appenders[$flag][]= &$appender;
+    public function addAppender($appender, $flag= LOGGER_FLAG_ALL) {
+      $this->_appenders[$flag][]= $appender;
       return $appender;
     }
     
@@ -167,7 +167,7 @@
      * @param   &util.log.LogAppender appender
      * @param   int flag default LOGGER_FLAG_ALL
      */
-    public function removeAppender(&$appender, $flag= LOGGER_FLAG_ALL) {
+    public function removeAppender($appender, $flag= LOGGER_FLAG_ALL) {
       foreach (array_keys($this->_appenders) as $f) {
         if (!($f & $flag)) continue;
         
@@ -202,7 +202,7 @@
       $args= func_get_args();
       array_unshift($args, LOGGER_FLAG_INFO);
       call_user_func_array(
-        array(&$this, 'callAppenders'),
+        array($this, 'callAppenders'),
         $args
       );
     }
@@ -237,7 +237,7 @@
       $args= func_get_args();
       array_unshift($args, LOGGER_FLAG_WARN);
       call_user_func_array(
-        array(&$this, 'callAppenders'),
+        array($this, 'callAppenders'),
         $args
       );
     }
@@ -267,7 +267,7 @@
       $args= func_get_args();
       array_unshift($args, LOGGER_FLAG_ERROR);
       call_user_func_array(
-        array(&$this, 'callAppenders'),
+        array($this, 'callAppenders'),
         $args
       );
     }
@@ -297,7 +297,7 @@
       $args= func_get_args();
       array_unshift($args, LOGGER_FLAG_DEBUG);
       call_user_func_array(
-        array(&$this, 'callAppenders'),
+        array($this, 'callAppenders'),
         $args
       );
     }
Index: ../../../skeleton/util/log/Traceable.class.php
===================================================================
--- ../../../skeleton/util/log/Traceable.class.php	(revision 8952)
+++ ../../../skeleton/util/log/Traceable.class.php	(working copy)
@@ -19,6 +19,6 @@
      * @access  public
      * @param   &util.log.LogCategory cat
      */
-    public function setTrace(&$cat);
+    public function setTrace($cat);
   }
 ?>
Index: ../../../skeleton/util/TimeZone.class.php
===================================================================
--- ../../../skeleton/util/TimeZone.class.php	(revision 8952)
+++ ../../../skeleton/util/TimeZone.class.php	(working copy)
@@ -127,7 +127,7 @@
      * @return  &util.TimeZone
      * @throws  lang.IllegalArgumentException if timezone is unknown
      */    
-    public static function &getByName($abbrev) {
+    public static function getByName($abbrev) {
       if (FALSE === ($offset= TimeZone::getOffsetByTimeZoneString($abbrev))) {
         throw (new IllegalArgumentException (
           'Unknown time zone abbreviation: '.$abbrev
@@ -145,7 +145,7 @@
      * @access  public
      * @return  &util.TimeZone
      */
-    public static function &getLocal() {
+    public static function getLocal() {
       return TimeZone::getByName(date('T'));
     }
 
@@ -169,7 +169,7 @@
      * @param   &util.TimeZone tz
      * @return  &util.Date
      */
-    public function &convertDate(&$date, &$tz) {
+    public function convertDate($date, $tz) {
       return new Date ($date->getTime() + ($this->getOffsetInSeconds() - $tz->getOffsetInSeconds()));
     }
 
@@ -181,7 +181,7 @@
      * @param   &util.Date date
      * @return  &util.Date
      */    
-    public function &convertLocalDate(&$date) {
+    public function convertLocalDate($date) {
       return $this->convertDate($date, TimeZone::getLocal());
     }
   }
Index: ../../../skeleton/util/HashmapIterator.class.php
===================================================================
--- ../../../skeleton/util/HashmapIterator.class.php	(revision 8952)
+++ ../../../skeleton/util/HashmapIterator.class.php	(working copy)
@@ -34,8 +34,8 @@
      * @param   &array hash
      * @see     xp://util.Hashmap#iterator
      */
-    public function __construct(&$hash) {
-      $this->_hash= &$hash;
+    public function __construct($hash) {
+      $this->_hash= $hash;
       reset($this->_hash);
     }
   
@@ -58,7 +58,7 @@
      * @return  &mixed
      * @throws  util.NoSuchElementException when there are no more elements
      */
-    public function &next() {
+    public function next() {
       if (is_null($this->_key)) {
         throw(new NoSuchElementException('No more elements'));
       }
Index: ../../../skeleton/util/Properties.class.php
===================================================================
--- ../../../skeleton/util/Properties.class.php	(revision 8952)
+++ ../../../skeleton/util/Properties.class.php	(working copy)
@@ -53,7 +53,7 @@
      * @param   &io.File file
      * @return  &util.Properties
      */
-    public static function &fromFile(&$file) {
+    public static function fromFile($file) {
       return new Properties($file->getURI());
     }
 
@@ -65,7 +65,7 @@
      * @param   string str
      * @return  &util.Properties
      */
-    public static function &fromString($str) {
+    public static function fromString($str) {
       with ($prop= new Properties(NULL)); {
         $section= NULL;
         $prop->_data= array();
@@ -280,7 +280,7 @@
      * @param   util.Hashmap default default NULL what to return in case the section or key does not exist
      * @return  &util.Hashmap
      */
-    public function &readHash($section, $key, $default= NULL) {
+    public function readHash($section, $key, $default= NULL) {
       $this->_load();
       if (!isset($this->_data[$section][$key])) return $default;
       
@@ -471,7 +471,7 @@
       $this->_load();
       if (!$this->hasSection($section)) $this->_data[$section]= array();
       if (is('Hashmap', $value)) {
-        $this->_data[$section][$key]= &$value;
+        $this->_data[$section][$key]= $value;
       } else {
         $this->_data[$section][$key]= new Hashmap($value);
       }
Index: ../../../skeleton/util/Visitor.class.php
===================================================================
--- ../../../skeleton/util/Visitor.class.php	(revision 8952)
+++ ../../../skeleton/util/Visitor.class.php	(working copy)
@@ -19,6 +19,6 @@
      * @access  public
      * @param   &util.Component Component
      */
-    public function visit(&$Component);
+    public function visit($Component);
   }
 ?>
Index: ../../../skeleton/util/Configurable.class.php
===================================================================
--- ../../../skeleton/util/Configurable.class.php	(revision 8952)
+++ ../../../skeleton/util/Configurable.class.php	(working copy)
@@ -20,6 +20,6 @@
      * @param   &util.Properties properties
      * @return  bool
      */
-    public function configure(&$properties);
+    public function configure($properties);
   }
 ?>
Index: ../../../skeleton/util/Component.class.php
===================================================================
--- ../../../skeleton/util/Component.class.php	(revision 8952)
+++ ../../../skeleton/util/Component.class.php	(working copy)
@@ -19,7 +19,7 @@
      * @access  public
      * @param   &util.Visitor Visitor
      */
-    public function accept(&$Visitor);
+    public function accept($Visitor);
 
     /**
      * Adds the given component to the children
@@ -27,7 +27,7 @@
      * @access  public
      * @param   &util.Component Component
      */
-    public function addChild(&$Component);
+    public function addChild($Component);
 
     /**
      * Removes the given component from the children
@@ -35,7 +35,7 @@
      * @access  public
      * @param   &util.Component Component
      */
-    public function remChild(&$Component);
+    public function remChild($Component);
 
     /**
      * Returns an array with all children
Index: ../../../skeleton/util/Calendar.class.php
===================================================================
--- ../../../skeleton/util/Calendar.class.php	(revision 8952)
+++ ../../../skeleton/util/Calendar.class.php	(working copy)
@@ -34,7 +34,7 @@
      * @param   int method default CAL_DST_EU Method to calculate (CAL_DST_EU|CAL_DST_US)
      * @return  &util.Date
      */
-    public static function &dstBegin($year= -1, $method= CAL_DST_EU) {
+    public static function dstBegin($year= -1, $method= CAL_DST_EU) {
       if (-1 == $year) $year= date('Y');
       $i= 0;
       $ofs= ($method == CAL_DST_US) ? 1 : -1;
@@ -56,7 +56,7 @@
      * @param   int year default -1 Year, defaults to current year
      * @return  &util.Date
      */
-    public static function &dstEnd($year= -1) {
+    public static function dstEnd($year= -1) {
       if (-1 == $year) $year= date('Y');
       $i= 0;
       do {
@@ -76,7 +76,7 @@
      * @param   int method default CAL_DST_EU Method to calculate (CAL_DST_EU|CAL_DST_US)
      * @return  bool
      */
-    public static function inDst(&$date, $method= CAL_DST_EU) {
+    public static function inDst($date, $method= CAL_DST_EU) {
       return (
         $date->isAfter(Calendar::dstBegin($date->getYear(), $method)) &&
         $date->isBefore(Calendar::dstEnd($date->getYear()))
@@ -100,7 +100,7 @@
      * @param   array holidays default array() holidays to be included in calculation
      * @return  int number of workdays
      */
-    public function workdays(&$start, &$end, $holidays= array()) {
+    public function workdays($start, $end, $holidays= array()) {
       $s= $start->getTime();
       $e= $end->getTime();
 
@@ -125,7 +125,7 @@
      * @param   &util.Date date
      * @return  &util.Date
      */
-    public static function &midnight(&$date) {
+    public static function midnight($date) {
       $d= new Date(mktime(0, 0, 0, $date->mon, $date->mday, $date->year));
       return $d;
     }
@@ -139,7 +139,7 @@
      * @param   &util.Date date
      * @return  &util.Date
      */
-    public static function &monthBegin(&$date) {
+    public static function monthBegin($date) {
       $d= new Date(mktime(0, 0, 0, $date->mon, 1, $date->year));
       return $d;
     }
@@ -153,7 +153,7 @@
      * @param   &util.Date date
      * @return  &util.Date
      */
-    public static function &monthEnd(&$date) {
+    public static function monthEnd($date) {
       $d= new Date(mktime(23, 59, 59, $date->mon+ 1, 0, $date->year));
       return $d;
     }
@@ -181,7 +181,7 @@
      * @return  int calendar week
      * @see     http://www.salesianer.de/util/kalwoch.html 
      */
-    public static function week(&$date) {
+    public static function week($date) {
       $d= $date->getTime();
       $y= $date->year + 1;
       do {
@@ -201,7 +201,7 @@
      * @return  &util.Date for date of the first of advent
      * @see     http://www.salesianer.de/util/kalfaq.html
      */
-    public static function &advent($year= -1) {
+    public static function advent($year= -1) {
       if (-1 == $year) $year= date('Y');
      
       $s= mktime(0, 0, 0, 11, 26, $year);
@@ -224,7 +224,7 @@
      * @see     http://www.salesianer.de/util/kalfaq.html
      * @see     php://easter-date#user_contrib
      */
-    public static function &easter($year= -1) {
+    public static function easter($year= -1) {
       if (-1 == $year) $year= date('Y');
       
       $g = $year % 19;
Index: ../../../skeleton/util/ChainedException.class.php
===================================================================
--- ../../../skeleton/util/ChainedException.class.php	(revision 8952)
+++ ../../../skeleton/util/ChainedException.class.php	(working copy)
@@ -22,9 +22,9 @@
      * @param   string message
      * @param   &lang.Throwable cause
      */
-    public function __construct($message, &$cause) {
+    public function __construct($message, $cause) {
       parent::__construct($message);
-      $this->cause= &$cause;
+      $this->cause= $cause;
     }
 
     /**
@@ -33,8 +33,8 @@
      * @access  public
      * @param   &lang.Throwable cause
      */
-    public function setCause(&$cause) {
-      $this->cause= &$cause;
+    public function setCause($cause) {
+      $this->cause= $cause;
     }
 
     /**
@@ -43,7 +43,7 @@
      * @access  public
      * @return  &lang.Throwable
      */
-    public function &getCause() {
+    public function getCause() {
       return $this->cause;
     }
     
@@ -61,7 +61,7 @@
       }
       if (!$this->cause) return $s;
       
-      $loop= &$this->cause;
+      $loop= $this->cause;
       while ($loop) {
 
         // String of cause
Index: ../../../skeleton/util/DateUtil.class.php
===================================================================
--- ../../../skeleton/util/DateUtil.class.php	(revision 8952)
+++ ../../../skeleton/util/DateUtil.class.php	(working copy)
@@ -28,7 +28,7 @@
      * @param   &util.Date date
      * @return  &util.Date
      */
-    public static function &getMidnight(&$date) {
+    public static function getMidnight($date) {
       $d= new Date(Date::mktime (
         0,
         0,
@@ -48,7 +48,7 @@
      * @param   &util.Date date
      * @return  &util.Date
      */
-    public static function &getLastOfMonth(&$date) {
+    public static function getLastOfMonth($date) {
       $d= new Date(Date::mktime (
         $date->getHours(),
         $date->getMinutes(),
@@ -68,7 +68,7 @@
      * @param   &util.Date date
      * @return  &util.Date
      */
-    public static function &getFirstOfMonth(&$date) {
+    public static function getFirstOfMonth($date) {
       $d= new Date(Date::mktime (
         $date->getHours(),
         $date->getMinutes(),
@@ -89,7 +89,7 @@
      * @param   int count default 1
      * @return  &util.Date
      */
-    public static function &addMonths(&$date, $count= 1) {
+    public static function addMonths($date, $count= 1) {
       $d= new Date(Date::mktime(
         $date->getHours(),
         $date->getMinutes(),
@@ -110,7 +110,7 @@
      * @param   int count default 1
      * @return  &util.Date
      */
-    public static function &addWeeks(&$date, $count= 1) {
+    public static function addWeeks($date, $count= 1) {
       return DateUtil::addDays($date, $count * 7);
     }
     
@@ -123,7 +123,7 @@
      * @param   int count default 1
      * @return  &util.Date
      */
-    public static function &addDays(&$date, $count= 1) {
+    public static function addDays($date, $count= 1) {
       $d= new Date(Date::mktime(
         $date->getHours(),
         $date->getMinutes(),
@@ -144,7 +144,7 @@
      * @param   int count default 1
      * @return  &util.Date
      */
-    public static function &addHours(&$date, $count= 1) {
+    public static function addHours($date, $count= 1) {
       $d= new Date(Date::mktime(
         $date->getHours() + $count,
         $date->getMinutes(),
@@ -165,7 +165,7 @@
      * @param   int count default 1
      * @return  &util.Date
      */
-    public static function &addMinutes(&$date, $count= 1) {
+    public static function addMinutes($date, $count= 1) {
       $d= new Date(Date::mktime(
         $date->getHours(),
         $date->getMinutes() + $count,
@@ -186,7 +186,7 @@
      * @param   int count default 1
      * @return  &util.Date
      */
-    public static function &addSeconds(&$date, $count= 1) {
+    public static function addSeconds($date, $count= 1) {
       $d= new Date(Date::mktime(
         $date->getHours(),
         $date->getMinutes(),
@@ -208,7 +208,7 @@
      * @param   &util.Date d2
      * @return  &util.TimeSpan
      */
-    public static function &timeSpanBetween(&$d1, &$d2) {
+    public static function timeSpanBetween($d1, $d2) {
       $t= new TimeSpan($d1->getTime()-$d2->getTime());
       return $t;
     }
@@ -230,7 +230,7 @@
      * @param   &util.Date b
      * @return  int
      */
-    public static function compare(&$a, &$b) {
+    public static function compare($a, $b) {
       return $b->compareTo($a);
     }
 
Index: ../../../skeleton/util/io/VirtualFileManager.class.php
===================================================================
--- ../../../skeleton/util/io/VirtualFileManager.class.php	(revision 8952)
+++ ../../../skeleton/util/io/VirtualFileManager.class.php	(working copy)
@@ -30,7 +30,7 @@
      * @access  public
      * @return  &io.VirtualFileManager
      */
-    public function &getInstance() {
+    public function getInstance() {
       static $instance= NULL;
       
       if (NULL === $instance) $instance= new VirtualFileManager();
@@ -44,13 +44,13 @@
      * @param   string path
      * @param   &string data
      */
-    public function addFile($path, &$data) {
+    public function addFile($path, $data) {
       $stream= new Stream();
       $stream->open (STREAM_MODE_READWRITE);
       $stream->write ($data);
       $stream->rewind();
       
-      $this->fileMap[$path]= &$data;
+      $this->fileMap[$path]= $data;
     }
     
     /**
@@ -60,7 +60,7 @@
      * @param   string path
      * @return  &io.Stream file
      */
-    public function &getFile($path) {
+    public function getFile($path) {
       if (isset ($this->fileMap[$path]))
         return $this->fileMap[$path];
     }
Index: ../../../skeleton/util/PropertyManager.class.php
===================================================================
--- ../../../skeleton/util/PropertyManager.class.php	(revision 8952)
+++ ../../../skeleton/util/PropertyManager.class.php	(working copy)
@@ -36,7 +36,7 @@
      * @access  public
      * @return  &util.PropertyManager
      */
-    public static function &getInstance() {
+    public static function getInstance() {
       static $instance;
       
       if (!isset($instance)) $instance= new PropertyManager();
@@ -60,8 +60,8 @@
      * @param   string name
      * @param   &util.Properties properties
      */
-    public function register($name, &$properties) {
-      $this->_prop[$this->_path.$name]= &$properties;
+    public function register($name, $properties) {
+      $this->_prop[$this->_path.$name]= $properties;
     }
 
     /**
@@ -85,7 +85,7 @@
      * @param   string name
      * @return  &util.Properties
      */
-    public function &getProperties($name) {
+    public function getProperties($name) {
       if (!isset($this->_prop[$this->_path.$name])) {
         $this->_prop[$this->_path.$name]= new Properties(
           $this->_path.DIRECTORY_SEPARATOR.$name.'.ini'
Index: ../../../skeleton/util/Binford.class.php
===================================================================
--- ../../../skeleton/util/Binford.class.php	(revision 8952)
+++ ../../../skeleton/util/Binford.class.php	(working copy)
@@ -72,7 +72,7 @@
      * @access  public
      * @return  &peer.Header
      */
-    public function &getHeader() {
+    public function getHeader() {
       return new Header('X-Binford', $this->poweredBy.' (more power)');
     }
   }
Index: ../../../skeleton/util/Observable.class.php
===================================================================
--- ../../../skeleton/util/Observable.class.php	(revision 8952)
+++ ../../../skeleton/util/Observable.class.php	(working copy)
@@ -73,11 +73,11 @@
      * @param   &util.Observer observer a class implementing the util.Observer interface
      * @throws  lang.IllegalArgumentException in case the argument is not an observer
      */
-    public function addObserver(&$observer) {
+    public function addObserver($observer) {
       if (!is('util.Observer', $observer)) {
         throw(new IllegalArgumentException('Passed argument is not an util.Observer'));
       }
-      $this->_obs[]= &$observer;
+      $this->_obs[]= $observer;
     }
     
     /**
Index: ../../../skeleton/util/collections/Stack.class.php
===================================================================
--- ../../../skeleton/util/collections/Stack.class.php	(revision 8952)
+++ ../../../skeleton/util/collections/Stack.class.php	(working copy)
@@ -49,7 +49,7 @@
      * @param   &lang.Object object
      * @return  &lang.Object object
      */
-    public function &push(&$object) {
+    public function push($object) {
       array_unshift($this->_elements, $object);
       $this->_hash+= HashProvider::hashOf($object->hashCode());
       return $object;
@@ -62,7 +62,7 @@
      * @return  &lang.Object
      * @throws  util.NoSuchElementException
      */    
-    public function &pop() {
+    public function pop() {
       if (empty($this->_elements)) {
         throw(new NoSuchElementException('Stack is empty'));
       }
@@ -80,7 +80,7 @@
      * @access  public
      * @return  &lang.Object object
      */        
-    public function &peek() {
+    public function peek() {
       if (empty($this->_elements)) return NULL; else return $this->_elements[0];
     }
   
@@ -113,7 +113,7 @@
      * @param   &lang.Object object
      * @return  int position
      */
-    public function search(&$object) {
+    public function search($object) {
       return ($keys= array_keys($this->_elements, $object)) ? $keys[0] : -1;
     }
     
@@ -125,7 +125,7 @@
      * @return  &lang.Object
      * @throws  lang.IndexOutOfBoundsException
      */
-    public function &elementAt($index) {
+    public function elementAt($index) {
       if (!isset($this->_elements[$index])) {
         throw(new IndexOutOfBoundsException('Index '.$index.' out of bounds'));
       }
@@ -149,7 +149,7 @@
      * @param   &lang.Object cmp
      * @return  bool
      */
-    public function equals(&$cmp) {
+    public function equals($cmp) {
       return (
         is('util.collections.Stack', $cmp) && 
         ($this->hashCode() === $cmp->hashCode())
Index: ../../../skeleton/util/collections/HashTable.class.php
===================================================================
--- ../../../skeleton/util/collections/HashTable.class.php	(revision 8952)
+++ ../../../skeleton/util/collections/HashTable.class.php	(working copy)
@@ -29,15 +29,15 @@
      * @param   &lang.Object value
      * @return  &lang.Object the previous value associated with the key
      */
-    public function &put(&$key, &$value) {
+    public function put($key, $value) {
       $h= $key->hashCode();
       if (!isset($this->_buckets[$h])) {
         $previous= NULL;
       } else {
-        $previous= &$this->_buckets[$h][1];
+        $previous= $this->_buckets[$h][1];
       }
 
-      $this->_buckets[$h]= array(&$key, &$value);
+      $this->_buckets[$h]= array($key, $value);
       $this->_hash+= HashProvider::hashOf($h.$value->hashCode());
       return $previous;
     }
@@ -50,7 +50,7 @@
      * @param   &lang.Object key
      * @return  &lang.Object the value associated with the key
      */
-    public function &get(&$key) {
+    public function get($key) {
       $h= $key->hashCode();
       if (!isset($this->_buckets[$h])) return NULL; 
 
@@ -66,12 +66,12 @@
      * @param   &lang.Object key
      * @return  &lang.Object the previous value associated with the key
      */
-    public function &remove(&$key) {
+    public function remove($key) {
       $h= $key->hashCode();
       if (!isset($this->_buckets[$h])) {
         $previous= NULL;
       } else {
-        $previous= &$this->_buckets[$h][1];
+        $previous= $this->_buckets[$h][1];
         $this->_hash-= HashProvider::hashOf($h.$previous->hashCode());
         unset($this->_buckets[$h]);
       }
@@ -114,7 +114,7 @@
      * @param   &lang.Object key
      * @return  bool
      */
-    public function containsKey(&$key) {
+    public function containsKey($key) {
       return isset($this->_buckets[$key->hashCode()]);
     }
 
@@ -125,7 +125,7 @@
      * @param   &lang.Object value
      * @return  bool
      */
-    public function containsValue(&$value) {
+    public function containsValue($value) {
       foreach (array_keys($this->_buckets) as $key) {
         if ($this->_buckets[$key][1]->equals($value)) return TRUE;
       }
@@ -149,7 +149,7 @@
      * @param   &lang.Object cmp
      * @return  bool
      */
-    public function equals(&$cmp) {
+    public function equals($cmp) {
       return (
         is('util.collections.Map', $cmp) && 
         ($this->hashCode() === $cmp->hashCode())
@@ -165,7 +165,7 @@
     public function keys() {
       $keys= array();
       foreach (array_keys($this->_buckets) as $key) {
-        $keys[]= &$this->_buckets[$key][0];
+        $keys[]= $this->_buckets[$key][0];
       }
       return $keys;
     }
Index: ../../../skeleton/util/collections/Set.class.php
===================================================================
--- ../../../skeleton/util/collections/Set.class.php	(revision 8952)
+++ ../../../skeleton/util/collections/Set.class.php	(working copy)
@@ -18,7 +18,7 @@
      * @param   &lang.Object object
      * @return  bool TRUE if this set did not already contain the specified element. 
      */
-    public function add(&$object);
+    public function add($object);
 
     /**
      * Removes an object from this set
@@ -27,7 +27,7 @@
      * @param   &lang.Object object
      * @return  bool TRUE if this set contained the specified element. 
      */
-    public function remove(&$object);
+    public function remove($object);
 
     /**
      * Removes an object from this set
@@ -36,7 +36,7 @@
      * @param   &lang.Object object
      * @return  bool TRUE if the set contains the specified element. 
      */
-    public function contains(&$object);
+    public function contains($object);
 
     /**
      * Returns this set's size
@@ -93,6 +93,6 @@
      * @param   &lang.Object cmp
      * @return  bool
      */
-    public function equals(&$cmp);
+    public function equals($cmp);
   }
 ?>
Index: ../../../skeleton/util/collections/LRUBuffer.class.php
===================================================================
--- ../../../skeleton/util/collections/LRUBuffer.class.php	(revision 8952)
+++ ../../../skeleton/util/collections/LRUBuffer.class.php	(working copy)
@@ -56,17 +56,17 @@
      * @param   &lang.Object element
      * @return  &lang.Object victim
      */
-    public function &add(&$element) {
+    public function add($element) {
       $h= $element->hashCode();
       $this->_access[$h]= $this->microtime();
-      $this->_elements[$h]= &$element;
+      $this->_elements[$h]= $element;
 
       // Check if this buffer's size has been exceeded
       if (sizeof($this->_access) <= $this->size) return NULL;
       
       // Find the position of the smallest value and delete it
       $p= array_search(min($this->_access), $this->_access, TRUE);
-      $victim= &$this->_elements[$p];
+      $victim= $this->_elements[$p];
 
       unset($this->_access[$p]);
       unset($this->_elements[$p]);
@@ -80,7 +80,7 @@
      * @access  public
      * @param   &lang.Object element
      */
-    public function update(&$element) {
+    public function update($element) {
       $this->_access[$element->hashCode()]= $this->microtime();
     }
     
Index: ../../../skeleton/util/collections/Map.class.php
===================================================================
--- ../../../skeleton/util/collections/Map.class.php	(revision 8952)
+++ ../../../skeleton/util/collections/Map.class.php	(working copy)
@@ -27,7 +27,7 @@
      * @param   &lang.Object value
      * @return  &lang.Object the previous value associated with the key
      */
-    public function &put(&$key, &$value);
+    public function put($key, $value);
 
     /**
      * Returns the value to which this map maps the specified key. 
@@ -37,7 +37,7 @@
      * @param   &lang.Object key
      * @return  &lang.Object the value associated with the key
      */
-    public function &get(&$key);
+    public function get($key);
     
     /**
      * Removes the mapping for this key from this map if it is present.
@@ -48,7 +48,7 @@
      * @param   &lang.Object key
      * @return  &lang.Object the previous value associated with the key
      */
-    public function &remove(&$key);
+    public function remove($key);
     
     /**
      * Removes all mappings from this map.
@@ -78,7 +78,7 @@
      * @param   &lang.Object key
      * @return  bool
      */
-    public function containsKey(&$key);
+    public function containsKey($key);
 
     /**
      * Returns true if this map maps one or more keys to the specified value. 
@@ -87,7 +87,7 @@
      * @param   &lang.Object value
      * @return  bool
      */
-    public function containsValue(&$value);
+    public function containsValue($value);
 
     /**
      * Returns a hashcode for this map
@@ -104,7 +104,7 @@
      * @param   &lang.Object cmp
      * @return  bool
      */
-    public function equals(&$cmp);
+    public function equals($cmp);
 
   }
 ?>
Index: ../../../skeleton/util/collections/HashProvider.class.php
===================================================================
--- ../../../skeleton/util/collections/HashProvider.class.php	(revision 8952)
+++ ../../../skeleton/util/collections/HashProvider.class.php	(working copy)
@@ -36,7 +36,7 @@
      * @access  public
      */
     public static function __static() {
-      $self= &HashProvider::getInstance();
+      $self= HashProvider::getInstance();
       $self->setImplementation(new DJBX33AHashImplementation());
     }
     
@@ -47,7 +47,7 @@
      * @access  public
      * @return  &util.collections.HashProvider
      */
-    public static function &getInstance() {
+    public static function getInstance() {
       static $instance= NULL;
 
       if (!isset($instance)) {
@@ -69,7 +69,7 @@
      * @return  int
      */
     public static function hashOf($str) {
-      $self= &HashProvider::getInstance();
+      $self= HashProvider::getInstance();
       return $self->impl->hashOf($str);
     }
 
@@ -80,13 +80,13 @@
      * @param   &util.collections.HashImplementation impl
      * @throws  lang.IllegalArgumentException when impl is not a HashImplementation
      */
-    public function setImplementation(&$impl) {
+    public function setImplementation($impl) {
       if (!is('util.collections.HashImplementation', $impl)) {
         throw(new IllegalArgumentException(
           'Implementation is not a HashImplementation, '.xp::typeOf($impl).' given'
         ));
       }
-      $this->impl= &$impl;
+      $this->impl= $impl;
     }
 
     /**
@@ -95,7 +95,7 @@
      * @access  public
      * @return  &util.collections.HashImplementation
      */
-    public function &getImplementation() {
+    public function getImplementation() {
       return $this->impl;
     }
   }
Index: ../../../skeleton/util/collections/HashSet.class.php
===================================================================
--- ../../../skeleton/util/collections/HashSet.class.php	(revision 8952)
+++ ../../../skeleton/util/collections/HashSet.class.php	(working copy)
@@ -23,12 +23,12 @@
      * @param   &lang.Object object
      * @return  bool TRUE if this set did not already contain the specified element. 
      */
-    public function add(&$object) { 
+    public function add($object) { 
       $h= $object->hashCode();
       if (isset($this->_elements[$h])) return FALSE;
       
       $this->_hash+= HashProvider::hashOf($h);
-      $this->_elements[$h]= &$object;
+      $this->_elements[$h]= $object;
       return TRUE;
     }
 
@@ -39,7 +39,7 @@
      * @param   &lang.Object object
      * @return  bool TRUE if this set contained the specified element. 
      */
-    public function remove(&$object) { 
+    public function remove($object) { 
       $h= $object->hashCode();
       if (!isset($this->_elements[$h])) return FALSE;
 
@@ -55,7 +55,7 @@
      * @param   &lang.Object object
      * @return  bool TRUE if the set contains the specified element. 
      */
-    public function contains(&$object) { 
+    public function contains($object) { 
       return isset($this->_elements[$object->hashCode()]);
     }
 
@@ -104,7 +104,7 @@
         
         $result= TRUE;
         $this->_hash+= HashProvider::hashOf($h);
-        $this->_elements[$h]= &$objects[$i];
+        $this->_elements[$h]= $objects[$i];
       }
       return $result;
     }
@@ -136,7 +136,7 @@
      * @param   &lang.Object cmp
      * @return  bool
      */
-    public function equals(&$cmp) {
+    public function equals($cmp) {
       return (
         is('util.collections.Set', $cmp) && 
         ($this->hashCode() === $cmp->hashCode())
Index: ../../../skeleton/util/collections/Queue.class.php
===================================================================
--- ../../../skeleton/util/collections/Queue.class.php	(revision 8952)
+++ ../../../skeleton/util/collections/Queue.class.php	(working copy)
@@ -47,8 +47,8 @@
      * @param   &lang.Object object
      * @return  &lang.Object object
      */
-    public function &put(&$object) {
-      $this->_elements[]= &$object;
+    public function put($object) {
+      $this->_elements[]= $object;
       $this->_hash+= HashProvider::hashOf($object->hashCode());
       return $object;
     }
@@ -60,12 +60,12 @@
      * @return  &lang.Object
      * @throws  util.NoSuchElementException
      */    
-    public function &get() {
+    public function get() {
       if (empty($this->_elements)) {
         throw(new NoSuchElementException('Queue is empty'));
       }
 
-      $e= &$this->_elements[0];
+      $e= $this->_elements[0];
       $this->_hash-= HashProvider::hashOf($e->hashCode());
       $this->_elements= array_slice($this->_elements, 1);
       return $e;
@@ -80,7 +80,7 @@
      * @access  public
      * @return  &lang.Object object
      */        
-    public function &peek() {
+    public function peek() {
       if (empty($this->_elements)) return NULL; else return $this->_elements[0];
     }
   
@@ -113,7 +113,7 @@
      * @param   &lang.Object object
      * @return  int position
      */
-    public function search(&$object) {
+    public function search($object) {
       return ($keys= array_keys($this->_elements, $object)) ? $keys[0] : -1;
     }
 
@@ -125,7 +125,7 @@
      * @return  &lang.Object
      * @return  bool
      */
-    public function remove(&$object) {
+    public function remove($object) {
       if (-1 == ($pos= $this->search($object))) return FALSE;
       
       $this->_hash-= HashProvider::hashOf($this->_elements[$pos]->hashCode());
@@ -142,7 +142,7 @@
      * @return  &lang.Object
      * @throws  lang.IndexOutOfBoundsException
      */
-    public function &elementAt($index) {
+    public function elementAt($index) {
       if (!isset($this->_elements[$index])) {
         throw(new IndexOutOfBoundsException('Index '.$index.' out of bounds'));
       }
@@ -166,7 +166,7 @@
      * @param   &lang.Object cmp
      * @return  bool
      */
-    public function equals(&$cmp) {
+    public function equals($cmp) {
       return (
         is('util.collections.Queue', $cmp) && 
         ($this->hashCode() === $cmp->hashCode())
