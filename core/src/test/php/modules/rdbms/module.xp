<?php
/* This file is part of the XP framework
 *
 * $Id$
 */

  uses('rdbms2.Driver', 'rdbms2.Drivers');

  /**
   * Pluggable database module
   *
   */
  module rdbms(2.0) {
    static function __static() {
      self::registerDriver('default', newinstance('rdbms2.Driver', array(), '{
        public function newConnection($dsn) {
          return "DefaultConnection<".$dsn.">";
        }
      }'));
    }

    /**
     * Register a driver
     * 
     * @param  string name
     * @param  rdbms2.Driver impl
     */
    protected static function registerDriver($name, rdbms2Driver $impl) {
      rdbms2Drivers::register(strtr($name, '_', '+'), $impl);
    }
  }
?>